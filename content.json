{"meta":{"title":"feidom up up up","subtitle":"","description":"","author":"ä¹”æ–‡é£","url":"https://feidom-up.github.io","root":"/"},"pages":[{"title":"å…³äº","date":"2020-06-28T01:43:01.000Z","updated":"2024-08-22T02:26:03.664Z","comments":true,"path":"about/index.html","permalink":"https://feidom-up.github.io/about/index.html","excerpt":"","text":"Mustangå‚ç¦…ä¹‹åˆï¼Œçœ‹å±±æ˜¯å±±ï¼Œçœ‹æ°´æ˜¯æ°´ã€‚ç¦…æœ‰æ‚Ÿæ—¶ï¼Œçœ‹å±±ä¸æ˜¯å±±ï¼Œçœ‹æ°´ä¸æ˜¯æ°´ï¼›ç¦…ä¸­å½»æ‚Ÿï¼Œçœ‹å±±ä»»ç„¶æ˜¯å±±ï¼Œçœ‹æ°´ä»ç„¶æ˜¯æ°´ã€‚ å‰ç«¯ä¹”æ–‡é£çš„ç¬”è®°åšå®¢ã€‚"},{"title":"æ ‡ç­¾","date":"2020-07-01T01:03:55.000Z","updated":"2024-08-22T02:26:03.664Z","comments":true,"path":"tags/index.html","permalink":"https://feidom-up.github.io/tags/index.html","excerpt":"","text":""},{"title":"åˆ†ç±»","date":"2020-07-01T00:56:35.000Z","updated":"2024-08-22T02:26:03.664Z","comments":true,"path":"categories/index.html","permalink":"https://feidom-up.github.io/categories/index.html","excerpt":"","text":""}],"posts":[{"title":"hhkbå¿«æ·é”®å¤‡å¿˜","slug":"hhkbå¿«æ·é”®å¤‡å¿˜","date":"2024-08-22T01:36:22.000Z","updated":"2024-08-22T02:37:50.882Z","comments":true,"path":"2024/08/22/hhkbå¿«æ·é”®å¤‡å¿˜/","link":"","permalink":"https://feidom-up.github.io/2024/08/22/hhkb%E5%BF%AB%E6%8D%B7%E9%94%AE%E5%A4%87%E5%BF%98/","excerpt":"","text":"åˆ‡æ¢è¿æ¥æ–¹å¼ï¼š fn+ctrl+0 æœ‰çº¿ fn+ctrl+1~4 è“ç‰™è®¾å¤‡ è“ç‰™é…å¯¹ä¿¡æ¯æ³¨å†Œï¼š fn+q è¿›å…¥ç­‰å¾…é…å¯¹æ¨¡å¼ fn+ctrl+14 å°†å³å°†è¦é…å¯¹çš„è®¾å¤‡å­˜æ”¾åˆ° 14 ä½ç½®ã€‚ åˆ é™¤æ‰€æœ‰é…å¯¹ä¿¡æ¯ï¼š fn+q è¿›å…¥ç­‰å¾…é…å¯¹æ¨¡å¼ fn+z+delete åˆ é™¤ä¸ªåˆ«é…å¯¹ä¿¡æ¯ï¼š fn+q è¿›å…¥ç­‰å¾…é…å¯¹æ¨¡å¼ fn+ctrl+delete+1~4 é…å¯¹ä¸­é€”å–æ¶ˆé…å¯¹ï¼š fn+q è¿›å…¥ç­‰å¾…é…å¯¹æ¨¡å¼ fn+x è½¯æ”¹åˆ‡æ¢æ¨¡å¼ï¼ˆé DIPï¼Œä»…åœ¨æ— çº¿çŠ¶æ€ä¸‹æœ‰æ•ˆï¼‰ åˆ‡æ¢ä¸º win æ¨¡å¼ï¼šfn+ctrl+w åˆ‡æ¢ä¸º mac æ¨¡å¼ï¼šfn+ctrl+m","categories":[{"name":"å·¥å…·","slug":"å·¥å…·","permalink":"https://feidom-up.github.io/categories/%E5%B7%A5%E5%85%B7/"}],"tags":[{"name":"å·¥å…·","slug":"å·¥å…·","permalink":"https://feidom-up.github.io/tags/%E5%B7%A5%E5%85%B7/"}]},{"title":"Javascript-in-V8","slug":"Javascript-in-V8","date":"2021-12-30T03:05:49.000Z","updated":"2024-08-22T02:26:03.658Z","comments":true,"path":"2021/12/30/Javascript-in-V8/","link":"","permalink":"https://feidom-up.github.io/2021/12/30/Javascript-in-V8/","excerpt":"","text":"ä¹‹å‰å¯¹jså¯¹è±¡ä½ ä¸çŸ¥é“çš„é‚£äº›ç‰¹ç‚¹ æœ‰ä¸€äº›ç²—æµ…çš„è®¤è¯†ï¼Œè¿™ä¸ªç¬”è®°å†™çš„å¾ˆæ— ç†å–é—¹ã€‚ç°åœ¨ç ”ç©¶æ¸…æ¥šä»¥åï¼Œé‡æ–°è¡¥ä¸€ç¯‡ç¬”è®°æ¥å®Œå–„çŸ¥è¯†ã€‚ä¹‹å‰çš„è¿™ç¯‡å°±ç•™ç€å§ï¼Œä¹Ÿæ˜¯å­¦ä¹ å’Œæ€è€ƒä¸­ä¸€ä¸ªå¿…æœ‰çš„è®¤çŸ¥é˜¶æ®µã€‚ JS Object ä¸­çš„å¸¸è§„å±æ€§å’Œæ’åºå±æ€§ å¸¸è§„å±æ€§(V8:properties)åœ¨propertieså¯¹è±¡ä¸­ï¼Œä¼šæŒ‰ç…§åˆ›å»ºæ—¶çš„é¡ºåºä¿å­˜å¸¸è§„å±æ€§ã€‚ æ’åºå±æ€§(V8:elements)å½“keyä¸ºæ•°å­—æ—¶ï¼Œä¼šå°†è¿™ç±»å±æ€§å­˜å‚¨åœ¨elementså¯¹è±¡ä¸­ï¼Œå°†å…¶ä½œä¸ºä¸€å—è¿ç»­çš„å†…å­˜ä»¥Arrayçš„å½¢å¼è¿›è¡Œå­˜å‚¨ã€‚åœ¨elementså¯¹è±¡ä¸­ï¼Œä¼šæŒ‰ç…§æ•°å­—å¤§å°çš„é¡ºåºæ¥å­˜æ”¾æ’åºå±æ€§ã€‚ 12345678910111213141516171819202122232425function ClassA() &#123; this[100] = '100'; this[1] = '1'; this['B1'] = 'B'; this[50] = '50'; this[3] = '3'; this['A2'] = 'A'; this['C'] = 'C';&#125;var a = new ClassA();for(key in a)&#123; console.log(`$&#123;key&#125;: $&#123;a[key]&#125;`)&#125;a.qwf = 'qwf';console.log(a)function ClassB(num)&#123; for(let i=0; i&lt;num; i++)&#123; this[i] = `eeeeee_$&#123;i&#125;` this[`p_$&#123;i&#125;`] = `pppppp_$&#123;i&#125;` &#125;&#125;var b = new ClassB(20);console.log(b) ä½œä¸ºä¸¤ä¸ªå±æ€§ï¼Œä¸ºå•¥åœ¨consoleçš„æ§åˆ¶å°æ‰“å°çš„ç»“æœä¸­æ²¡æœ‰å‘ç°å‘¢ã€‚å…¶å®consoleçš„æ§åˆ¶å°æ‰“å°çš„æ²¡é‚£ä¹ˆæ·±ï¼Œé‚£æ€ä¹ˆèƒ½æ‰¾åˆ°ä»–ä»¬å‘¢ã€‚åœ¨Memoryæ§åˆ¶å°å½•åˆ¶å¿«ç…§ï¼Œå°±èƒ½å¾ˆæ˜æ˜¾çš„çœ‹åˆ°ä»–ä»¬ã€‚ V8å¼•æ“å¯¹Objectåšäº†ä»€ä¹ˆæ®‹å¿çš„äº‹ Hidden Class éšè—ç±» Properties pointer å¸¸è§„å±æ€§æŒ‡é’ˆ Elements pointer æ’åºå…ƒç´ æŒ‡é’ˆ ä¸ºä»€ä¹ˆè¦è¿™æ ·åˆ†å¼€å‘¢ï¼Ÿï¼Ÿï¼Ÿé¦–å…ˆæˆ‘ä»¬éœ€è¦èŠä¸€ä¸‹å…¬è®¤æœ€å¿«çš„Cè¯­è¨€ï¼Œå®ƒçš„å¿«å¾ˆå¤§ç¨‹åº¦ä¸Šå½’åŠŸäºå®ƒä¸¥æ ¼çš„ç±»å‹çº¦æŸã€‚ä¹Ÿå°±æ˜¯è¯´å¤§å‹çš„é¢å‘å¯¹è±¡ç³»ç»Ÿéƒ½æœ‰ä¸¥æ ¼çš„æ•°æ®ç»“æ„ï¼Œè¿™å¯¹å¿«é€Ÿçš„å±æ€§æŸ¥è¯¢å¾ˆå…³é”®ã€‚æ‰€ä»¥ï¼ŒJsä¸­çš„Objectçš„å®šä¹‰éå¸¸å·®,å› ä¸ºå®ƒå¤ªçµæ´»äº†ï¼Œæ²¡æœ‰ç±»å‹çš„æ¦‚å¿µã€‚è€Œä¸”å­˜åœ¨å¯ä»¥ä»»æ€§ä¿®æ”¹çš„åŸå‹é“¾ï¼Œå®ƒæ²¡æœ‰é™åˆ¶ã€‚æ‰€ä»¥åœ¨V8å¯¹JS Objectè¿›è¡Œå¤„ç†æ—¶ï¼Œä¸ºäº†å¿«é€Ÿçš„å±æ€§æŸ¥è¯¢ï¼Œæœ‰ä¸€ä¸ªå†…éƒ¨çš„ç±»å‹ç³»ç»Ÿï¼šå¯¹å…·æœ‰ç›¸åŒç»“æ„çš„å¯¹è±¡è¿›è¡Œåˆ†ç»„ï¼›å„ä¸ªå¯¹è±¡ä¹‹é—´å¯ä»¥å…±äº«ï¼›ç”Ÿæˆçš„æˆæœ¬å¾ˆé«˜ï¼Œä½†æ˜¯ä¹‹åçš„æˆæœ¬å¾ˆä½ã€‚ V8å¯¹Objectåšçš„ä¼˜åŒ– å±æ€§å†…è”ç¼“å­˜ åœ¨å±æ€§æŸ¥è¯¢ä¸­æ£€æŸ¥éšè—ç±» åœ¨ç¬¬ä¸€æ¬¡æ—¶å®Œå…¨é€šç”¨æŸ¥è¯¢ ç„¶åè®°ä½ä½ åœ¨å“ªä¸ªåœ°æ–¹æ‰¾åˆ°çš„è¿™ä¸ªå±æ€§ç”Ÿæˆæ–°çš„ä¼˜åŒ–ä»£ç  ä¸‹æ¬¡ä½¿ç”¨ï¼Œç›´æ¥è®¿é—® Object å±æ€§çš„å­˜å‚¨ ç›´æ¥åœ¨objectä¸Šï¼Œå³é»˜è®¤çŠ¶æ€ï¼Œè¿™ä¸ªå¾ˆå¿« arrayå½¢å¼å­˜å‚¨ï¼Œä¹Ÿå¾ˆå¿« å“ˆå¸Œè¡¨ç»“æ„ï¼ˆå­—å…¸æ¨¡å¼ï¼‰ï¼Œè¿™ä¸ªçš„äº¤äº’ä¼šæ…¢å¾ˆå¤šå­—å…¸æ¨¡å¼ç›¸æ¯”äºå…¶ä»–æ¨¡å¼ï¼Œè¿è¡Œé€Ÿåº¦é™ä½ã€‚è§¦å‘å­—å…¸æ¨¡å¼çš„è¡Œä¸ºå¦‚ä¸‹ï¼š éå¸¸å¤šçš„å±æ€§ï¼Œä»–ä»¬æ²¡æœ‰åŠæ³•è¢«æ”¾åœ¨é»˜è®¤çŠ¶æ€çš„å†…å­˜ä¸­ï¼Œè¿™ä¸ªæ•°å­—å¯èƒ½æ˜¯10 ï¼Ÿ30ï¼Ÿ æ”¹å˜å±æ€§ åˆ é™¤å±æ€§ JS Array å­—å…¸æ¨¡å¼ åŒæ ·å¯¹æ¯”Cï¼ŒJsä¸­çš„Arrayä¹Ÿå› ä¸ºæ²¡æœ‰ç±»å‹çº¦æŸç»™äº†ç”¨æˆ·å¾ˆå¤§çš„è‡ªç”±ï¼Œä¹ŸæŒºæ ·å¸¦æ¥äº†ä¸å¯æ§çš„æ€§èƒ½é—®é¢˜ã€‚ è¿ç»­å†…å­˜çš„å­˜å‚¨å’Œhashè¡¨ï¼ˆå­—å…¸æ¨¡å¼ï¼‰ä¸åŒçš„å­˜å‚¨æ–¹å¼ï¼Œä¸ä¸€æ ·çš„æ€§èƒ½ä½“éªŒã€‚ è§¦å‘å­—å…¸æ¨¡å¼çš„è¡Œä¸ºå¦‚ä¸‹ï¼š éå¸¸å¤šçš„å±æ€§ï¼Œå¤§äº1024ï¼Ÿ 10000ï¼Ÿ åŠ¨æ€æ‰©å®¹ 1234567// badvar a = new Array();a[1000] = 8;// okvar a = new Array(1000);a[0] = 'nihao';a[100] = 8; ç»“åˆä»¥ä¸Šç‰¹ç‚¹ï¼Œæˆ‘ä»¬åº”è¯¥åšä»€ä¹ˆ Jsç»™æˆ‘ä»¬å¾ˆé«˜çš„çµæ´»åº¦è®©æˆ‘ä»¬éšå¿ƒæ‰€æ¬²ï¼Œä½†æ˜¯æˆ‘ä»¬ä¸åº”è¯¥ä¸ºæ‰€æ¬²ä¸ºï¼Œè‡ªç”±åº¦é«˜ï¼Œå¸¦æ¥çš„å°±æ˜¯æ€§èƒ½çš„ä¸å‹å¥½ã€‚ 12345function ClassA() &#123; this[100] = '100';&#125;var a = new ClassA();a.qwf = 'qwf'; // è¿™æ ·ç›´æ¥æ·»åŠ å±æ€§ï¼Œæ”¹å˜äº†éšè—ç±» æ‰€ä»¥å°½é‡å®šä¹‰å¥½é»˜è®¤å±æ€§ï¼Œä¸è¦åœ¨æ„é€ å‡½æ•°ä¹‹å¤–åšå¤§é‡çš„åŠ¨æ€å±æ€§æ·»åŠ å’Œåˆ é™¤ï¼Œå°½é‡å…±äº«éšè—ç±»ã€‚ V8 V8 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191192193194195196197198199200201202203204205206207208209210211212213214The first type of attry to talk about in javascript is the TypedArraySo TypedArrays are going to make a lot of aense to you ifyou are coming from a C backgroundThey are contiguous blocks of memory that are specified for a particylar data type.So you have Uint32Array, Float64Array, Unit8Array, and so on, and so forth, which actually, if you are familiar with Javascript,is sort of unusual. Because most things in Javascript have no type. So this idea that we are specifying a very specific size for our numbers id actually like pretty unique. And that&#39;s because the TypedArray specification grew up alongside the WebGL specification.And you can inagine how you need that level of specificity if you are doing graphics programming.So that&#39;s sort of where the TypedArray specification came from.But it&#39;s been adopted into other things now that it&#39;s there.So agein, they&#39;re memory efficient. You don&#39;t have to box them.They behave as you&#39;d expect.They&#39;re a very nice option for arrays.But if you can&#39;t use TypedArrays for whatever reason, you need to use Javascript Arrays.SO Javascript Array object --Array with a captital A-- has an API which is going to look a little weird to you if you are used to C-style arrays.It&#39;s going to have operations that are different.It&#39;s going to have like push and pop.It&#39;s going to allow you to index out of bounds.It&#39;s going to have just sort of odd behavior to me as somebody coming from C.So as you can imagine, because the API allows all these non-C array-like things, the backing storage in V8 is not always somethings that looks like array. There are actually two diffent types of backing storage for arrays. Thewe are sparse arrays and dense arrays, which map to either something tach looks like a C-style array. like you&#39;d expect, or a hash table. And if you array is backed by a V8 hash table, that&#39;s called being in dictionary mode, and it&#39;s considerably less efficient. It&#39;s case that you want to avoid.There are many factors in V8 that causes you to be kicked into dictionary mode or not. So it&#39;s kind of complicated to define them all. But one of them, for instance, is space efficiency.So is the codes you wrote will be three times more effcient, use three times less space if it was backed by a hash table than an array, then it&#39;ll be a hsah table on back end. So there are criteria like that. js allows you to create a new uninitialized array and then just suddenly index into it at whatever index.This, doesn&#39;t make any sense in C. It&#39;s not something you&#39;d actually do. And in V8, it will immediately trigger dictionary mode. So this, you will now have a nice, slow array to waok with, not something you want.So real simple change.All you have to do is declare how much storage you want up font.Now you have declared to V8 that you actually want an array of a certain size. V8 will back your array by a contigous array of that size, and you can go from there.Veay sensible, kind of no-brainerish, but again, Javascript allows you to do it in a way that ends up being very inefficient, so it&#39;s important to know.So that is the numeric representation and the immediate representation of objects.-------------------------------Object in V8 -------------------------------So objects in JavaScript are there very poorly defined things.They are associative arrays.They&#39;re just bundles of key value pairs of properties.So you have string balue for key, property value.And all property values are these undefined whatevers, because Javascript doesn&#39;t have a notion of type.Object have prototype chains. You can add and remove properties anywhere at the prototype chain and on the object inself at any point. Javascript doesn&#39;t enforce any specificity or structure in your code.So if you wanted to, you could make every single object in your whole program absolutely a unique set of properties.Nothing in Javascript will enforce structure or self-similarity.But just because JavaScript allows you to do that, you really,really shouldn&#39;t.That&#39;s actually a terrible thing to do for performance.And I&#39;ll explain why in a minute.So in V8,the V8 team looked at trying to write a large-scale application in JavaScript and thought, hey, you know what&#39;s important in large-scale systems is object-orientenness.And if you have object-orientenness in your system, then now, property access is one of the key things that you need to make fast. So V8 designed its structure to make property access on objects as efficient as it could be.So the internal representation of an object in V8 is three words.So first, we have a hidden class pointer, which is an internal notion of type, which I&#39;ll explain in a second.And then we have two pointers to different kinds of properties.We have properties that have string names and then properties that have int names. But really, the only thing that&#39;s important is your have a type, and then you have property storage.So waht&#39;s this hidden class thing?So hidden classes, again, ther&#39;re V8&#39;s interbal notion of type.JavaScript itself isn&#39;t going to enforce any kind of notionof type on you.BUt in order to make things effcient, V8itself need to have some sort of structure in whst it things you&#39;re doing. So it introduces a type system.And that type system froups objects with the same structure.So as you&#39;re adding properties to objects, which you can do in JavaScript, V8 will be looking at the properties on each object and mapping ta&#x3D;hat bundle of properties to a hidden class, which defines an object with exactly those properties.So, dor instance, if I have this constructor in JavaScript where I have a point, and it has an x and y, and the way those values are added by first adding x to the object and then adding y, thay&#39;s going to generate a hidden class that backs objects that are created from this function that has exactle the properties x and y.And that really seems sort of obvious.But then, the first time this function is run, that hidden class is going to be built for the first time. And then, all subsequent times this dunction is run, those new objects can share the same hidden class.So you only pay the price for building it the very first time.After that, you can just use the same object.So we went through all this trouble of building up a notion of type.So now, we have types that correspond to specifically what exact properties are on an object.We can use taht notion of type to make property access quick using something called inline caching.So if yoiu want to look up a property on an object in Javascript, you&#39;re going to say, I am looking for property with name x on object y.The first thing you do whrn you&#39;re trying to look up a property is check the hidden class of the object.If you&#39;re never tried to look up that property on an object of that type before, then what you&#39;re going to have to do is a fully generic search for that property.So again, we just have a bundle of properties somewhere.They all have string names.You have a string of the property you&#39;re looking for.And you&#39;re going to have to look through taht list for the property that has a matching name.That&#39;s a pretty slow operation.But once you found thst property once, you can remember the offset to it. you can remember where you found that property and use it later, which means that you can use that to generate new optimized code which specifies how you look up that particular property on that particular object.And next time you want to look up property with that name on an object of that type, you can have direct access You know exactly where to go in an object of that type.And it&#39;s much much much faster.So thst&#39;s really what the notion of having hidden class is getting us, is now we can make property access really fast through inline caching.So this is a classic example of bad idea. function Vec2(x,y)&#123; this.x &#x3D; x; this.y &#x3D; y;&#125;var v0 &#x3D; new Vec2(5,8);v0.z &#x3D; 34;So I have another constructor. It&#39;s creating a vector object. But then, after I go through the trouble of doing that, I decide that I now wanted property z on this object.The problem with that is that if you add a property z to that object at some future point, if you just dynamically do that, you&#39;re going to change the hidden class of the object, which means that all this nice caching you&#39;re done and building up a notion of where the properties are, that&#39;s just blown away because now you have a new hidden class. You have to pay to build the new hidden class, and now you have to deal with a new hidden class.So one of the best things you can do to make you code efficient is to create a few well-defined types.Don&#39;t do alot of dynamic property adding and removing outside of constructors.Pretty much set things up once, have them look alike so that they can share the same hidden class, and don&#39;t mess with the properties they have.-------------------------------Object properties storage-------------------------------So now we know an object has properties.those properties can be in different storage states.So the first state ,the default, is that they can be stored directly in an array on the object.that great, that&#39;s fast. that&#39;s where you want to be. A second state they can be in is being stored in array off the objects. still great. No problem.The third case, which is the one you really have to look out for, is when they&#39;re stored in a hash table.So mush like just the array case in general where arrays can have different types of backing storage, properties can have different types of backing storage too.So properties can either be in normal mode where they&#39;re stored as an array or a dictionary mode where they&#39;re stored as a hash table. And if you have an object in dictionary mode, it&#39;s going to be mush slower to interact with.So you don&#39;t want that.So what triggers dictionary mode ,and how do you avoid it? Well, one thing that triggers itis toomany properties.So if you have so many properties that they won&#39;t fit into the internal storage for properties, then you have to have a hash table elsewhere. And that number of too many properties is somewhere around 30. It&#39;s quite generous, but you mighe hit it in some cases.The other things you can do to confuse your object and kick it into dictionary mode are to change the properties on the object.You can change the attribute, you can delete properties, that kind of thing. Those things are all going to kick you straight to dictionary mode.Again, and now you&#39;re going to make your object mush slower to interact with.","categories":[{"name":"jsåŸç†","slug":"jsåŸç†","permalink":"https://feidom-up.github.io/categories/js%E5%8E%9F%E7%90%86/"}],"tags":[{"name":"jsåŸç†","slug":"jsåŸç†","permalink":"https://feidom-up.github.io/tags/js%E5%8E%9F%E7%90%86/"}]},{"title":"jså¯¹è±¡ä½ ä¸çŸ¥é“çš„é‚£äº›ç‰¹ç‚¹","slug":"jså¯¹è±¡ä½ ä¸çŸ¥é“çš„é‚£äº›ç‰¹ç‚¹","date":"2021-08-09T01:36:22.000Z","updated":"2024-08-22T02:26:03.659Z","comments":true,"path":"2021/08/09/jså¯¹è±¡ä½ ä¸çŸ¥é“çš„é‚£äº›ç‰¹ç‚¹/","link":"","permalink":"https://feidom-up.github.io/2021/08/09/js%E5%AF%B9%E8%B1%A1%E4%BD%A0%E4%B8%8D%E7%9F%A5%E9%81%93%E7%9A%84%E9%82%A3%E4%BA%9B%E7%89%B9%E7%82%B9/","excerpt":"","text":"jså¯¹è±¡çš„â€œå¿«/æ…¢â€å±æ€§å®šä¹‰ä¸€ä¸ªobjï¼Œå®ƒæ˜¯ä¸‹é¢è¿™æ ·çš„ 1234567const obj = &#123; 5: '1', 6: '2', 1: '6', 'qwf': 'ä¹”æ–‡é£', 'yy': 'qwf',&#125; initåˆå§‹åŒ–æ—¶ï¼Œå±æ€§ä¼šå°½é‡å½’ä¸ºâ€œå¿«â€å±æ€§ï¼ŒåŒæ—¶ä¹Ÿä¼šå­˜åœ¨â€œæ…¢â€å±æ€§ã€‚é‚£ä¹ˆå®ƒåœ¨jsä¸­ï¼Œä¸ºäº†æœ‰æ•ˆçš„æå‡å­˜å‚¨å’Œè®¿é—®å±æ€§çš„æ€§èƒ½ï¼Œjså¯¹æ…¢å±æ€§çš„å­˜å‚¨æ˜¯ä¸‹å›¾è¿™æ ·çš„ã€‚ å¿«å±æ€§ï¼šç›´æ¥åŠ åœ¨å¯¹è±¡å†…å±æ€§ä¸Šï¼Œæ–¹ä¾¿è¯»å–ã€‚ æ…¢å±æ€§ï¼šåŠ è½½æ’åºæˆ–å¸¸è§„å±æ€§ä¸Šï¼Œæ–¹ä¾¿æ“ä½œã€‚ï¼ˆåœ¨å¯¹è±¡è®¾ç½®å±æ€§æ—¶ï¼Œä¼šåŠ åˆ°æ…¢å±æ€§ï¼‰ Qï¼šä¸ºå•¥æ…¢ï¼ŸAï¼šå¤šäº†ä¸€å±‚æ·±åº¦ï¼Œå½±å“æ•°æ®æ“ä½œï¼Œå¤šäº†Elementå±‚å’ŒPropertieså±‚ã€‚ Qï¼šä¸ºå•¥ä¸ç›´æ¥éƒ½å­˜åœ¨å†…å±æ€§ä¸Šï¼ŸAï¼šåœ¨å†…å±æ€§ä¸­ï¼Œobjè¶Šæ¥è¶Šå¤§ï¼Œå½±å“å­˜å‚¨ã€‚ï¼ˆä»¥å‰å†…å±æ€§åªèƒ½åŠ¨æ€è®¾ç½®10ä¸ªï¼Œç°åœ¨ä¸æ­¢-ç¡¬ä»¶åŠ å¼ºç­‰åŸå› ï¼‰ jsæ•°ç»„çš„â€œå¿«/æ…¢â€æ•°ç»„ å¿«æ•°ç»„ï¼šçº¿æ€§ç»“æ„ï¼Œè¿ç»­å†…å­˜ï¼ˆåŠ¨æ€æ‰©å®¹ï¼‰ï¼Œå½“å®šä¹‰åˆå§‹åŒ–é•¿åº¦å°äº1024æ—¶ï¼Œå±äºå¿«æ•°ç»„ æ…¢æ•°ç»„ï¼šå®šä¹‰é•¿åº¦å¤§äº1024æ—¶ï¼Œéœ€è¦ç»´æŠ¤é¢å¤–çš„å“ˆå¸Œç±³è¡¨ã€‚ ç”±å¿«åˆ°æ…¢ï¼š å®šä¹‰é•¿åº¦å¤§äº1024æ—¶ã€‚åŠ¨æ€æ‰©å®¹æ—¶ï¼Œlength*1.5+16ä»¥ä¸Šã€‚ å¿«æ•°ç»„çš„æ–°å®¹é‡æ—¶æ‰©å®¹å®¹é‡çš„3å€ä»¥ä¸Šæ—¶ã€‚ ç”±æ…¢åˆ°å¿«ï¼š æ•°é‡åœ¨1024å†… å®¹é‡ä¸€ä¸‹ç¼©å‡50%ã€‚å‡å®¹æ—¶ï¼Œæ–°æ•°ç»„é•¿åº¦æ˜¯åŸæ¥é•¿åº¦çš„1/2ï¼Œå°±è®¡ç®—éœ€è¦é‡Šæ”¾çš„ç©ºé—´ï¼Œåšå¥½æ ‡è®°ï¼Œç­‰å¾…GCå›æ”¶ã€‚å¦‚æœ1/2 &lt; length &lt; 1,ç”¨holeså¯¹è±¡å¡«å……ï¼Œholeså¤ªå¤šä¹Ÿæ˜¯æ…¢æ•°ç»„ã€‚","categories":[{"name":"jsåŸç†","slug":"jsåŸç†","permalink":"https://feidom-up.github.io/categories/js%E5%8E%9F%E7%90%86/"}],"tags":[{"name":"jsåŸç†","slug":"jsåŸç†","permalink":"https://feidom-up.github.io/tags/js%E5%8E%9F%E7%90%86/"}]},{"title":"jsä¸Šä¸‹æ–‡æ‰§è¡Œæœºåˆ¶","slug":"jså‡½æ•°æ‰§è¡Œæœºåˆ¶","date":"2021-08-09T00:28:01.000Z","updated":"2024-08-22T02:26:03.659Z","comments":true,"path":"2021/08/09/jså‡½æ•°æ‰§è¡Œæœºåˆ¶/","link":"","permalink":"https://feidom-up.github.io/2021/08/09/js%E5%87%BD%E6%95%B0%E6%89%A7%E8%A1%8C%E6%9C%BA%E5%88%B6/","excerpt":"","text":"æ‰§è¡Œä¸Šä¸‹æ–‡ ECS(Execute Context Stack): jså‡½æ•°æ‰§è¡Œä¸Šä¸‹æ–‡ä»é€»è¾‘ä¸Šå½¢æˆä¸€ä¸ªæ ˆã€‚æ ˆåº•æ€»æ˜¯å…¨å±€ä¸Šä¸‹æ–‡ï¼Œæ ˆé¡¶æ˜¯å½“å‰ï¼ˆæ´»åŠ¨çš„ï¼‰æ‰§è¡Œä¸Šä¸‹æ–‡ã€‚ GC(Global Context): å…¨å±€ä¸Šä¸‹æ–‡ã€‚ GO(Global Context): å…¨å±€ä¸Šä¸‹æ–‡ç”Ÿæˆçš„å¯¹è±¡ã€‚ VO(Var Object): å£°æ˜æ—¶å¯¹è±¡ã€‚ AO(Action Object): æ‰§è¡Œæ—¶å¯¹è±¡ã€‚ åœ¨AOæ‰§è¡Œæ—¶ï¼Œåˆ†ä¸ºä¸¤ä¸ªé˜¶æ®µï¼š å˜é‡å®šä¹‰ï¼šAOçš„å‡†å¤‡é˜¶æ®µï¼Œes6ä¹‹å‰çš„å˜é‡æå‡å°±åœ¨è¿™ä¸ªé˜¶æ®µ å˜é‡èµ‹å€¼ã€‚ æ•°æ®ç»“æ„123456789101112131415161718192021222324252627// å…¨å±€ä¸Šä¸‹æ–‡GC:&#123; lexicalEnvironment: &#123; // è¯æ³•ç¯å¢ƒ EnvironmentRecord: &#123; // ç¯å¢ƒè®°å½• Type: \"Object\", &#123;...&#125;, // æ ‡è¯†ç¬¦ä»€ä¹ˆçš„å…¶ä»–ä¿¡æ¯ outer: null, // å…¨å±€ä¸Šä¸‹æ–‡æ²¡æœ‰å¼•ç”¨ &#125; &#125;, variablesEnvironment:&#123; // å˜é‡ç¯å¢ƒ &#125;&#125;// å‡½æ•°æ‰§è¡Œä¸Šä¸‹æ–‡ Function Exection ContextEC:&#123; lexicalEnvironment: &#123; // è¯æ³•ç¯å¢ƒ EnvironmentRecord: &#123; // ç¯å¢ƒè®°å½• Type: \"Declarative\", //å‡½æ•°ç¯å¢ƒ &#123;...&#125;, // æ ‡è¯†ç¬¦ä»€ä¹ˆçš„å…¶ä»–ä¿¡æ¯ outer: '&lt;Global outer&gt;, &lt;function enviroment reference&gt;,', // å¯¹å…¨å±€ç¯å¢ƒæˆ–å¤–éƒ¨å‡½æ•°ç¯å¢ƒçš„å¼•ç”¨ &#125; &#125;, variablesEnvironment:&#123; // å˜é‡ç¯å¢ƒ &#125;&#125; ä¸ºäº†é€‚é…æ—©èµ·çš„ES5çš„varç­‰ï¼Œå¢åŠ äº†å˜é‡ç¯å¢ƒã€‚å˜é‡ç¯å¢ƒä¹Ÿæ˜¯ä¸€ä¸ªè¯æ³•ç¯å¢ƒï¼Œå…¶ç¯å¢ƒè®°å½•å…¶åŒ…å«äº†ç”±å˜é‡å£°æ˜è¯­å¥ã€‚åœ¨ES6ä¸­ï¼Œè¯æ³•ç¯å¢ƒè®°å½•å™¨å’Œå˜é‡ç¯å¢ƒè®°å½•å™¨çš„åŒºåˆ«åœ¨äºï¼š è¯æ³•ç¯å¢ƒï¼šç”¨äºå­˜å‚¨å‡½æ•°å£°æ˜å’Œå˜é‡ï¼ˆletï¼Œconstï¼‰çš„ç»‘å®šã€‚ å˜é‡ç¯å¢ƒï¼šä»…ç”¨äºå­˜å‚¨å˜é‡ï¼ˆvarï¼‰çš„ç»‘å®š ä½œç”¨åŸŸé“¾ scope chainï¼šä½œç”¨åŸŸé“¾å…¶å®å°±æ˜¯åœ¨ [AO,GC,VO] æ—¶ã€‚ é—­åŒ…åŸç†* åœ¨ä½œç”¨åŸŸscopeå †ç©ºé—´ä¸­å­˜å‚¨closore(fn)ã€‚","categories":[{"name":"jsåŸç†","slug":"jsåŸç†","permalink":"https://feidom-up.github.io/categories/js%E5%8E%9F%E7%90%86/"}],"tags":[{"name":"jsåŸç†","slug":"jsåŸç†","permalink":"https://feidom-up.github.io/tags/js%E5%8E%9F%E7%90%86/"}]},{"title":"OTåœ¨çº¿åä½œ","slug":"otåä½œ","date":"2021-08-05T01:57:07.000Z","updated":"2024-08-22T02:26:03.659Z","comments":true,"path":"2021/08/05/otåä½œ/","link":"","permalink":"https://feidom-up.github.io/2021/08/05/ot%E5%8D%8F%E4%BD%9C/","excerpt":"","text":"OTåä½œæ€æƒ³è§£å†³å†²çª A, Bä¸¤ä¸ªç”¨æˆ·åœ¨åä½œåŒä¸€æ®µåˆå§‹æ–‡æœ¬ï¼šâ€™aaabâ€™ã€‚å†²çªæ“ä½œï¼š Aåœ¨ç¬¬3ä¸ªå­—ç¬¦åé¢æ’å…¥äº†ä¸€ä¸ªc(â€˜aaacbâ€™)ã€‚ Båœ¨ç¬¬3ä¸ªå­—ç¬¦åé¢æ’å…¥äº†ä¸€ä¸ªd(â€˜aaadbâ€™)ã€‚ è‹¥Aå…ˆæäº¤ï¼Œotåæ­£ç¡®ç»“æœï¼šâ€™aaacdbâ€™ã€‚ï¼Ÿä¸ºä»€ä¹ˆä¸æ˜¯æŒ‰é¡ºåºçš„â€™aaadcbâ€™ã€‚å› ä¸ºä¸æ˜¯é¡ºåºæ‰§è¡Œï¼Œäº§ç”Ÿå†²çªæ—¶ï¼Œä¸ºä¿è¯åŒæ–¹æ“ä½œæœ€å¤§ç¨‹åº¦å¾—åˆ°ä¿å­˜ï¼Œotåä½œåï¼ŒBçš„æ“ä½œå®é™…å˜ä¸ºåœ¨ç¬¬4ä¸ªå­éƒ½åæ’å…¥ã€‚Aè§†è§’ï¼šAçš„ç»“æœâ€™aaacbâ€™è¢«Bæ‹¿å»æ“ä½œï¼Œç»“æœâ€™aaadcbâ€™ã€‚Bè§†è§’ï¼šBçš„ç»“æœâ€™aaadbâ€™è¢«Aæ‹¿å»æ“ä½œï¼Œç»“æœâ€™aaacdbâ€™ã€‚å¯è§è¿™ä¸ªç»“æœæ˜¯æ­£ç¡®ç»“æœã€‚ åå°èªæ˜çš„otè½¬å‘åŠŸèƒ½å°±æ˜¯æŠŠæ¯ä¸ªäººæäº¤çš„è¡Œä¸ºè½¬å˜ä¸€ä¸‹å†å‘Šè¯‰åˆ«äººï¼Œä¸¤æ–¹çš„ç»“æœå°±ä¸€è‡´äº†ã€‚å…¶å®è¿™ä¸ªæŠ€æœ¯å°±æ˜¯ OT ç®—æ³•ï¼šAæ¥æ”¶åˆ°çš„Bæ“ä½œï¼šâ€™åœ¨ç¬¬3ä¸ªå­—ç¬¦åé¢æ’å…¥äº†ä¸€ä¸ªdâ€˜ ==ot==&gt; â€˜aaacbåœ¨ç¬¬4ä¸ªå­—ç¬¦åé¢æ’å…¥äº†ä¸€ä¸ªdâ€˜(aaacdb)Bæ¥æ”¶åˆ°çš„Aæ“ä½œï¼šâ€™åœ¨ç¬¬3ä¸ªå­—ç¬¦åé¢æ’å…¥äº†ä¸€ä¸ªcâ€˜ ==ot==&gt; â€˜aaadbåœ¨ç¬¬3ä¸ªå­—ç¬¦åé¢æ’å…¥äº†ä¸€ä¸ªcâ€˜(aaacdb) OT ç®—æ³•å…¨åå« Operation Transformationï¼Œä½ çœ‹ä»åå­—å°±å¯¹åº”äº†ä¸Šé¢æˆ‘è¯´çš„è½¬å˜ç®—æ³•ã€‚å‡è®¾æˆ‘ä»¬çš„ OT ç®—æ³•çš„è½¬æ¢åŠŸèƒ½å« transformï¼Œé‚£ transformï¼ˆAï¼ŒBï¼‰= Aâ€™,Bâ€™ã€‚ä¹Ÿå°±æ˜¯è¯´ä½ è¾“å…¥ä¸¤ä¸ªå…ˆåæ‰§è¡Œçš„è¡Œä¸ºï¼Œå®ƒä¼šå‘Šè¯‰ä½ ä¸¤ä¸ªè½¬æ¢è¿‡åçš„è¡Œä¸ºï¼Œç„¶åæŠŠ Aâ€™è¡Œä¸ºå‘Šè¯‰ Bï¼ŒæŠŠ Bâ€™è¡Œä¸ºå‘Šè¯‰ Aï¼Œè¿™æ ·å¤§å®¶å†åº”ç”¨å°±ç›¸å®‰æ— äº‹äº†ã€‚ æ ¸å¿ƒå…¬å¼ï¼šapply(apply(S,A),B) = apply(apply(S,B),A)S:å¼€å§‹çŠ¶æ€Aï¼šAçš„æ“ä½œABï¼šBçš„æ“ä½œBå†²çªæ—¶ï¼ŒAæ‰§è¡Œå®Œè‡ªå·±çš„æ“ä½œåï¼Œå†æ‰§è¡Œç»OTè½¬æ¢çš„Bæ“ä½œã€‚ä¸Bæ‰§è¡Œå®Œè‡ªå·±çš„æ“ä½œï¼Œå†æ‰§è¡Œç»OTè½¬æ¢çš„Aæ“ä½œï¼ŒåŒæ–¹çš„ç»“æœæ˜¯ä¸€è‡´çš„ã€‚å›¾ç¤ºï¼š ä¸€ä¸ªæ¼”ç¤ºOTçš„å°ç½‘ç«™ å‚è€ƒ:æ­å¼€åœ¨çº¿åä½œçš„ç¥ç§˜é¢çº±-OTç®—æ³•","categories":[{"name":"è®¾è®¡æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼","permalink":"https://feidom-up.github.io/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"}],"tags":[{"name":"è®¾è®¡æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼","permalink":"https://feidom-up.github.io/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"},{"name":"OT","slug":"OT","permalink":"https://feidom-up.github.io/tags/OT/"}]},{"title":"ä»propsçš„childrenä¸­è·å–ref","slug":"ä»propsçš„childrenä¸­è·å–ref","date":"2021-07-12T09:46:29.000Z","updated":"2024-08-22T02:26:03.662Z","comments":true,"path":"2021/07/12/ä»propsçš„childrenä¸­è·å–ref/","link":"","permalink":"https://feidom-up.github.io/2021/07/12/%E4%BB%8Eprops%E7%9A%84children%E4%B8%AD%E8%8E%B7%E5%8F%96ref/","excerpt":"","text":"ä»props.childrenä¸­å¤„ç†ref12345678910111213141516171819202122232425262728293031class Child extends React.Component &#123; render() &#123; return &lt;div&gt;Child&lt;/div&gt;; &#125;&#125; class GetRef extends React.Component &#123; componentDidMount() &#123; console.log(this.ref); &#125; render() &#123; const childElement = React.Children.only(this.props.children); return React.cloneElement( childElement, &#123; ref: el =&gt; this.ref = el &#125; ); &#125;&#125;class App extends Component &#123; render() &#123; return &lt;GetRef&gt;&lt;Child/&gt;&lt;/GetRef&gt;; &#125;&#125; ç»“åˆè½¬å‘refå°†refç»‘å®šåˆ°childrenç»„ä»¶ä¸­çš„divä¸­1234567891011121314151617181920// Comç»„ä»¶interface Props &#123; forwardedRef: ref | null;&#125;class Com extends React.Component&lt;Props, State&gt; &#123; render() &#123; const &#123;forwardedRef&#125; = this.props; return &lt;&gt; &lt;div&gt; &lt;div&gt; &lt;div ref=&#123;forwardedRef&#125;&gt;&lt;/div&gt; &lt;/div&gt; &lt;/div&gt; &lt;&gt; &#125; &#125;const forwardRefCom = React.forwardRef((props, ref) =&gt; ( &lt;Com forwardedRef=&#123;ref&#125; &#123;...props&#125; /&gt; ));return forwardRefCom;","categories":[{"name":"react","slug":"react","permalink":"https://feidom-up.github.io/categories/react/"}],"tags":[{"name":"react","slug":"react","permalink":"https://feidom-up.github.io/tags/react/"}]},{"title":"reactçš„è½¬å‘ref","slug":"reactçš„è½¬å‘ref","date":"2021-07-12T09:18:41.000Z","updated":"2024-08-22T02:26:03.660Z","comments":true,"path":"2021/07/12/reactçš„è½¬å‘ref/","link":"","permalink":"https://feidom-up.github.io/2021/07/12/react%E7%9A%84%E8%BD%AC%E5%8F%91ref/","excerpt":"","text":"ç®€å•ç†è§£ä½¿ç”¨é€šç”¨çš„é«˜é˜¶ç»„ä»¶æ—¶ï¼Œå¤–å±‚ç»„ä»¶refæ§åˆ¶é«˜é˜¶ç»„ä»¶ä¸­åŒ…è£¹çš„å­ç»„ä»¶ä¸­çš„å…ƒç´ ï¼Œæ­¤æ—¶å¤–å±‚ç»„ä»¶ä¼ å…¥çš„refå¹¶ä¸ä½œç”¨äºé«˜é˜¶ä¸Šï¼Œè¿™ä¸ªæ—¶å€™ï¼Œé«˜é˜¶ç»„ä»¶å°±è¦ç”¨åˆ°React.forwardRefè¿›è¡Œrefè½¬å‘ã€‚ å®˜æ–¹æ–‡æ¡£React.forwardRef ç®€å•ä¸¾æ —ğŸŒ°ğŸŒ°æ —å­ æ¥è‡ªJamesSawyerâ€”-React ä¸­çš„è½¬å‘ref 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465 // é«˜é˜¶ç»„ä»¶import React from 'react';function logProps(Component) &#123; class LogProps extends React.Component &#123; componentDidUpdate(prevProps) &#123; console.log('å…ˆå‰çš„å±æ€§ï¼š', prevProps); console.log('å½“å‰å±æ€§ï¼š', this.props); &#125; render() &#123; // ä½¿ç”¨forwardedRefä½œä¸ºä¸€ä¸ªrefå±æ€§ä¼ å…¥ç»„ä»¶ä¸­ const &#123; forwardedRef, ...rest &#125; = this.props; return ( &lt;Component ref=&#123;forwardedRef&#125; &#123;...rest&#125; /&gt; ); &#125; &#125; // ä½¿ç”¨React.forwardRefå¯¹LogPropsç»„ä»¶è¿›è¡Œè½¬å‘ return React.forwardRef((props, ref) =&gt; ( &#123;' ä¸Šé¢å®šä¹‰çš„LogPropsç»„ä»¶æ¥å—ä¸€ä¸ªforwardedå±æ€§ '&#125; &lt;LogProps forwardedRef=&#123;ref&#125; &#123;...props&#125; /&gt; ));&#125;// FancyButton.js å­ç»„ä»¶import React from 'react';import logProps from './logProps';// æ¥å—propså’Œrefä½œä¸ºå‚æ•°// è¿”å›ä¸€ä¸ªReact ç»„ä»¶const FancyButton = React.forwardRef((props, ref) =&gt; ( &lt;button class=\"fancybutton\" ref=&#123;ref&#125;&gt; &#123;props.children&#125; &lt;/button&gt;));// ä½¿ç”¨é«˜é˜¶ç»„ä»¶å¯¹å…¶è¿›è¡Œå°è£…export default logProps(FancyButton);// çˆ¶ç»„ä»¶// app.jsclass App extends React.Component &#123; constructor(props) &#123; super(props); // åˆ›å»ºä¸€ä¸ªref åå­—éšæ„ this.ref = React.createRef(); &#125; componentDidMount() &#123; console.log('ref', this.ref); // this.ref.current è¡¨ç¤ºè·å–refæŒ‡å‘çš„DOMå…ƒç´  this.ref.current.classList.add('primary'); // ç»™FancyButtonä¸­çš„buttonæ·»åŠ ä¸€ä¸ªclass this.ref.current.focus(); // focusåˆ°buttonå…ƒç´ ä¸Š &#125; render() &#123; // ç›´æ¥ä½¿ç”¨ref=&#123;this.fancyButtonRef&#125; return ( &lt;FancyButton ref=&#123;this.fancyButtonRef&#125;&gt;å­ç»„ä»¶&lt;/FancyButton&gt; ); &#125;&#125;","categories":[{"name":"react","slug":"react","permalink":"https://feidom-up.github.io/categories/react/"}],"tags":[{"name":"react","slug":"react","permalink":"https://feidom-up.github.io/tags/react/"}]},{"title":"React-é˜²æ­¢å†…å­˜æ³„æ¼å¤„ç†","slug":"React-é˜²æ­¢å†…å­˜æ³„æ¼å¤„ç†","date":"2021-06-18T05:40:49.000Z","updated":"2024-08-22T02:26:03.658Z","comments":true,"path":"2021/06/18/React-é˜²æ­¢å†…å­˜æ³„æ¼å¤„ç†/","link":"","permalink":"https://feidom-up.github.io/2021/06/18/React-%E9%98%B2%E6%AD%A2%E5%86%85%E5%AD%98%E6%B3%84%E6%BC%8F%E5%A4%84%E7%90%86/","excerpt":"","text":"ç”¨Reactå†™äº†ä¸€æ®µä»£ç ï¼Œæµè§ˆå™¨çš„æ§åˆ¶å°Error å¦‚ä¸‹ï¼šWarning: Canâ€™t perform a React state update on an unmounted component. This is a no-op, but it indicates a memory leak in your application. To fix, cancel all subscriptions and asynchronous tasks in a useEffect cleanup function. å•¥æ„æ€å‘¢ï¼šä¸èƒ½åœ¨æœªæŒ‚è½½çš„ç»„ä»¶ä¸Šæ‰§è¡ŒReactçŠ¶æ€æ›´æ–°ã€‚è¿™æ˜¯ä¸€ä¸ªæ— ç”¨åŠŸï¼Œä½†å®ƒè¡¨æ˜ä½ çš„åº”ç”¨ç¨‹åºä¸­å­˜åœ¨å†…å­˜æ³„æ¼ã€‚è¦è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œåœ¨useEffectæ¸…ç†å‡½æ•°ä¸­å–æ¶ˆæ‰€æœ‰çš„è®¢é˜…å’Œå¼‚æ­¥ä»»åŠ¡ã€‚ ä»¥ä¸‹æ˜¯è¿™æ®µé—®é¢˜ä»£ç ï¼š 123456789101112131415const Component = (props) =&gt; &#123; const &#123; itemId &#125; = props; const [ isRemoveing, setIsRemoveing ] = useState(false); const handlerRemove = async() =&gt; &#123; if(isRemoveing) return; setIsRemoveing(true); await removeItem(itemId); // åˆ é™¤å½“å‰è¿™ä¸ªç»„ä»¶çš„æ•°æ®ï¼Œè¿™ä¸ªç»„ä»¶å¸è½½ setIsRemoveing(false); &#125; return ( &lt;&gt; &lt;div class_name=&#123; !isRemoveing ? 'class1' : 'class2' &#125; onClick=&#123;handlerRemove&#125; &gt;&lt;/div&gt; &lt;/&gt; )&#125; åŸå› æ˜¯å•¥å‘¢ï¼šawaitç­‰å¾…ä¸€ä¸ªå¼‚æ­¥è¯·æ±‚çš„è¿”å›å†setIsRemoveingã€‚å‡å¦‚è¿™ä¸ªç»„ä»¶unmountedä¹‹åï¼Œè¯·æ±‚è¿˜æ²¡å›æ¥ï¼Œä½ è¿˜åœ¨è¿™setStateï¼Œä¸å°±ç‚¸äº†ã€‚ å¥½å§ï¼Œé‚£è§£å†³æ–¹å¼æ˜¯ä¸æ˜¯åœ¨useEffectä¸­å®šä¹‰ä¸€ä¸ªå¸è½½æ—¶çš„å˜é‡unmountedï¼Œç„¶ååœ¨setIsRemoveingæ—¶åˆ¤æ–­å¸è½½çŠ¶æ€ï¼Ÿ å—¯ï¼ŒåŸºæœ¬æ˜¯è¿™ä¸ªæ€è·¯ã€‚é‚£è¿™ä¸ªunmountedè¯¥æ€ä¹ˆå®šä¹‰ï¼Œæ˜¯ç›´æ¥const unmounted = false;, è¿˜æ˜¯const [ unmounted, setUnmounted ] = useState(false);ï¼Ÿä»¥ä¸‹æ˜¯Stack Overflowé‡Œä¸€ä¸ªå¸–å­çš„å›å¤ï¼š æ–¹å¼ä¸€ï¼š12345678910111213141516171819useEffect(() =&gt; &#123; let unmounted = false; setPageLoading(true); props .dispatch(fetchCourses()) .then(() =&gt; &#123; if (!unmounted) &#123; setPageLoading(false); &#125; &#125;) .catch((error: string) =&gt; &#123; if (!unmounted) &#123; toast.error(error); setPageLoading(false); &#125; &#125;); return () =&gt; &#123; unmounted = true &#125;;&#125;, []); æ–¹å¼äºŒï¼šuseRef1234567891011121314151617181920const Example = (props) =&gt; &#123; const unmounted = useRef(false); useEffect(() =&gt; &#123; return () =&gt; &#123; unmounted.current = true &#125; &#125;, []); const setFilter = () =&gt; &#123; // ... props.dispatch(fetchCourses()).then(() =&gt; &#123; if (!unmounted.current) &#123; setLoading(false); &#125; &#125;) &#125; // ... return ( &lt;ReactTable onFetchData=&#123;setFilter&#125; /* other props omitted */ /&gt; );&#125; æ–¹å¼äºŒä¸­å¦‚æœä¸ç”¨refï¼Œç”¨stateæˆ–è€…ç›´æ¥å®šä¹‰å˜é‡çš„è¯ï¼Œéƒ½å®ç°ä¸äº†ã€‚å¥½å§ï¼Œæ˜¯æˆ‘ä¸ç†Ÿæ‚‰çš„useRef,è¿™ä¸ªé“¾æ¥æ˜¯å®˜æ–¹æ–‡æ¡£ï¼Œå¯ä»¥å…ˆçœ‹ä¸‹ã€‚ç„¶åä¸ºäº†ç ”ç©¶å®ƒï¼Œæˆ‘æ‰¾åˆ°ä¸€ç¯‡æ¥è‡ªLee Warrickçš„Reactâ€™s useEffect and useRef Explained for Mortalsã€‚è¿™é‡Œæ˜¯æˆ‘å¯¹è¿™ç¯‡æ–‡ç« çš„ç¿»è¯‘ï¼Œä»…ä¾›å‚è€ƒã€‚ å‚è€ƒReact Hooks - Check If A Component Is Mountedhow-to-stop-memory-leak-in-useeffect-hook-react","categories":[{"name":"react","slug":"react","permalink":"https://feidom-up.github.io/categories/react/"}],"tags":[{"name":"react","slug":"react","permalink":"https://feidom-up.github.io/tags/react/"}]},{"title":"useEffect & useRef","slug":"useEffect-useRef","date":"2021-06-18T01:58:48.000Z","updated":"2024-08-22T02:26:03.661Z","comments":true,"path":"2021/06/18/useEffect-useRef/","link":"","permalink":"https://feidom-up.github.io/2021/06/18/useEffect-useRef/","excerpt":"","text":"æ³¨æ„æœ¬æ–‡æ˜¯ä¸€ç‰‡ç¿»è¯‘ï¼ŒåŸæ–‡æ¥è‡ªLee Warrickçš„Reactâ€™s useEffect and useRef Explained for Mortalsã€‚ä¸ºå•¥ç¿»è¯‘å¹¶è®°å½•è¿™ç¯‡æ–‡ç« å‘¢ï¼Œå› ä¸ºçœ‹äº†ä»¥åè§‰å¾—é€šä¿—æ˜“æ‡‚çš„ä¸ºå‡¡äººè§£é‡Šäº†useEffectå’ŒuseRefã€‚åœ¨æ­¤è®°å½•ï¼Œæ–¹ä¾¿ä»¥åå›å¤´å¤ä¹ ã€‚ é€šä¿—çš„è§£é‡ŠReactçš„ useEffect å’Œ useRef&emsp;&emsp;å¦‚æœReactæ–‡æ¡£è®©ä½ ä¸€ç­¹è«å±•ï¼Œæˆ–è€…Dan Abramovçš„åšå®¢è®©ä½ è§‰å¾—ä½ åœ¨é˜…è¯»ä»å¥¥æ—åŒ¹æ–¯å±±æµä¼ ä¸‹æ¥çš„å¤å¸Œè…Šæ–‡å·è½´ï¼Œä½ å¹¶ä¸å­¤å•,ä¸æ˜¯åªæœ‰ä½ è¿™æ ·è®¤ä¸ºã€‚&emsp;&emsp;æœ‰æ—¶ï¼ŒReactç¥æ®¿çš„ä¼—ç¥ä»¬å¾ˆéš¾å°†ä»–ä»¬çš„æ™ºæ…§è½¬åŒ–ä¸ºæˆ‘ä»¬å…¶ä»–äººå¯ä»¥ç†è§£çš„è¯­è¨€ã€‚äº‹æƒ…é€šå¸¸æ˜¯è¿™æ ·çš„ã€‚ä½ åœ¨ä½¿ç”¨Reactæ—¶é‡åˆ°å›°éš¾ï¼Œç”¨è°·æ­Œæœç´¢ä½ çš„é—®é¢˜ï¼Œç„¶åè¯»åˆ°ä¸€ä¸ªåšå®¢æˆ–Stack Overflowçš„å¸–å­ï¼Œå…¶ä¸­çš„ä¸€äº›å»ºè®®è®©ä½ æ„Ÿåˆ°æ¯”å¼€å§‹æ—¶æ›´è¿·èŒ«ã€‚&emsp;&emsp;æˆ‘å½“ç„¶ä¹Ÿæ›¾å¤šæ¬¡æˆä¸ºè¿™ç§æƒ…å†µçš„å—å®³è€…ã€‚ç‰¹åˆ«æ˜¯useEffectã€‚åœ¨æˆ‘ä»¬æ·±å…¥ç ”ç©¶è¿™ä¸ªç‰¹æ®Šçš„é’©å­ä¹‹å‰ï¼Œè®©æˆ‘è¯´æˆ‘å–œæ¬¢ç”¨hooksæ¥å†™Reactï¼Œè€Œä¸”ä¸æƒ³å†å›åˆ°ç±»ä¸­å»ã€‚è¿™å°±æ˜¯è¯´ï¼ŒuseEffectæ˜¯ä¸€ä¸ªå¾ˆå¤§çš„ç—›ç‚¹ã€‚ åˆ°åº•ä»€ä¹ˆæ˜¯â€œeffectå‰¯ä½œç”¨â€&emsp;&emsp;ä¸ºäº†è®©ä½ çœŸæ­£ç†è§£useEffectï¼Œè®©æˆ‘ä»¬é€€åä¸€ç‚¹ï¼Œè°ˆè°ˆç¼–ç¨‹å’ŒJavaScriptã€‚&emsp;&emsp;useEffectçš„åå­—å°±æ˜¯æˆ‘ä»¬äº²åˆ‡åœ°ç§°ä¸º â€œå‰¯ä½œç”¨ â€œçš„æ•ˆæœã€‚&emsp;&emsp;é‚£ä¹ˆä»€ä¹ˆæ˜¯å‰¯ä½œç”¨å‘¢ï¼Ÿå®ƒæ˜¯ä¸€æ®µä»£ç ï¼Œå®ƒä¼¸å‡ºæ‰‹æ¥â€¦â€¦åšåˆ«çš„äº‹æƒ…ã€‚è¿™æ˜¯ä¸€ä¸ªæŠ½è±¡çš„æ¦‚å¿µï¼Œæ‰€ä»¥è®©æˆ‘ä»¬ç”¨ä¾‹å­æ¥è¯´æ˜ã€‚&emsp;&emsp;è¿™é‡Œæœ‰ä¸€ä¸ªæ²¡æœ‰å‰¯ä½œç”¨çš„å‡½æ•°ã€‚ 123function add(a, b) &#123; return a + b&#125; &emsp;&emsp;å‡½æ•°addé™¤äº†æ¥å—ä¸€ä¸ªè¾“å…¥å¹¶è¿”å›ä¸€ä¸ªè¾“å‡ºå¤–ï¼Œä»€ä¹ˆä¹Ÿæ²¡åšã€‚å®ƒå¹¶æ²¡æœ‰ä¼¸æ‰‹åˆ°è‡ªèº«ä»¥å¤–çš„åœ°æ–¹å»æ£ä¹±!&emsp;&emsp;æˆ‘ä»¬æ¥ä»‹ç»ä¸€ä¸ªå‰¯ä½œç”¨ã€‚ 1234567const resultDiv = document.getElementById('add-example')function add(a, b) &#123; const result = a + b resultDiv.textContent = `The Result is $&#123;result&#125;` return a + b&#125;add(3, 4) 1&lt;div id&#x3D;&quot;add-example&quot;&gt;&lt;&#x2F;div&gt; &emsp;&emsp;ç°åœ¨ï¼Œæˆ‘ä»¬çš„å‡½æ•°ä¼¸åˆ°äº†è‡ªèº«ä¹‹å¤–æ¥æ›´æ–°DOMï¼ˆDocument Object Modelçš„ç¼©å†™ï¼‰ï¼Œå¹¶æ˜¾ç¤ºäº†ç»“æœã€‚è¿™ä¸ªé¢å¤–çš„è¡Œä¸ºæ˜¯ä¸€ä¸ªå‰¯ä½œç”¨ã€‚ Reactä¸­çš„å‰¯ä½œç”¨&emsp;&emsp;é‚£ä¹ˆReactå‘¢ï¼Ÿå®ƒæ˜¯ä¸€ä¸ªå‡ ä¹åªæ›´æ–°DOMçš„åº“ã€‚ä¸€ä¸ªè§†å›¾åº“ï¼Œå¦‚æœä½ æ„¿æ„çš„è¯ã€‚é‚£ä¹ˆåœ¨Reactä¸­ï¼Œä½ ä¼šæŠŠä»€ä¹ˆå«åšå‰¯ä½œç”¨å‘¢ï¼Ÿ&emsp;&emsp;ä»»ä½•åœ¨æ›´æ–°é¡µé¢ä¹‹å¤–çš„ä¸œè¥¿ã€‚å¦‚æœä½ ä¸ä½¿ç”¨Reactæ¥æ›´æ–°çŠ¶æ€æˆ–æ¸²æŸ“HTMLï¼Œé‚£å°±æ˜¯ä¸€ä¸ªå‰¯ä½œç”¨ã€‚å®ƒæ˜¯ä»»ä½•éReactçš„ä¸œè¥¿ã€‚&emsp;&emsp;è¿™æ„å‘³ç€ä»»ä½•æ—¶å€™ä½ è°ƒç”¨APIï¼Œä½¿ç”¨setInterval/setTimeoutï¼Œæ·»åŠ é”®ç›˜ç›‘å¬å™¨ï¼Œæˆ–è€…çœŸçš„ä»»ä½•æ—¶å€™ä½ æä¹±çª—å£å¯¹è±¡ï¼Œä½ éƒ½åœ¨å¼•å…¥å‰¯ä½œç”¨ã€‚&emsp;&emsp;hookså¾ˆç¥å¥‡ï¼Œè®©ä½ å†™å‡ºçœŸæ­£å¯è¯»ã€å¯é‡ç”¨çš„ä»£ç â€¦â€¦é™¤äº†å½“ä½ å¤„ç†å‰¯ä½œç”¨çš„æ—¶å€™ã€‚è¿™å¾ˆä¸å¹¸ï¼Œå› ä¸ºå½“ä½ ä»”ç»†æƒ³æƒ³ï¼Œä½œä¸ºç½‘ç»œå¼€å‘è€…ï¼Œæˆ‘ä»¬æ‰€åšçš„å¤§å¤šæ•°æœ‰è¶£çš„äº‹æƒ…éƒ½æ˜¯å›´ç»•ç€å‰¯ä½œç”¨å±•å¼€çš„ã€‚&emsp;&emsp;è®©æˆ‘ä»¬ä»é’©å­ä¸Šé€€ä¸€æ­¥ï¼Œçœ‹çœ‹æˆ‘ä»¬å¦‚ä½•åœ¨åŸºäºç±»çš„ç»„ä»¶ä¸­å¤„ç†å‰¯ä½œç”¨ã€‚ ç±»ç»„ä»¶å’Œå‰¯ä½œç”¨&emsp;&emsp;åœ¨åŸºäºç±»çš„ç»„ä»¶ä¸­ï¼Œæˆ‘ä»¬ä¼šä½¿ç”¨ç”Ÿå‘½å‘¨æœŸæ–¹æ³•æ¥æ‰§è¡Œä¾§é¢æ•ˆæœã€‚ä¾‹å¦‚ï¼Œåœ¨componentDidMountä¸Šï¼Œæˆ‘ä»¬ä¼šè°ƒç”¨APIæ¥è·å–æ¸²æŸ“çš„æ•°æ®ã€‚&emsp;&emsp;â€ä¸ºä»€ä¹ˆä¸åœ¨æ„é€ å‡½æ•°ä¸­è°ƒç”¨APIï¼Ÿâ€ä½ å¯èƒ½ä¼šé—®ã€‚å¥½å§ï¼Œå› ä¸ºReactè¯´æˆ‘ä»¬ç”¨äºæ¸²æŸ“çš„ä¸œè¥¿éƒ½åœ¨ â€œçŠ¶æ€ â€œä¸­ï¼Œåœ¨æˆ‘ä»¬çš„ç»„ä»¶è¢«åŠ è½½åˆ°é¡µé¢ä¸Šä¹‹å‰ï¼Œæˆ‘ä»¬ä¸èƒ½ä¹±ç”¨çŠ¶æ€ã€‚å¦‚æœæˆ‘ä»¬è¯•å›¾åœ¨ç»„ä»¶åŠ è½½ä¹‹å‰æ›´æ–°çŠ¶æ€ï¼Œå°±ä¼šå‡ºç°é”™è¯¯ã€‚&emsp;&emsp;ä¸‹é¢æ˜¯ä¸€ä¸ªå…¸å‹çš„åŸºäºç±»çš„ç»„ä»¶çš„æƒ…å†µ,è¿™æ˜¯ä¸€ä¸ªå°ç²¾çµçš„ä¾‹å­ï¼ˆåé¢ä¼šç”¨hooksæ”¹å†™ï¼‰ã€‚ 1234567891011121314151617181920212223242526272829303132class Pokemon extends React.Component &#123; constructor() &#123; super() this.state = null &#125; componentDidMount() &#123; fetch('https://pokeapi.co/api/v2/pokemon/gengar/') .then(res =&gt; res.json()) .then(res =&gt; &#123; this.setState(res) &#125;) &#125; render() &#123; const pokemon = this.state const style = &#123;textTransform: 'capitalize'&#125; return ( &lt;div&gt; &#123; pokemon ? &lt;&gt; &lt;img src=&#123;pokemon.sprites.front_default&#125; alt=&#123;'Image of ' + pokemon.name&#125;/&gt; &lt;p style=&#123;style&#125;&gt;Name: &#123;pokemon.name&#125;&lt;/p&gt; &lt;p style=&#123;style&#125;&gt; Type: &#123;pokemon.types.map(x =&gt; x.type.name).join(', ')&#125; &lt;/p&gt; &lt;/&gt; : 'Loading...' &#125; &lt;/div&gt; ) &#125;&#125; &emsp;&emsp;è¿™æ ·åšå¾ˆå¥½ï¼Œé™¤äº†ä¸è¿™æ ·åšçš„æ—¶å€™ã€‚å½“æˆ‘ä»¬æƒ³å†æ¬¡ç‚¹å‡»APIæ¥æŠ“å–ä¸åŒçš„å°ç²¾çµæ—¶ä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿå¦‚æœè¿™ä¸ªç»„ä»¶è¢«è¿æ¥åˆ°æˆ‘ä»¬çš„åº”ç”¨ç¨‹åºä¸­çš„æŸä¸ªè·¯ç”±ä¸Šï¼Œè€Œè¿™ä¸ªè·¯ç”±å‘ç”Ÿäº†å˜åŒ–ï¼Œä½†è¿™ä¸ªç»„ä»¶å¹¶æ²¡æœ‰å¸è½½/é‡è£…ã€‚å¦‚æœç”¨æˆ·è¿›å…¥äº†ä¸åŒçš„é¡µé¢ï¼Œè€Œç»„ä»¶åœ¨APIè°ƒç”¨ç»“æŸå‰å°±å¸è½½äº†æ€ä¹ˆåŠï¼Ÿ&emsp;&emsp;ç­”æ¡ˆæ˜¯å¢åŠ æ›´å¤šçš„ç”Ÿå‘½å‘¨æœŸæ–¹æ³•ï¼Œå¦‚componentDidUpdateå’ŒcomponentWillUnmountï¼Œä»¥æ‰§è¡Œæ›´å¤šçš„APIè°ƒç”¨ï¼Œé˜²æ­¢å¥‡æ€ªçš„å¸è½½é”™è¯¯ã€‚æ‰€ä»¥æˆ‘ä»¬æ·»åŠ äº†è¿™äº›ç”Ÿå‘½å‘¨æœŸæ–¹æ³•æ¥å¤„ç†æˆ‘ä»¬æ‰€æœ‰çš„è¾¹ç¼˜æƒ…å†µã€‚å½“æˆ‘ä»¬å®Œæˆåï¼Œæˆ‘ä»¬å‘ç°æˆ‘ä»¬çš„å¤§éƒ¨åˆ†ç»„ä»¶éƒ½æ˜¯ç”±ç”Ÿå‘½å‘¨æœŸä»£ç ç»„æˆçš„ã€‚ ç„¶åæ¥è¯•ä¸€ä¸‹Hooks&emsp;&emsp;Reactå›¢é˜Ÿæ„è¯†åˆ°ï¼Œç±»çš„APIæœ‰ç‚¹ç¬¨é‡ï¼Œéš¾ä»¥æ¨ç†ã€‚äººä»¬æ­£åœ¨åˆ¶ä½œç”Ÿå‘½å‘¨æœŸæµç¨‹å›¾ï¼Œè¯•å›¾äº†è§£Reactçš„å†…éƒ¨è¿ä½œâ€¦â€¦è¿™æ˜¯ä¸€ä¸ªæ··ä¹±ã€‚&emsp;&emsp;å› æ­¤ï¼Œåœ¨2018å¹´10æœˆçš„ReactConfä¸Šï¼Œåœ¨Sophie Alpertæ¦‚è¿°äº†ç±»çš„ä½¿ç”¨æœ‰å¤šä¹ˆç³Ÿç³•ä¹‹åï¼ŒDan Abramovä¸Šå°ä»‹ç»äº†é’©å­ï¼ˆä½ å¯ä»¥åœ¨è¿™é‡Œè§‚çœ‹è§†é¢‘ï¼‰ã€‚&emsp;&emsp;é’©å­åœ¨åŠŸèƒ½ç»„ä»¶ä¸­å¼•å…¥äº†çŠ¶æ€æ€§ï¼Œä»¥åŠå¤„ç†å‰¯ä½œç”¨çš„æ–°æ–¹æ³•ã€‚é’©å­ä½¿Reactçš„ä»£ç æ›´å®¹æ˜“é‡å¤ä½¿ç”¨ï¼Œè€Œä¸”ä»£ç é‡æ›´å°‘â€“è¿™æ˜¯ä¸€ä¸ªå·¨å¤§çš„èƒœåˆ©ï¼ä½†æ˜¯æœ‰ä¸€ä¸ªå°é—®é¢˜ã€‚&emsp;&emsp;é™¤äº†ä¸€ä¸ªå°é—®é¢˜ã€‚æ¯æ¬¡æ¸²æŸ“ï¼Œæ•´ä¸ªç»„ä»¶/åŠŸèƒ½éƒ½è¦é‡æ–°è¿è¡Œã€‚&emsp;&emsp;è®©æˆ‘ä»¬çœ‹ä¸€ä¸ªåŸºäºHookså¼€å‘çš„ä¾‹å­ï¼š 1234567891011function RerenderExample() &#123; const [bool, setBool] = React.useState(false) const randomNum = Math.random() return ( &lt;div&gt; &lt;p&gt;This number will be different each time you click the button:&lt;/p&gt; &lt;p&gt;&#123;randomNum&#125;&lt;/p&gt; &lt;button onClick=&#123;() =&gt; setBool(!bool)&#125;&gt;Trigger a render&lt;/button&gt; &lt;/div&gt; )&#125; &emsp;&emsp;æˆ‘ä»¬åœ¨æ¸²æŸ“çš„JSXä¸­ç”šè‡³æ²¡æœ‰ä½¿ç”¨boolï¼Œä½†æ¯æ¬¡çŠ¶æ€æ”¹å˜æ—¶ï¼Œæ•´ä¸ªå‡½æ•°éƒ½ä¼šè¿è¡Œã€‚æ¯æ¬¡æ¸²æŸ“ï¼Œç»„ä»¶å†…çš„æ‰€æœ‰ä¸œè¥¿éƒ½ä¼šé‡æ–°è¿è¡Œï¼šå‡½æ•°å®šä¹‰ã€å˜é‡åˆ›å»º/åˆ†é…ç­‰ç­‰ã€‚&emsp;&emsp;å¦‚æœä½ åœ¨æƒ³ â€œå¦‚æœæˆ‘å¿…é¡»åœ¨ç»„ä»¶ä¸­åšä¸€äº›è®¡ç®—é‡å¤§çš„äº‹æƒ…æ€ä¹ˆåŠï¼Ÿè¿™ä¸å¯èƒ½æ˜¯é«˜æ€§èƒ½çš„â€¦â€¦â€ï¼Œè¿™æ˜¯ä¸ªæ•é”çš„è§‚å¯Ÿã€‚åœ¨ä¸€ä¸ªåŠŸèƒ½æ€§ç»„ä»¶ä¸­è¿›è¡Œæ˜‚è´µçš„æ“ä½œæ˜¯ä¸å¯èƒ½æœ‰æ€§èƒ½çš„ã€‚äº‹å®ä¸Šï¼ŒuseCallbackå’ŒuseMemoçš„å­˜åœ¨æ­£æ˜¯ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜è€Œè®¾ç½®çš„é¿éš¾æ‰€ã€‚Kent C Doddsåœ¨è¿™é‡Œå¯¹è¿™äº›é—®é¢˜æœ‰ä¸€ä¸ªæŒ‘æˆ˜æ€§çš„è§£è¯»ï¼Œä½†æ€»ç»“èµ·æ¥ï¼Œæ ¹æ®Kentçš„è¯´æ³•ï¼Œåœ¨ä½ çœ‹åˆ°æ€§èƒ½å½±å“ä¹‹å‰ï¼Œä½ ä¸åº”è¯¥æ‹…å¿ƒé‡è¯»çš„é—®é¢˜ã€‚ æ³¨æ„ï¼šå¦‚æœä½ å¯¹é’©å­ä¸ç†Ÿæ‚‰ï¼Œè¯·æŠŠè¿™ç¯‡æ–‡ç« æ”¶è—èµ·æ¥ï¼Œç­‰ä½ å‡†å¤‡å¥½äº†å†æ¥çœ‹çœ‹ã€‚é™¤éä½ å¿…é¡»è¦æ‹…å¿ƒè®°å¿†åŒ–çš„é—®é¢˜&emsp;&emsp;åƒuseStateè¿™æ ·çš„é’©å­é‡‡ç”¨äº†ä¸€äº›å†…åœ¨çš„é­”æ³•æ¥é¿å…é‡ç°çš„é—®é¢˜ã€‚è¿™å¾ˆå¥½ï¼Œè€Œä¸”ä½¿ç”¨useStateä¼¼ä¹å¾ˆç®€å•ï¼Œä½†æ˜¯å½“ä½ éœ€è¦åšè®¾ç½®çŠ¶æ€ä»¥å¤–çš„äº‹æƒ…æ—¶ï¼Œæ€ä¹ˆåŠï¼Ÿ&emsp;&emsp;ä½¿ç”¨useEffectã€‚é‚£äº›è®¨åŒçš„ç”Ÿå‘½å‘¨æœŸæ–¹æ³•æ²¡æœ‰äº†ï¼Œä¸‡å²ï¼ç„¶è€Œï¼Œè¿™ä¸ªé’©å­ä¹Ÿæœ‰å®ƒè‡ªå·±çš„å¥‡æ€ªä¹‹å¤„ã€‚é¦–å…ˆè®©æˆ‘ä»¬æ¥çœ‹çœ‹è¯­æ³•ã€‚ 12345//accepts two arguments: a function, and dependency arrayuseEffect(() =&gt; &#123; // do stuff return () =&gt; &#123;&#125; //function to undo our stuff from above when component unmounts&#125;, []) //dependency array of things to watch for changes on &emsp;&emsp;æ‰€ä»¥ä½ ç»™useEffectä¼ é€’ä¸€ä¸ªè¦è¿è¡Œçš„å›è°ƒå‡½æ•°ï¼Œå…¶ä¸­åŒ…å«ä½ çš„å‰¯ä½œç”¨ï¼Œç„¶åæ˜¯ä¸€ä¸ªè¦è§‚å¯Ÿçš„äº‹ç‰©çš„æ•°ç»„ã€‚å¦‚æœè¢«ç›‘è§†çš„äº‹ç‰©å‘ç”Ÿå˜åŒ–ï¼ŒuseEffectå°†é‡æ–°è¿è¡Œæˆ‘ä»¬çš„å›è°ƒå‡½æ•°ã€‚å¦‚æœä½ éœ€è¦åœ¨å¸è½½æ—¶æ¸…ç†ä½ çš„å‰¯ä½œç”¨ï¼Œè¿”å›ä¸€ä¸ªåŒ…å«è¯¥ä»£ç çš„å‡½æ•°ã€‚&emsp;&emsp;è®©æˆ‘ä»¬çœ‹çœ‹æˆ‘ä»¬çš„å°ç²¾çµçš„ä¾‹å­ï¼Œç”¨é’©å­å’ŒuseEffectã€‚ 1234567891011121314151617181920212223242526function Pokemon() &#123; const [pokemon, setPokemon] = React.useState(null) React.useEffect(() =&gt; &#123; fetch('https://pokeapi.co/api/v2/pokemon/gengar/') .then(res =&gt; res.json()) .then(res =&gt; &#123; setPokemon(res) &#125;) &#125;, []) // empty array means nothing to watch, so run once and no more const style = &#123;textTransform: 'capitalize'&#125; return ( &lt;div&gt; &#123; pokemon ? &lt;&gt; &lt;img src=&#123;pokemon.sprites.front_default&#125; alt=&#123;'Image of ' + pokemon.name&#125;/&gt; &lt;p style=&#123;style&#125;&gt;Name: &#123;pokemon.name&#125;&lt;/p&gt; &lt;p style=&#123;style&#125;&gt; Type: &#123;pokemon.types.map(x =&gt; x.type.name).join(', ')&#125; &lt;/p&gt; &lt;/&gt; : 'Loading...' &#125; &lt;/div&gt; )&#125; &emsp;&emsp;å¦‚æœä½ ç›¯ç€é‚£ä¸ªç©ºçš„ä¾èµ–æ€§æ•°ç»„ï¼Œä½ å·²ç»æ³¨æ„åˆ°äº†ç¬¬ä¸€ä¸ªuseEffectçš„æ€ªç™–ã€‚é€šè¿‡ä¼ é€’ä¸€ä¸ªç©ºæ•°ç»„ï¼Œæˆ‘ä»¬åœ¨è¯´ â€œåªåšè¿™ä¸€æ¬¡â€ã€‚Reactä¸‡ç¥æ®¿å‘Šè¯‰æˆ‘ä»¬ï¼Œåœ¨æå°‘æ•°æƒ…å†µä¸‹è¿™æ˜¯å¯ä»¥çš„ï¼Œä½†å¤§å¤šæ•°æ—¶å€™ä½ éƒ½å¸Œæœ›é‡Œé¢æœ‰ä¸œè¥¿ã€‚åŸå› æ˜¯ï¼Œé€šå¸¸ä½ æƒ³ä¸ä½ çš„ä»£ç ä¸­çš„ä¸œè¥¿åŒæ­¥ï¼Œè€Œä¸æ˜¯åªæ‰§è¡Œä¸€æ¬¡æ•ˆæœã€‚ä¾‹å¦‚ï¼Œå¦‚æœæˆ‘ä»¬çš„å°ç²¾çµç»„ä»¶ä¾èµ–äºä¸€ä¸ªè·¯ç”±å‚æ•°æˆ–é“å…·ï¼Œä»»ä½•å¯ä»¥è¯´ â€œå»è·å¾—ä¸€ä¸ªæ–°çš„å°ç²¾çµ â€œè€Œä¸éœ€è¦æŒ‚è½½/å¸è½½çš„ä¸œè¥¿å‘¢ï¼Ÿ&emsp;&emsp;æ¯”æ–¹è¯´ï¼Œæˆ‘ä»¬çš„ç»„ä»¶ä¾èµ–äºä¸€ä¸ªé“å…·pokemonToGetï¼Œå®ƒæ˜¯ä¸€ä¸ªå‚æ•°ï¼Œå‘Šè¯‰å®ƒè¦ä»APIä¸­è·å¾—å“ªäº›å°ç²¾çµã€‚è®©æˆ‘ä»¬ä¹Ÿä¸ºæµ‹è¯•ç›®çš„æ·»åŠ ä¸€ä¸ªå°å°çš„è¡¨å•ã€‚ 123456789101112131415161718192021222324252627282930313233343536373839404142434445function Pokemon(&#123;pokemonToGet&#125;) &#123; const [pokemon, setPokemon] = React.useState(null) React.useEffect(() =&gt; &#123; fetch(`https://pokeapi.co/api/v2/pokemon/$&#123;pokemonToGet&#125;/`) .then(res =&gt; res.json()) .then(res =&gt; &#123; setPokemon(res) &#125;) &#125;, [pokemonToGet]) // get a new pokemon with the pokemonToGet prop changes const style = &#123;textTransform: 'capitalize'&#125; return ( &lt;div&gt; &#123; pokemon ? &lt;&gt; &lt;img src=&#123;pokemon.sprites.front_default&#125; alt=&#123;'Image of ' + pokemon.name&#125;/&gt; &lt;p style=&#123;style&#125;&gt;Name: &#123;pokemon.name&#125;&lt;/p&gt; &lt;p style=&#123;style&#125;&gt; Type: &#123;pokemon.types.map(x =&gt; x.type.name).join(', ')&#125; &lt;/p&gt; &lt;/&gt; : 'Loading...' &#125; &lt;/div&gt; )&#125;function PokemonForm() &#123; const [inputValue, setInputValue] = React.useState(\"rowlet\") const [pokemonToGet, setPokemonToGet] = React.useState(\"gengar\") function getPokemon() &#123; setPokemonToGet(inputValue.trim().toLowerCase()) setInputValue(\"\") &#125; return ( &lt;div&gt; &lt;input onChange=&#123;(e) =&gt; setInputValue(e.target.value)&#125; value=&#123;inputValue&#125; type=\"text\"/&gt; &lt;button onClick=&#123;getPokemon&#125;&gt; Get Pokemon &lt;/button&gt; &lt;Pokemon pokemonToGet=&#123;pokemonToGet&#125; /&gt; &lt;/div&gt; )&#125;render(&lt;PokemonForm /&gt;) &emsp;&emsp;å¾ˆå¥½ï¼Œç°åœ¨æˆ‘ä»¬çš„ç»„ä»¶æ ¹æ®æˆ‘ä»¬çš„é“å…·å˜åŒ–è·å–äº†ä¸€ä¸ªæ–°çš„å°ç²¾çµã€‚å¦‚æœä½¿ç”¨ç±»ï¼Œæˆ‘ä»¬å°±å¿…é¡»ä½¿ç”¨componentDidUpdateä¹‹ç±»çš„ä¸œè¥¿æ¥è¾¾åˆ°ç±»ä¼¼çš„æ•ˆæœã€‚&emsp;&emsp;Ryan Florenceåœ¨æ¨ç‰¹ä¸Šå¯¹useEffectçš„ç”¨æ³•åšäº†å¾ˆå¥½çš„æ€»ç»“ã€‚ The question is not â€œwhen does this effect runâ€ the question is â€œwith which state does this effect synchronize withâ€ useEffect(fn) // all state useEffect(fn, []) // no state useEffect(fn, [these, states]) &emsp;&emsp;ä»–æåˆ°çš„ â€œæ‰€æœ‰çŠ¶æ€ â€œçš„æƒ…å†µï¼Œå³ä½ æ²¡æœ‰ä¼ å…¥ä»»ä½•ä¾èµ–å…³ç³»çš„æƒ…å†µæ˜¯ä¸€ä¸ªå¥‡æ€ªçš„æƒ…å†µã€‚æˆ‘ä¸ªäººä»æœªå‘ç°å®ƒçš„ç”¨é€”ã€‚æˆ‘ä»¬çŸ¥é“æ•´ä¸ªç»„ä»¶åœ¨æ¯æ¬¡æ¸²æŸ“æ—¶éƒ½ä¼šè¿è¡Œï¼Œæ‰€ä»¥æˆ‘æƒ³çŸ¥é“æ˜¯å¦æœ‰ä¸€äº›å¥‡æ€ªçš„è¾¹ç¼˜æƒ…å†µéœ€è¦ä½ ä½¿ç”¨useEffect(fn)è€Œä¸ä½¿ç”¨ä»»ä½•ä¾èµ–é˜µåˆ—ã€‚åœ¨ä»»ä½•æƒ…å†µä¸‹ï¼Œå¤§å¤šæ•°æ—¶å€™ä½ éƒ½ä¼šç”¨è¿™ä¸ªæ–¹æ³•ï¼šuseEffect(fn, [these, states])ã€‚ UseEffectå’ŒPrevious State: äº‹æƒ…è´¥éœ²çš„åœ°æ–¹ã€‚&emsp;&emsp;åˆ°ç›®å‰ä¸ºæ­¢ï¼ŒuseEffectçš„å¿ƒç†æ¨¡å‹ä¼¼ä¹å¾ˆç®€å•ï¼šå°†å®ƒä¸ä½ é€‰æ‹©çš„æŸäº›çŠ¶æ€å˜åŒ–åŒæ­¥ã€‚é—®é¢˜æ˜¯ï¼Œå½“ä½ éœ€è¦åœ¨ä¸€ä¸ªæ•ˆæœä¸­å¼•ç”¨è¯¥çŠ¶æ€ï¼Œè€Œä¸ä»…ä»…æ˜¯çŸ¥é“å®ƒæ˜¯å¦å‘ç”Ÿäº†å˜åŒ–ã€‚&emsp;&emsp;åœ¨useEffectä¸­ï¼Œä½ æ— æ³•è·å¾—å¯¹å½“å‰çŠ¶æ€çš„è®¿é—®ã€‚&emsp;&emsp;åœ¨æˆ‘ä»¬çš„APIè°ƒç”¨ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬æ²¡æœ‰çœ‹åˆ°è¿™ä¸€ç‚¹ï¼Œå› ä¸ºæˆ‘ä»¬åªæ˜¯è¦†ç›–äº†ä¹‹å‰çš„çŠ¶æ€ã€‚&emsp;&emsp;è®©æˆ‘ä»¬çœ‹ä¸€ä¸ªç®€å•çš„ä¾‹å­: 12345678910111213function Timer() &#123; const [count, setCount] = React.useState(0); React.useEffect(() =&gt; &#123; const intervalId = setInterval(() =&gt; &#123; setCount(count + 1) &#125;, 1000) return () =&gt; clearInterval(intervalId) &#125;, []) return ( &lt;div&gt;The count is: &#123;count&#125;&lt;/div&gt; )&#125; &emsp;&emsp;ä¼¼ä¹æˆ‘ä»¬åšäº†æ‰€æœ‰æ­£ç¡®çš„äº‹æƒ…ï¼ˆç”šè‡³æ¸…ç†äº†å¸è½½æ—¶çš„å‰¯ä½œç”¨ï¼‰ï¼Œä½†æˆ‘ä»¬çš„è®¡æ•°å™¨æ²¡æœ‰é€’å¢ã€‚è¿™æ˜¯ä¸€ä¸ªé—®é¢˜å—ï¼Ÿæˆ‘ä»¬æ˜¯å¦æ— æ³•è®¿é—®setIntervalæ‰€å±çš„çª—å£å¯¹è±¡ï¼Ÿ&emsp;&emsp;ä¸æ˜¯ï¼Œä¹Ÿä¸æ˜¯ã€‚å¦‚æœä½ æŠŠconsole.logæ·»åŠ åˆ°é‚£ä¸ªé—´éš”ä¸­ï¼Œä½ ä¼šçœ‹åˆ°å®ƒæ¯ç§’é’Ÿéƒ½åœ¨è·³åŠ¨ã€‚&emsp;&emsp;æˆ‘å¯ä»¥è¯æ˜ç»™ä½ çœ‹: 12345678910111213141516171819function Timer() &#123; const [count, setCount] = React.useState(0) const [randomNum, setRandomNum] = React.useState(0) React.useEffect(() =&gt; &#123; const intervalId = setInterval(() =&gt; &#123; setCount(count + 1) setRandomNum(Math.random()) &#125;, 1000) return () =&gt; clearInterval(intervalId) &#125;, []) return ( &lt;div&gt; &lt;p&gt;The count is: &#123;count&#125;&lt;/p&gt; &lt;p&gt;RandomNum is &#123;randomNum&#125;&lt;/p&gt; &lt;/div&gt; )&#125; &emsp;&emsp;æ³¨æ„ï¼Œæˆ‘ä»¬æ¯ç§’é’Ÿéƒ½ä¼šå¾—åˆ°ä¸€ä¸ªæ–°çš„éšæœºæ•°ã€‚æˆ‘ä»¬çš„æ—¶é—´é—´éš”ä»£ç æ˜¯å¥½çš„ã€‚&emsp;&emsp;æˆ‘ä»¬èƒ½å¤Ÿè®¾ç½®æ–°çš„çŠ¶æ€ï¼Œä½†æ— æ³•è®¿é—®å½“å‰çŠ¶æ€ã€‚&emsp;&emsp;è¿™å°±æ˜¯ä¸€ä¸ª â€œé™ˆæ—§çš„é—­åŒ…â€ã€‚æˆ‘ä¸ä¼šå»è®¨è®ºé—­åŒ…ï¼Œä½†åªéœ€çŸ¥é“ï¼Œç”±äºReact/hooksçš„å®ç°ï¼Œåœ¨æˆ‘ä»¬çš„é—´éš”å‡½æ•°ä¸­ï¼Œcountå˜é‡æ€»æ˜¯ä¼šæ˜¯0ã€‚è¿™æ˜¯ä¸€ä¸ªæ—§çš„å‚è€ƒã€‚&emsp;&emsp;äº‹å®è¯æ˜ï¼Œåƒä¸Šé¢è¿™æ ·çš„ç®€å•ä¾‹å­æœ‰ä¸€ä¸ªè§£å†³æ–¹æ¡ˆï¼Œæ­£å¦‚John Tuckeræ‰€æŒ‡å‡ºçš„ï¼ˆè°¢è°¢Johnï¼ï¼‰ã€‚å’ŒåŸºäºç±»çš„ç»„ä»¶ä¸­çš„setStateä¸€æ ·ï¼ŒuseStateä¹Ÿå¯ä»¥æ¥å—ä¸€ä¸ªå›è°ƒå‡½æ•°ï¼Œæ¥æ”¶ä¹‹å‰çš„çŠ¶æ€ä½œä¸ºä¸€ä¸ªå‚æ•°ã€‚Reactæ–‡æ¡£ä¹Ÿæ³¨æ„åˆ°äº†è¿™ä¸€ç‚¹ã€‚&emsp;&emsp;ä¸‹é¢æ˜¯ä¸€ä¸ªå¿«é€Ÿä¿®å¤çš„ä¾‹å­ã€‚ 123456789101112131415function Timer() &#123; const [count, setCount] = React.useState(0); React.useEffect(() =&gt; &#123; const intervalId = setInterval(() =&gt; &#123; //let's pass a function instead //the argument is the current state setCount(count =&gt; count + 1) &#125;, 1000) return () =&gt; clearInterval(intervalId) &#125;, []) return ( &lt;div&gt;The count is: &#123;count&#125;&lt;/div&gt; )&#125; &emsp;&emsp;ä¸è¿‡ï¼Œè¿™ä»ç„¶ä¸èƒ½è§£å†³æˆ‘ä»¬æ‰€æœ‰çš„é—®é¢˜ã€‚å¦‚æœä½ éœ€è¦åœ¨useEffectä¸­è®¿é—®æœ€æ–°çš„çŠ¶æ€ï¼Œä½†ä¸æ›´æ–°å®ƒï¼Œä½ å°†ä¸å¾—ä¸å¼€å§‹ç”¨setStateå›è°ƒæ¥åŒ…è£…ä½ çš„useEffectä»£ç ï¼Œç„¶ååœ¨æœ€åè¿”å›æœªæ”¹å˜çš„çŠ¶æ€ã€‚è¿™å¾ˆå¿«å°±ä¼šå˜æˆä¸€ä¸ªç»å¯¹çš„æ··ä¹±ï¼Œç‰¹åˆ«æ˜¯å½“ä½ åœ¨å¤„ç†å¤šä¸ªçŠ¶æ€å€¼çš„æ—¶å€™ã€‚&emsp;&emsp;å¦ä¸€ä¸ªå¯èƒ½çš„è§£å†³æ–¹æ¡ˆæ˜¯åªä½¿ç”¨useReducerï¼Œå› ä¸ºå®ƒå¯ä»¥æ¥æ”¶ä¹‹å‰çš„çŠ¶æ€ï¼Œä½†æ˜¯ç”¨å‰¯ä½œç”¨å¡«å……ä½ çš„reducerä¹Ÿæ˜¾å¾—éå¸¸æ··ä¹±ï¼Œè€Œä¸”æˆ‘ä¸å»ºè®®ä»»ä½•äººå®Œå…¨åœæ­¢ä½¿ç”¨useStateã€‚&emsp;&emsp;æ— è®ºå¦‚ä½•ï¼Œåœ¨å†™é’©å­çš„æ—¶å€™ï¼Œæˆ‘å·²ç»é™·å…¥äº†é™ˆæ—§çš„é—­åŒ…é™·é˜±å¾ˆå¤šå¾ˆå¤šæ¬¡ã€‚æˆ‘ç”šè‡³ä¸çŸ¥é“å®ƒæœ‰ä¸ªåå­—ï¼Œç›´åˆ°æˆ‘åœ¨SvelteèƒŒåçš„äººRich Harrisçš„æ¼”è®²ä¸­çœ‹åˆ°å®ƒ&emsp;&emsp;æ˜¾ç„¶ï¼Œæˆ‘ä¹Ÿä¸æ˜¯å”¯ä¸€ä¸€ä¸ªåœ¨é’©å­ä¸Šè¢«å®ƒä»¬ç»Šå€’çš„äººã€‚&emsp;&emsp; Reactç”šè‡³åœ¨ä»–ä»¬çš„æ–‡æ¡£ä¸­æåˆ°äº†è¿™ä¸€ç‚¹ã€‚ â€œAny function inside a component, including event handlers and effects, â€œseesâ€ the props and state from the render it was created in.â€ è¯‘ï¼šç»„ä»¶å†…çš„ä»»ä½•åŠŸèƒ½ï¼ŒåŒ…æ‹¬äº‹ä»¶å¤„ç†ç¨‹åºå’Œæ•ˆæœï¼Œéƒ½èƒ½ â€œçœ‹åˆ° â€œå®ƒæ‰€åˆ›å»ºçš„æ¸²æŸ“ä¸­çš„é“å…·å’ŒçŠ¶æ€ã€‚&emsp;&emsp;æˆ‘ä¹‹å‰è¯»è¿‡è¿™ä¸ªï¼Œåœ¨çœŸæ­£æ·±å…¥äº†è§£è¿™ä¸ªé—®é¢˜ä¹‹å‰ï¼Œæˆ‘è§‰å¾—æ²¡ä»€ä¹ˆæ„ä¹‰ã€‚æˆ‘æƒ³è±¡è¿™å¯èƒ½æ˜¯Reactçš„ä¸€ä¸ªä¸å¥½çš„ç‚¹ï¼Œæ‰€ä»¥ä¹Ÿè®¸ä»–ä»¬ä¸å¸Œæœ›å¤ªå¤§å£°åœ°å«å‡ºæ¥ã€‚&emsp;&emsp;ç„¶è€Œï¼ŒDan Abramovåœ¨ä»–çš„åšå®¢ä¸­æ›´å¥½åœ°æè¿°äº†è¿™ä¸ªé—®é¢˜ï¼Œç”šè‡³æä¾›äº†ä¸€ä¸ªè§£å†³æ–¹æ¡ˆã€‚â€œEffects always â€œseeâ€ props and state from the render they were defined in. That helps prevent bugs but in some cases can be annoying. For those cases, you can explicitly maintain some value in a mutable ref.â€ è¯‘ï¼šæ•ˆæœæ€»æ˜¯ â€œçœ‹åˆ° â€œå®ƒä»¬æ‰€å®šä¹‰çš„æ¸²æŸ“ä¸­çš„é“å…·å’ŒçŠ¶æ€ã€‚è¿™æœ‰åŠ©äºé˜²æ­¢bugï¼Œä½†åœ¨æŸäº›æƒ…å†µä¸‹ä¼šå¾ˆçƒ¦äººã€‚å¯¹äºè¿™äº›æƒ…å†µï¼Œä½ å¯ä»¥æ˜ç¡®åœ°åœ¨ä¸€ä¸ªå¯å˜çš„ä¸Šä¸‹æ–‡ä¸­ä¿å­˜ä¸€äº›å€¼ã€‚ &emsp;&emsp;è¿™å¾ˆæœ‰å¸®åŠ©ï¼Œå› ä¸ºå®ƒä»¥useRefçš„å½¢å¼æä¾›äº†ä¸€ä¸ªè§£å†³æ–¹æ¡ˆï¼ˆæ„Ÿè°¢Danï¼ï¼‰ï¼Œä½†å®ƒè®©æˆ‘å¯¹å¦‚ä½•å¸®åŠ©é¿å…è¿™ä¸ªé—®é¢˜ä¸€æ— æ‰€çŸ¥ï¼ˆä¸»è¦æ˜¯å› ä¸ºæˆ‘ä¸äº†è§£useRefï¼‰ã€‚ ä»€ä¹ˆæ˜¯â€œrefâ€ï¼Œä½ ä¼šæ€ä¹ˆä½¿ç”¨å®ƒ&emsp;&emsp;ä¼ ç»Ÿä¸Šï¼Œå¼•ç”¨çš„ç›®çš„æ˜¯è®©ä½ ç›´æ¥è®¿é—®ä¸€ä¸ªhtmlå…ƒç´ ã€‚ä¾‹å¦‚ï¼Œå‡è®¾ä½ éœ€è¦å…³æ³¨ä¸€ä¸ªè¾“å…¥å­—æ®µã€‚ä½ å¿…é¡»è·³å‡ºReactï¼Œä½¿ç”¨å¸¸è§„çš„JavaScriptæ¥è°ƒç”¨.focus()ã€‚é’©å­å®é™…ä¸Šè®©è¿™ä¸€åˆ‡å˜å¾—ç›¸å½“ç®€å•ã€‚ 1234567891011function InputField() &#123; const inputRef = React.useRef() return ( &lt;div&gt; &lt;input type=\"text\" ref=&#123;inputRef&#125; /&gt; &lt;button onClick=&#123;() =&gt; inputRef.current.focus()&#125;&gt; Click to Focus the input &lt;/button&gt; &lt;/div&gt; )&#125; &emsp;&emsp;å¾ˆå¥½! å½“æˆ‘ä»¬éœ€è¦çš„æ—¶å€™ï¼ŒRefsæ˜¯è®¿é—®æœ¬åœ°DOM APIsçš„ä¸€ä¸ªç®€å•çš„é€ƒç”Ÿé€šé“ã€‚&emsp;&emsp;â€¦ä½†è¿™å¦‚ä½•å¸®åŠ©æˆ‘ä»¬è§£å†³æˆ‘ä»¬é™ˆæ—§çš„å…³é—­è®¡æ•°å™¨çš„ä¾‹å­å‘¢ï¼Ÿ ä½¿ç”¨â€œRefsâ€æ¥é¿å…é™ˆæ—§çš„é—­åŒ…&emsp;&emsp;Reactæ–‡æ¡£å°†â€œRefsâ€æ¯”ä½œ â€œå®ä¾‹å˜é‡â€ã€‚æˆ‘ä¸çŸ¥é“é‚£æ˜¯ä»€ä¹ˆæ„æ€ï¼ˆè°¢è°¢ç»´åŸºç™¾ç§‘ï¼‰ï¼Œæ‰€ä»¥æˆ‘è§‰å¾—é‚£æ²¡ä»€ä¹ˆç”¨ã€‚&emsp;&emsp;æˆ‘è®¾æ³•é€šè¿‡è¿™æ ·æ€è€ƒæ¥ç†è§£Refsçš„å«ä¹‰ã€‚&emsp;&emsp;Refså­˜åœ¨äºé‡æ–°æ¸²æŸ“å‘¨æœŸä¹‹å¤–ã€‚&emsp;&emsp;æŠŠRefsçœ‹ä½œæ˜¯ä½ è®¾ç½®åœ¨ä¸€è¾¹çš„ä¸€ä¸ªå˜é‡ã€‚å½“ä½ çš„ç»„ä»¶é‡æ–°è¿è¡Œæ—¶ï¼Œå®ƒä¼šå¾ˆé«˜å…´åœ°è·³è¿‡è¿™ä¸ªåå°„ï¼Œç›´åˆ°ä½ ç”¨.currentè°ƒç”¨å®ƒã€‚&emsp;&emsp;è®©æˆ‘ä»¬çœ‹çœ‹å¯¹æˆ‘ä»¬çš„å®šæ—¶å™¨ä¾‹å­çš„ä¿®æ­£ã€‚ 12345678910111213141516function Timer() &#123; const [count, setCount] = React.useState(0) const countRef = React.useRef(0) React.useEffect(() =&gt; &#123; const intervalId = setInterval(() =&gt; &#123; countRef.current = countRef.current + 1 setCount(countRef.current) &#125;, 1000) return () =&gt; clearInterval(intervalId) &#125;, []) return ( &lt;div&gt;The count is: &#123;count&#125;&lt;/div&gt; )&#125; &emsp;&emsp;å¦‚æœæˆ‘ä»¬æƒ³æŠŠè®¡æ—¶å™¨åœåœ¨æ¯”å¦‚è¯´10çš„ä½ç½®ï¼Œæˆ‘ä»¬å¯ä»¥å¾ˆå®¹æ˜“åœ°ç”¨refsæ¥åšã€‚ 123456789101112131415161718function Timer() &#123; const [count, setCount] = React.useState(0) const countRef = React.useRef(0) React.useEffect(() =&gt; &#123; const intervalId = setInterval(() =&gt; &#123; if (countRef.current === 10) return clearInterval(intervalId) countRef.current = countRef.current + 1 setCount(countRef.current) &#125;, 1000) return () =&gt; clearInterval(intervalId) &#125;, []) return ( &lt;div&gt;The count is: &#123;count&#125;&lt;/div&gt; )&#125; &emsp;&emsp;ä¸ºäº†ä¾¿äºæ¯”è¾ƒï¼Œè¿™é‡Œæ˜¯ä½¿ç”¨setStateå›è°ƒæ–¹æ³•çš„æ›¿ä»£æ–¹æ¡ˆã€‚ 1234567891011121314151617181920function Timer() &#123; const [count, setCount] = React.useState(0) React.useEffect(() =&gt; &#123; const intervalId = setInterval(() =&gt; &#123; setCount(count =&gt; &#123; if (count === 10) &#123; clearInterval(intervalId) return count &#125; else return count + 1 &#125;) &#125;, 1000) return () =&gt; clearInterval(intervalId) &#125;, []) return ( &lt;div&gt;The count is: &#123;count&#125;&lt;/div&gt; )&#125; &emsp;&emsp;å¯ä»¥çœ‹åˆ°è¿™å¾ˆå¿«å°±ä¼šæ¥è¿‘å›è°ƒåœ°ç‹±ï¼Œæ‰€ä»¥å¦‚æœä½ åœ¨åšæ›´å¤æ‚çš„äº‹æƒ…ï¼Œæˆ‘ä¼šæé†’ä½ ä¸è¦ä½¿ç”¨å›è°ƒæ–¹æ³•ã€‚ State Versus Refs&emsp;&emsp;æ˜¯å¦æœ‰å¯èƒ½å®Œå…¨æŠ›å¼ƒçŠ¶æ€è€Œåªä½¿ç”¨refsï¼Ÿ&emsp;&emsp;ä½ å¯èƒ½å€¾å‘äºè®¤ä¸ºä½ å¯ä»¥ç”¨ refs æ¥ä»£æ›¿ä½ çš„ç»„ä»¶çš„çŠ¶æ€ï¼Œä»è€Œé¿å¼€æ‰€æœ‰è¿™äº›å¥‡æ€ªçš„è¡Œä¸ºã€‚&emsp;&emsp;ä½ ä¸èƒ½è¿™æ ·åšã€‚refsä¸æ˜¯ååº”æ€§çš„ã€‚å½“ä½ æ”¹å˜ä¸€ä¸ª ref æ—¶ï¼Œå®ƒä¸ä¼šå¯¼è‡´é‡æ–°æ¸²æŸ“ã€‚è®°ä½ï¼Œå®ƒä»¬å­˜åœ¨äºé‡æ–°æ¸²æŸ“å‘¨æœŸä¹‹å¤–ã€‚&emsp;&emsp;ä»¥ä¸‹æ˜¯ä¸å¯èƒ½çš„: 123456789101112131415function Timer() &#123; const count = React.useRef(0) React.useEffect(() =&gt; &#123; const intervalId = setInterval(() =&gt; &#123; count.current = count.current + 1 //console.log('Ref example count: ' + count.current) &#125;, 1000) return () =&gt; clearInterval(intervalId) &#125;, []) return ( &lt;div&gt;The count is: &#123;count.current&#125;&lt;/div&gt; )&#125; &emsp;&emsp;é‚£ä¸ªç»„ä»¶å®é™…ä¸Šæ˜¯åœ¨å†…éƒ¨è¿›è¡Œè®¡æ•°ï¼Œä½†å®ƒå¹¶æ²¡æœ‰å¯¼è‡´HTMLçš„æ›´æ–°ã€‚ä½ éœ€è¦useStateæ¥å®ç°è¿™ä¸€ç‚¹ã€‚å¦‚æœä½ ä¸ç›¸ä¿¡æˆ‘çš„è¯ï¼Œè¯·ç»§ç»­å–æ¶ˆå¯¹console.logçš„æ³¨é‡Šï¼‰ã€‚&emsp;&emsp;è¿™é‡Œæœ‰ä¸€ä¸ªä¾‹å­æ¥è¯æ˜Refsä¸stateã€‚ 12345678910111213141516171819function Counter() &#123; const [count, setCount] = React.useState(0) const countRef = React.useRef(0) return ( &lt;div&gt; &lt;p&gt;State Count: &#123;count&#125;&lt;/p&gt; &lt;button onClick=&#123;() =&gt; setCount(count + 1)&#125;&gt; Increment State Count &lt;/button&gt; &lt;p&gt;Ref Count: &#123;countRef.current&#125;&lt;/p&gt; &lt;button onClick=&#123;() =&gt; countRef.current = countRef.current + 1&#125;&gt; Increment Ref Count &lt;/button&gt; &lt;/div&gt; )&#125;render(&lt;Counter/&gt;) &emsp;&emsp;åœ¨ä½ é€šè¿‡è®¾ç½®çŠ¶æ€è§¦å‘é‡æ–°æ¸²æŸ“ä¹‹å‰ï¼Œä½ ä¸ä¼šçœ‹åˆ°Refè®¡æ•°çš„å˜åŒ–ã€‚ ç¦»åˆ«æ„Ÿè¨€&emsp;&emsp;æˆ‘å–œæ¬¢Reactä¸­çš„é’©å­å’ŒåŠŸèƒ½ç»„ä»¶ï¼Œä½†æˆ‘æ‰€æ¦‚è¿°çš„æ€ªå¼‚ç°è±¡è®©æˆ‘æš‚åœäº†ã€‚æˆ‘ä¸å–œæ¬¢è¢«è¦æ±‚å¯¹Reactçš„å†…éƒ¨å·¥ä½œäº†è§£è¿™ä¹ˆå¤šæ‰èƒ½ä½¿ç”¨å®ƒã€‚æˆ‘è®¤ä¸ºè¿™ç»™å­¦ä¹ Reactçš„äººå¸¦æ¥äº†éšœç¢ï¼Œæˆ‘å¸Œæœ›å°†æ¥Reactå›¢é˜Ÿèƒ½æƒ³å‡ºä¸€äº›æ›´å¥½çš„æ–¹æ³•æ¥å¤„ç†è¿™äº›é—®é¢˜ã€‚ ç¿»è¯‘ç»“æŸå¾ˆæ£’çš„æ–‡ç« ã€‚","categories":[{"name":"react","slug":"react","permalink":"https://feidom-up.github.io/categories/react/"}],"tags":[{"name":"react","slug":"react","permalink":"https://feidom-up.github.io/tags/react/"}]},{"title":"Touchå’ŒMouseäº‹ä»¶","slug":"touchå’Œmouseäº‹ä»¶","date":"2021-06-07T00:28:00.000Z","updated":"2024-08-22T02:26:03.660Z","comments":true,"path":"2021/06/07/touchå’Œmouseäº‹ä»¶/","link":"","permalink":"https://feidom-up.github.io/2021/06/07/touch%E5%92%8Cmouse%E4%BA%8B%E4%BB%B6/","excerpt":"","text":"ä¸€ä¸ªé—®é¢˜å¼•å‘çš„æ€è€ƒç§»åŠ¨ç«¯çš„ä¸€ä¸ªé¡µé¢ï¼ŒçŒœæµ‹å“ˆï¼Œhoveräº‹ä»¶&amp;mouseoveräº‹ä»¶éƒ½è¢«ç›‘å¬æ—¶ï¼Œmouseåº”è¯¥å¤±æ•ˆå§ã€‚å› ä¸ºç§»åŠ¨ç«¯åªæœ‰ç‚¹è§¦ï¼Œæ²¡æœ‰mouseã€‚äº‹å®ï¼šå‡ºç°mouseoverï¼ˆå®šä¹‰äº†è¿™ä¸ªæ—¶å€™çš„æ ·å¼ï¼‰çŠ¶æ€ï¼Œå°±å¾ˆå¥‡æ€ªã€‚ç„¶åï¼Œæœ¬ä»¥ä¸ºmouseå’Œtouchåœ¨æµè§ˆå™¨ä¸­æ˜¯è¿™æ ·çš„ï¼š pcç«¯ï¼šmouseäº‹ä»¶ç”Ÿæ•ˆï¼Œtouchäº‹ä»¶å¤±æ•ˆ ç§»åŠ¨ç«¯ï¼šmouseäº‹ä»¶å¤±æ•ˆï¼Œtouchäº‹ä»¶ç”Ÿæ•ˆ ä½†æ˜¯ï¼Œç»“æœæ˜¯è¿™æ ·çš„ï¼šåŒæ—¶ç›‘å¬äº†mouseå’Œtouchä¸¤ç§äº‹ä»¶ï¼Œåœ¨iosç§»åŠ¨è®¾å¤‡ä¸­çš„safariæµè§ˆå™¨ä¸­ï¼Œç‚¹å‡»è§¦å‘touchäº‹ä»¶ä¹‹åï¼Œå®šä¹‰çš„mouseoveräº‹ä»¶ä¹Ÿè§¦å‘äº†ï¼Œäº§ç”Ÿäº†bugã€‚ ç ”ç©¶å®ƒæ•²é»‘æ¿ï¼š pcç«¯ï¼šonTouchäº‹ä»¶ä¼šè¢«å±è”½ã€‚ ç§»åŠ¨ç«¯ï¼šä¸¤ç§äº‹ä»¶éƒ½ä¼šè¢«è§¦å‘ã€‚ä¸”é¡ºåºæ˜¯è¿™æ ·çš„ï¼š touchstart touchmove touchend mouseover mousemove mousedown mouseup click å¥½å§ï¼Œè¿™æ˜¯è¿™ä¸€åˆ‡å‡ºç°çš„åŸå› ã€‚åœ¨é€‚é…å¤šç§è®¾å¤‡çš„é¡¹ç›®ä¸­ï¼Œæ€ä¹ˆåŒºåˆ†è¿™ä¸¤ç§äº‹ä»¶ï¼Œè®©mouseäº‹ä»¶åœ¨ç§»åŠ¨ç«¯å¤±æ•ˆå‘¢ã€‚ æ–¹æ³•ï¼š è®¾ç½®ä¸€ä¸ªflagï¼Œmouseäº‹ä»¶æ—¶åˆ¤æ–­touchFlagå†³å®šreturnæˆ–è€…æ‰§è¡Œã€‚ åˆ†å¼€å†™ï¼Œåˆ¤æ–­è®¾å¤‡åéœ€è¦mouseçš„å†™mouseï¼Œéœ€è¦touchçš„å†™touchã€‚ æœ€å¥½çš„æ–¹æ³•ï¼špreventDefault() Use preventDefault() inside touch event handlers, so the default mouse-emulation handling doesnâ€™t occur. preventDefault()ä¸“é—¨æŒ‘å‡ºæ¥è¯´ä¸€ä¸‹è¿™ä¸ªï¼špreventDefault()ã€è¯¥æ–¹æ³•å°†é€šçŸ¥ Web æµè§ˆå™¨ä¸è¦æ‰§è¡Œä¸äº‹ä»¶å…³è”çš„é»˜è®¤åŠ¨ä½œï¼ˆå¦‚æœå­˜åœ¨è¿™æ ·çš„åŠ¨ä½œï¼‰ã€‚ã€‘äºæ˜¯ï¼Œåœ¨touchstartæ–¹æ³•ä¸­ä½¿ç”¨e.preventDefault()å»é˜»æ­¢ä¹‹åçš„mouseoveräº‹ä»¶ã€‚æŠ¥é”™äº†ï¼šUnable to preventDefault inside passive event listener due to target being treated as passive. ç¿»è¯‘ï¼š ç”±äºç›®æ ‡è¢«è§†ä¸ºè¢«åŠ¨ï¼Œæ— æ³•åœ¨è¢«åŠ¨äº‹ä»¶ç›‘å¬å™¨å†…é˜²æ­¢ã€‚ passive çš„äº‹ä»¶ç›‘å¬å™¨12345addEventListener(type, listener, &#123; capture: false, passive: true, once: false&#125;) ä¸‰ä¸ªå±æ€§éƒ½æ˜¯å¸ƒå°”ç±»å‹çš„å¼€å…³ã€‚å…¶ä¸­ capture å±æ€§ç­‰ä»·äºä»¥å‰çš„ useCapture å‚æ•°ï¼›once å±æ€§å°±æ˜¯è¡¨æ˜è¯¥ç›‘å¬å™¨æ˜¯ä¸€æ¬¡æ€§çš„ï¼Œæ‰§è¡Œä¸€æ¬¡åå°±è¢«è‡ªåŠ¨ removeEventListener æ‰ï¼Œè¿˜æ²¡æœ‰æµè§ˆå™¨å®ç°å®ƒï¼›passive å±æ€§åœ¨ Firefox å’Œ Chrome å·²ç»å®ç°ã€‚å¾ˆå¤šç§»åŠ¨ç«¯çš„é¡µé¢éƒ½ä¼šç›‘å¬ touchstart ç­‰ touch äº‹ä»¶ï¼Œåƒè¿™æ ·ï¼š 123document.addEventListener(\"touchstart\", function(e)&#123; ... // æµè§ˆå™¨ä¸çŸ¥é“è¿™é‡Œä¼šä¸ä¼šæœ‰ e.preventDefault()&#125;) ç”±äº touchstart äº‹ä»¶å¯¹è±¡çš„ cancelable å±æ€§ä¸º trueï¼Œä¹Ÿå°±æ˜¯è¯´å®ƒçš„é»˜è®¤è¡Œä¸ºå¯ä»¥è¢«ç›‘å¬å™¨é€šè¿‡ preventDefault() æ–¹æ³•é˜»æ­¢ï¼Œé‚£å®ƒçš„é»˜è®¤è¡Œä¸ºæ˜¯ä»€ä¹ˆå‘¢ï¼Œé€šå¸¸æ¥è¯´å°±æ˜¯æ»šåŠ¨å½“å‰é¡µé¢ï¼ˆè¿˜å¯èƒ½æ˜¯ç¼©æ”¾é¡µé¢ï¼‰ï¼Œå¦‚æœå®ƒçš„é»˜è®¤è¡Œä¸ºè¢«é˜»æ­¢äº†ï¼Œé¡µé¢å°±å¿…é¡»é™æ­¢ä¸åŠ¨ã€‚ä½†æµè§ˆå™¨æ— æ³•é¢„å…ˆçŸ¥é“ä¸€ä¸ªç›‘å¬å™¨ä¼šä¸ä¼šè°ƒç”¨ preventDefault()ï¼Œå®ƒèƒ½åšçš„åªæœ‰ç­‰ç›‘å¬å™¨æ‰§è¡Œå®Œåå†å»æ‰§è¡Œé»˜è®¤è¡Œä¸ºï¼Œè€Œç›‘å¬å™¨æ‰§è¡Œæ˜¯è¦è€—æ—¶çš„ï¼Œæœ‰äº›ç”šè‡³è€—æ—¶å¾ˆæ˜æ˜¾ï¼Œè¿™æ ·å°±ä¼šå¯¼è‡´é¡µé¢å¡é¡¿ã€‚ Passive Event Listenersï¼šå°±æ˜¯å‘Šè¯‰å‰é¡µé¢å†…çš„äº‹ä»¶ç›‘å¬å™¨å†…éƒ¨æ˜¯å¦ä¼šè°ƒç”¨preventDefaultå‡½æ•°æ¥é˜»æ­¢äº‹ä»¶çš„é»˜è®¤è¡Œä¸ºï¼Œä»¥ä¾¿æµè§ˆå™¨æ ¹æ®è¿™ä¸ªä¿¡æ¯æ›´å¥½åœ°åšå‡ºå†³ç­–æ¥ä¼˜åŒ–é¡µé¢æ€§èƒ½ã€‚å½“å±æ€§passiveçš„å€¼ä¸ºtrueçš„æ—¶å€™ï¼Œä»£è¡¨è¯¥ç›‘å¬å™¨å†…éƒ¨ä¸ä¼šè°ƒç”¨preventDefaultå‡½æ•°æ¥é˜»æ­¢é»˜è®¤æ»‘åŠ¨è¡Œä¸ºï¼ŒChromeæµè§ˆå™¨ç§°è¿™ç±»å‹çš„ç›‘å¬å™¨ä¸ºè¢«åŠ¨ï¼ˆpassiveï¼‰ç›‘å¬å™¨ã€‚ç›®å‰Chromeä¸»è¦åˆ©ç”¨è¯¥ç‰¹æ€§æ¥ä¼˜åŒ–é¡µé¢çš„æ»‘åŠ¨æ€§èƒ½ï¼Œæ‰€ä»¥Passive Event Listenersç‰¹æ€§å½“å‰ä»…æ”¯æŒmousewheel/touchç›¸å…³äº‹ä»¶ã€‚ è€—æ—¶æ˜¯ä»€ä¹ˆå½“ç”¨æˆ·åœ¨ç§»åŠ¨è®¾å¤‡ä¸Šç‚¹å‡»ç½‘é¡µä¸­çš„æŸä¸ªå…ƒç´ æ—¶ï¼Œæ²¡æœ‰ä¸ºç§»åŠ¨äº¤äº’è®¾è®¡çš„ç½‘é¡µåœ¨è§¦æ‘¸å¼€å§‹äº‹ä»¶å’Œå¤„ç†é¼ æ ‡äº‹ä»¶ï¼ˆmousedownï¼‰ä¹‹é—´è‡³å°‘æœ‰300æ¯«ç§’çš„å»¶è¿Ÿã€‚å¦‚æœä½ æœ‰è§¦æ‘¸è®¾å¤‡ï¼Œä½ å¯ä»¥çœ‹çœ‹è¿™ä¸ªä¾‹å­ã€‚æˆ–è€…ï¼Œä½¿ç”¨Chromeæµè§ˆå™¨ï¼Œä½ å¯ä»¥åœ¨Chromeå¼€å‘è€…å·¥å…·ä¸­æ‰“å¼€ â€œæ¨¡æ‹Ÿè§¦æ‘¸äº‹ä»¶â€ï¼Œä»¥å¸®åŠ©ä½ åœ¨éè§¦æ‘¸ç³»ç»Ÿä¸Šæµ‹è¯•è§¦æ‘¸ç•Œé¢! è¿™ä¸ªå»¶è¿Ÿæ˜¯ä¸ºäº†è®©æµè§ˆå™¨æœ‰æ—¶é—´åˆ¤æ–­ç”¨æˆ·æ˜¯å¦åœ¨åšå…¶ä»–æ‰‹åŠ¿â€“ç‰¹åˆ«æ˜¯åŒå‡»ç¼©æ”¾ã€‚å¾ˆæ˜æ˜¾ï¼Œåœ¨ä½ æƒ³å¯¹æ‰‹æŒ‡è§¦æ‘¸åšå‡ºå³æ—¶ååº”çš„æƒ…å†µä¸‹ï¼Œè¿™å¯èƒ½æ˜¯ä¸ªé—®é¢˜ã€‚ç›®å‰æ­£åœ¨è¿›è¡Œçš„å·¥ä½œæ˜¯è¯•å›¾é™åˆ¶è¿™ç§å»¶è¿Ÿè‡ªåŠ¨å‘ç”Ÿçš„æƒ…å†µã€‚ Chrome for Android Android Browser Opera Mobile for Android Firefox for Android Safari iOS Non-scalable viewport No delay 300ms 300ms No delay 300ms No Viewport 300ms 300ms 300ms 300ms 300ms é¿å…è¿™ç§é—®é¢˜çš„ä¸€ä¸ªç®€å•æ–¹æ³•ï¼Œå°±æ˜¯ç›´æ¥å‘Šè¯‰æµè§ˆå™¨ï¼Œæˆ‘è¿™ä¸ªé¡µé¢ä¸éœ€è¦æ»šåŠ¨ï¼š&lt;meta name=&quot;viewport&quot; content=&quot;width=device-width,user-scalable=no&quot;&gt;ï¼Œä¸€èˆ¬åœ¨ç§»åŠ¨ç«¯è¿™æ ·å†™å¯ä»¥ã€‚ ç»¼ä¸Šï¼š äº‹ä»¶ç›‘å¬æ—¶ï¼Œè®¾ç½®ç¬¬ä¸‰ä¸ªå‚æ•°ä¸­ï¼špassiveä¸ºfalseï¼Œå‘Šè¯‰æµè§ˆå™¨æˆ‘è¦è‡ªå·±æ§åˆ¶preventDefaultå‡½æ•°æ¥é˜»æ­¢äº‹ä»¶çš„é»˜è®¤è¡Œä¸ºã€‚ å¦‚ä¸‹ï¼š 12345678910111213private onTouchStart(e:MouseEvent) &#123; e.preventDefault(); console.log('onTouchStart', e.cancelable);&#125;private onMouseOver(e:MouseEvent) &#123; console.log('onMouseOver', e.cancelable);&#125;componentDidMount() &#123; if (this.touchElement) &#123; this.touchElement.addEventListener('touchstart', this.onTouchStart, &#123;passive: false&#125;); this.touchElement.addEventListener('mouseover', this.onMouseOver, &#123;passive: false&#125;); &#125;&#125; 123456&lt;div styleName=&#123;'btn-start-wrap'&#125; ref=&#123; (ref) =&gt; &#123; if (ref) &#123; this.touchElement = ref; &#125;&#125;&#125;&gt; ä»¥ä¸Šçš„ä»£ç touchstartåä¸ä¼šè§¦å‘mouseoverã€‚å®ç°äº†é˜»æ­¢ç§»åŠ¨ç«¯ä¹Ÿè§¦å‘mouseäº‹ä»¶çš„é€»è¾‘ã€‚ å‚è§ï¼š Passive Event Listenersâ€”â€”è®©é¡µé¢æ»‘åŠ¨æ›´åŠ æµç•…çš„æ–°ç‰¹æ€§ ç´«äº‘é£ â€“ passive çš„äº‹ä»¶ç›‘å¬å™¨ touch&amp;mouse","categories":[{"name":"ç§»åŠ¨ç«¯","slug":"ç§»åŠ¨ç«¯","permalink":"https://feidom-up.github.io/categories/%E7%A7%BB%E5%8A%A8%E7%AB%AF/"}],"tags":[{"name":"ç§»åŠ¨ç«¯","slug":"ç§»åŠ¨ç«¯","permalink":"https://feidom-up.github.io/tags/%E7%A7%BB%E5%8A%A8%E7%AB%AF/"}]},{"title":"webpackPlugins","slug":"webpackPlugins","date":"2021-05-28T02:07:55.000Z","updated":"2024-08-22T02:26:03.662Z","comments":true,"path":"2021/05/28/webpackPlugins/","link":"","permalink":"https://feidom-up.github.io/2021/05/28/webpackPlugins/","excerpt":"","text":"webpack.DefinePlugin ç®€ä»‹åœ¨ç¼–è¯‘æ—¶åˆ›å»ºä¸€ä¸ªå¯ä»¥é…ç½®çš„å…¨å±€å˜é‡ï¼Œåœ¨åŒºåˆ†å¼€å‘æ¨¡å¼ï½œç”Ÿäº§æ¨¡å¼çš„ä¸åŒæ—¶ååˆ†æœ‰ç”¨ã€‚ ä½¿ç”¨ï¼š åœ¨webpackçš„pluginsä¸­ï¼Œå¢åŠ webpack.DefinePlugin(Object)çš„å®ä¾‹ æ–¹æ³•ä¸­ä¼ å…¥çš„Objectçš„keyå€¼ï¼Œå¯ä»¥åœ¨é¡¹ç›®æ‰€æœ‰importçš„æ–‡ä»¶ä¸­ä½¿ç”¨ã€‚ ä½¿ç”¨æ—¶å¾—åˆ°çš„æ˜¯keyå¯¹åº”é¢valueï¼Œè¿™é‡Œåœ¨ç¼–è¯‘æ—¶ï¼Œå¹¶ä¸æ˜¯å˜é‡çš„å¼•ç”¨ï¼Œè€Œæ˜¯ç¼–è¯‘æ—¶ç›´æ¥æ›¿æ¢ å› ä¸ºè¿™ä¸ªæ’ä»¶ç›´æ¥æ‰§è¡Œæ–‡æœ¬æ›¿æ¢ï¼Œç»™å®šçš„å€¼å¿…é¡»åŒ…å«å­—ç¬¦ä¸²æœ¬èº«å†…çš„å®é™…å¼•å·ã€‚é€šå¸¸ï¼Œæœ‰ä¸¤ç§æ–¹å¼æ¥è¾¾åˆ°è¿™ä¸ªæ•ˆæœï¼Œä½¿ç”¨ â€˜â€œproductionâ€â€˜, æˆ–è€…ä½¿ç”¨ JSON.stringify(â€˜productionâ€™)ã€‚ æ–‡æ¡£åœ°å€ webpack.DefinePlugin","categories":[{"name":"webpack","slug":"webpack","permalink":"https://feidom-up.github.io/categories/webpack/"}],"tags":[{"name":"å‰ç«¯å·¥ç¨‹åŒ–","slug":"å‰ç«¯å·¥ç¨‹åŒ–","permalink":"https://feidom-up.github.io/tags/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96/"},{"name":"webpack","slug":"webpack","permalink":"https://feidom-up.github.io/tags/webpack/"}]},{"title":"vue3çš„æ•°æ®å“åº”å¼ç³»ç»Ÿ","slug":"vue3çš„æ•°æ®å“åº”å¼ç³»ç»Ÿ","date":"2021-03-19T07:54:57.000Z","updated":"2024-08-22T02:26:03.661Z","comments":true,"path":"2021/03/19/vue3çš„æ•°æ®å“åº”å¼ç³»ç»Ÿ/","link":"","permalink":"https://feidom-up.github.io/2021/03/19/vue3%E7%9A%84%E6%95%B0%E6%8D%AE%E5%93%8D%E5%BA%94%E5%BC%8F%E7%B3%BB%E7%BB%9F/","excerpt":"","text":"Vue2.0çš„æ•°æ®ç›‘å¬Object.defineProperty 12345678910111213141516const object1 = &#123;&#125;;Object.defineProperty(object1, 'property1', &#123; value: 42, writable: false, get()&#123;&#125;, set(newValue) &#123; bValue = newValue; &#125;, enumerable : true, configurable : true&#125;);object1.property1 = 77;// throws an error in strict modeconsole.log(object1.property1);// expected output: 42 Vue3.0çš„æ•°æ®å“åº”å¼ç³»ç»Ÿproxy get\\set 12345678910111213141516// å¼•ç”¨vue-next(3)æºç ä¸­'packages/reactivity/dist/reactivity.global.js'const &#123;reactive, effect&#125; = VueObserver;// reactive: æŠŠæ•°æ®å¤„ç†æˆä¸ºå“åº”å¼æ•°æ®// effect: // 1.é¦–å…ˆä¼šæ‰§è¡Œä¸€æ¬¡å¯¹åº”çš„ç›‘å¬å‡½æ•°// 2.ä¿®æ”¹å¯¹åº”ç›‘å¬å‡½æ•°å†…ä½¿ç”¨çš„å“åº”å¼æ•°æ®ï¼Œå¯¹åº”çš„ç›‘å¬å‡½æ•°å°±ä¼šç«‹å³æ‰§è¡Œï¼Œé‡æ–°æ‰§è¡Œçš„è¿‡ç¨‹å°±ä¼šè·å–æ–°çš„æ•°æ®const yideng = &#123;count: 0&#125;;const state = reactive(yideng);const fn = ()=&gt;&#123; const count = state.count; const.log('å½“å‰çš„count', count) //render(count) å¦‚æœåœ¨è¿™è§¦å‘renderæ¸²æŸ“&#125;effect(fn)","categories":[{"name":"vue","slug":"vue","permalink":"https://feidom-up.github.io/categories/vue/"}],"tags":[{"name":"vue","slug":"vue","permalink":"https://feidom-up.github.io/tags/vue/"},{"name":"vueæºç è§£è¯»","slug":"vueæºç è§£è¯»","permalink":"https://feidom-up.github.io/tags/vue%E6%BA%90%E7%A0%81%E8%A7%A3%E8%AF%BB/"}]},{"title":"æ•°æ®ç»“æ„ä¸ç®—æ³•ä¹‹é˜Ÿåˆ—","slug":"æ•°æ®ç»“æ„ä¸ç®—æ³•ä¹‹é˜Ÿåˆ—","date":"2021-03-17T10:44:26.000Z","updated":"2024-08-22T02:26:03.664Z","comments":true,"path":"2021/03/17/æ•°æ®ç»“æ„ä¸ç®—æ³•ä¹‹é˜Ÿåˆ—/","link":"","permalink":"https://feidom-up.github.io/2021/03/17/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95%E4%B9%8B%E9%98%9F%E5%88%97/","excerpt":"","text":"é˜Ÿåˆ— ç‰¹æ€§ï¼šå…ˆè¿›å…ˆå‡º è§£é¢˜æ³•åˆ™ï¼š é¢˜ç›®å…·å¤‡å¹¿åº¦éå†ï¼ˆåˆ†å±‚éå†ï¼‰å’Œé¡ºåºè¾“å‡ºçš„ç‰¹ç‚¹ï¼Œå°±åº”è¯¥æƒ³åˆ°ç”¨FIFO é˜Ÿåˆ—æ¥è¯•ä¸€è¯•ã€‚ æ»‘åŠ¨çª—å£ç±»å‹é¢˜ æ¨¡æ¿ï¼š åˆ†å±‚éå† å¾ªç¯é˜Ÿåˆ— å•è°ƒé˜Ÿåˆ— æ™®é€šé˜Ÿåˆ— ä¾‹é¢˜1ï¼šä»ä¸Šåˆ°ä¸‹æŒ‰å±‚æ‰“å°äºŒå‰æ ‘ï¼ŒåŒä¸€å±‚ç»“ç‚¹æŒ‰ä»å·¦åˆ°å³çš„é¡ºåºæ‰“å°ï¼Œæ¯ä¸€å±‚æ‰“å°åˆ°ä¸€è¡Œã€‚ è¾“å…¥ï¼š 3 9 8 6 7 è¾“å‡ºï¼š[[3], [9, 8], [6, 7]] äºŒå‰æ ‘çš„å±‚æ¬¡éå†çš„è§£é¢˜æŠ€å·§ éå†æ–¹å¼çš„å˜åŒ–ï¼š äºŒå‰æ ‘çš„é”¯é½¿å½¢éå† äºŒå‰æ ‘å±‚æ¬¡å€’åºéå† å±‚çš„ä¿¡æ¯å˜åŒ– äºŒå‰æ ‘çš„å±‚å¹³å‡å€¼ äºŒå‰æ ‘æœ€æ·±å±‚çš„å¶èŠ‚ç‚¹çš„å’Œ äºŒå‰æ ‘çš„æœ€å¤§å®½åº¦ æ ‘çš„å˜åŒ– Nå‰æ ‘çš„å±‚æ¬¡éå† Nå‰æ ‘çš„æœ€å¤§æ·±åº¦ å¾ªç¯é˜Ÿåˆ— é‡ç‚¹ï¼š å¾ªç¯ä½¿ç”¨å›ºå®šç©ºé—´ éš¾ç‚¹ï¼š æ§åˆ¶å¥½ front/rear ä¸¤ä¸ªé¦–å°¾æŒ‡ç¤ºå™¨ ç©ºé˜Ÿåˆ—å’Œæ»¡é˜Ÿåˆ—çš„åˆ¤æ–­ï¼Œåœ¨äºusedå˜é‡ ä¾‹é¢˜2ï¼šè®¾è®¡ä¸€ä¸ªå¯ä»¥å®¹çº³ k ä¸ªå…ƒç´ çš„å¾ªç¯é˜Ÿåˆ—ã€‚éœ€è¦å®ç°ä»¥ä¸‹æ¥å£ï¼š 12345678910111213141516class MyCircularQueue &#123; // å‚æ•°kè¡¨ç¤ºè¿™ä¸ªå¾ªç¯é˜Ÿåˆ—æœ€å¤šåªèƒ½å®¹çº³kä¸ªå…ƒç´  public MyCircularQueue(int k); // å°†valueæ”¾åˆ°é˜Ÿåˆ—ä¸­, æˆåŠŸè¿”å›true public boolean enQueue(int value); // åˆ é™¤é˜Ÿé¦–å…ƒç´ ï¼ŒæˆåŠŸè¿”å›true public boolean deQueue(); // å¾—åˆ°é˜Ÿé¦–å…ƒç´ ï¼Œå¦‚æœä¸ºç©ºï¼Œè¿”å›-1 public int Front(); // å¾—åˆ°é˜Ÿå°¾å…ƒç´ ï¼Œå¦‚æœé˜Ÿåˆ—ä¸ºç©ºï¼Œè¿”å›-1 public int Rear(); // çœ‹ä¸€ä¸‹å¾ªç¯é˜Ÿåˆ—æ˜¯å¦ä¸ºç©º public boolean isEmpty(); // çœ‹ä¸€ä¸‹å¾ªç¯é˜Ÿåˆ—æ˜¯å¦å·²æ”¾æ»¡kä¸ªå…ƒç´  public boolean isFull();&#125; å•è°ƒé˜Ÿåˆ— æ¦‚å¿µï¼š è¦æ±‚é˜Ÿåˆ—ä¸­çš„å…ƒç´ å¿…é¡»æ»¡è¶³å•è°ƒæ€§ï¼Œæ¯”å¦‚å•è°ƒé€’å¢ï¼Œæˆ–è€…å•è°ƒé€’å‡ã€‚å•è°ƒé˜Ÿåˆ—å±äºåŒç«¯é˜Ÿåˆ—çš„ä¸€ç§ã€‚åŒç«¯é˜Ÿåˆ—ä¸ FIFO é˜Ÿåˆ—çš„åŒºåˆ«åœ¨äºï¼š FIFO é˜Ÿåˆ—åªèƒ½ä»å°¾éƒ¨æ·»åŠ å…ƒç´ ï¼Œé¦–éƒ¨å¼¹å‡ºå…ƒç´ ï¼› åŒç«¯é˜Ÿåˆ—å¯ä»¥ä»é¦–å°¾ä¸¤ç«¯ push/pop å…ƒç´ ã€‚ æ³¨æ„ï¼š å•è°ƒé˜Ÿåˆ—åœ¨å…¥é˜Ÿçš„æ—¶å€™ï¼Œéœ€è¦æ»¡è¶³ 2 ç‚¹ï¼š å…¥é˜Ÿå‰é˜Ÿåˆ—å·²ç»æ»¡è¶³å•è°ƒæ€§ï¼› å…¥é˜Ÿåé˜Ÿåˆ—ä»ç„¶æ»¡è¶³å•è°ƒæ€§ã€‚ ä¾‹é¢˜3ï¼šæ»‘åŠ¨çª—å£çš„æœ€å¤§å€¼ è¾“å…¥ï¼šnums = [1,3,-1,-3,5,3], k = 3 è¾“å‡ºï¼š[3,3,5,5] ç¬¦åˆå•è°ƒé€’å‡é˜Ÿåˆ—ï¼ ä¾‹é¢˜4ï¼š ç»™å®šä¸€ä¸ªæ•°ç»„ A[]ï¼Œæ¯ä¸ªä½ç½® i æ”¾ç½®äº†é‡‘å¸ A[i]ï¼Œå°æ˜ä» A[0] å‡ºå‘ã€‚å½“å°æ˜èµ°åˆ° A[i] çš„æ—¶å€™ï¼Œä¸‹ä¸€æ­¥ä»–å¯ä»¥é€‰æ‹© A[i+1, i+k]ï¼ˆå½“ç„¶ï¼Œä¸èƒ½è¶…å‡ºæ•°ç»„è¾¹ç•Œï¼‰ã€‚æ¯ä¸ªä½ç½®ä¸€æ—¦è¢«é€‰æ‹©ï¼Œå°†ä¼šæŠŠé‚£ä¸ªä½ç½®çš„é‡‘å¸æ”¶èµ°ï¼ˆå¦‚æœä¸ºè´Ÿæ•°ï¼Œå°±è¦äº¤å‡ºé‡‘å¸ï¼‰ã€‚è¯·é—®ï¼Œæœ€å¤šèƒ½æ”¶é›†å¤šå°‘é‡‘å¸ï¼Ÿ è¾“å…¥ï¼š[1,-1,-100,-1000,100,3], k = 2 è¾“å‡ºï¼š4 è§£é‡Šï¼šä» A[0] = 1 å‡ºå‘ï¼Œæ”¶è·é‡‘å¸ 1ã€‚ä¸‹ä¸€æ­¥èµ°å¾€ A[2] = -100, æ”¶è·é‡‘å¸ -100ã€‚å†ä¸‹ä¸€æ­¥èµ°åˆ° A[4] = 100ï¼Œæ”¶è·é‡‘å¸ 100ï¼Œæœ€åèµ°åˆ° A[5] = 3ï¼Œæ”¶è·é‡‘å¸ 3ã€‚æœ€å¤šæ”¶è· 1 - 100 + 100 + 3 = 4ã€‚æ²¡æœ‰æ¯”è¿™ä¸ªæ›´å¥½çš„èµ°æ³•äº†ã€‚","categories":[{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"https://feidom-up.github.io/categories/%E7%AE%97%E6%B3%95/"}],"tags":[{"name":"æ•°æ®ç»“æ„","slug":"æ•°æ®ç»“æ„","permalink":"https://feidom-up.github.io/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/"},{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"https://feidom-up.github.io/tags/%E7%AE%97%E6%B3%95/"},{"name":"é˜Ÿåˆ—","slug":"é˜Ÿåˆ—","permalink":"https://feidom-up.github.io/tags/%E9%98%9F%E5%88%97/"}]},{"title":"æ‰‹å†™ä»£ç ç³»åˆ—ä¹‹New(fn)","slug":"æ‰‹å†™ä»£ç ç³»åˆ—ä¹‹New-fn","date":"2021-03-17T00:46:47.000Z","updated":"2024-08-22T02:26:03.663Z","comments":true,"path":"2021/03/17/æ‰‹å†™ä»£ç ç³»åˆ—ä¹‹New-fn/","link":"","permalink":"https://feidom-up.github.io/2021/03/17/%E6%89%8B%E5%86%99%E4%BB%A3%E7%A0%81%E7%B3%BB%E5%88%97%E4%B9%8BNew-fn/","excerpt":"","text":"Newæ“ä½œç¬¦åšäº†å“ªäº›äº‹ åˆ›å»ºäº†ä¸€ä¸ªå…¨æ–°çš„å¯¹è±¡ã€‚ ä¼šè¢«æ‰§è¡Œ[[Prototype]]ï¼ˆä¹Ÿå°±æ˜¯protoï¼‰é“¾æ¥ã€‚ ä½¿thisæŒ‡å‘æ–°åˆ›å»ºçš„å¯¹è±¡ã€‚ é€šè¿‡newåˆ›å»ºçš„æ¯ä¸ªå¯¹è±¡å°†æœ€ç»ˆè¢«[[Prototype]]é“¾æ¥åˆ°è¿™ä¸ªå‡½æ•°çš„prototypeå¯¹è±¡ä¸Šã€‚ å¦‚æœå‡½æ•°æ²¡æœ‰è¿”å›å¯¹è±¡ç±»å‹Object(åŒ…å«Functoin, Array, Date, RegExg, Error)ï¼Œé‚£ä¹ˆnewè¡¨è¾¾å¼ä¸­çš„å‡½æ•°è°ƒç”¨å°†è¿”å›è¯¥å¯¹è±¡å¼•ç”¨ã€‚ å®ç° ç‰ˆæœ¬ä¸€ï¼š 12345678910111213141516171819function myNew(fn)&#123; return function()&#123; // åˆ›å»ºä¸€ä¸ªå¯¹è±¡ï¼Œä¸”å°†å…¶éšå¼åŸå‹æŒ‡å‘æ„é€ å‡½æ•°åŸå‹ let obj = &#123; __proto__: fn.prototype &#125; // æ‰§è¡Œæ„é€ å‡½æ•° fn.call(obj, ...arguments) // è¿”å›è¯¥å¯¹è±¡ return obj &#125;&#125;// ä½¿ç”¨ç¤ºä¾‹ï¼šfunction Person(name, age)&#123; this.name = name this.age = age&#125;let obj = myNew(Person)('chen', 18) ç‰ˆæœ¬äºŒï¼š 12345678910111213141516function myNew(fn)&#123; let res = &#123;&#125;; if(fn.prototype !==null)&#123; res.__proto__ = fn.prototype; &#125; let ret = fn.apply(res, Array.prototype.slice.call(arguments, 1)); if(typeof ret === \"object\" || typeof ret === \"function\") &amp;&amp; ret !== null&#123; return ret &#125; return res&#125;// ä½¿ç”¨ç¤ºä¾‹ï¼šfunction A() &#123;&#125;var obj = New(A, 1, 2);// equals tovar obj = new A(1, 2);","categories":[{"name":"æ‰‹å†™ä»£ç ç³»åˆ—","slug":"æ‰‹å†™ä»£ç ç³»åˆ—","permalink":"https://feidom-up.github.io/categories/%E6%89%8B%E5%86%99%E4%BB%A3%E7%A0%81%E7%B3%BB%E5%88%97/"}],"tags":[]},{"title":"æ‰‹å†™ä»£ç ç³»åˆ—ä¹‹é˜²æŠ–ä¸èŠ‚æµ","slug":"æ‰‹å†™ä»£ç ç³»åˆ—ä¹‹é˜²æŠ–ä¸èŠ‚æµ","date":"2021-03-16T07:26:28.000Z","updated":"2024-08-22T02:26:03.663Z","comments":true,"path":"2021/03/16/æ‰‹å†™ä»£ç ç³»åˆ—ä¹‹é˜²æŠ–ä¸èŠ‚æµ/","link":"","permalink":"https://feidom-up.github.io/2021/03/16/%E6%89%8B%E5%86%99%E4%BB%A3%E7%A0%81%E7%B3%BB%E5%88%97%E4%B9%8B%E9%98%B2%E6%8A%96%E4%B8%8E%E8%8A%82%E6%B5%81/","excerpt":"","text":"é˜²æŠ–æ€è·¯ï¼šåœ¨è§„å®šæ—¶é—´å†…æœªè§¦å‘ç¬¬äºŒæ¬¡ï¼Œåˆ™æ‰§è¡Œ 1234567891011121314151617181920function debounce(fn, delay)&#123; // åˆ©ç”¨é—­åŒ…ä¿å­˜å®šæ—¶å™¨ let timer = null; return function()&#123; let context = this; let args = arguments; // åœ¨è§„å®šæ—¶é—´å†…å†æ¬¡è§¦å‘ // ä¼šå…ˆæ¸…é™¤å®šæ—¶å™¨å†é‡è®¾å®šæ—¶å™¨ clearTimeout(timer); timer = setTimeout(function()&#123; fn.apply(context, args) &#125;,delay); &#125;&#125;// ä½¿ç”¨ä¸¾ä¾‹ï¼šfunction fn1()&#123; console.log(\"é˜²æŠ–\")&#125;addEventListener(\"scroll\", debounce(fn1, 1000)) èŠ‚æµæ€è·¯ï¼šåœ¨è§„å®šæ—¶é—´å†…åªè§¦å‘ä¸€æ¬¡ 12345678910111213141516171819function throttle(fn, delay)&#123; // åˆ©ç”¨é—­åŒ…ä¿å­˜æ—¶é—´ let prev = Date.now(); return function()&#123; let context = this; let args = arguments; let now = Date.now(); if(now - prev &gt;= delay)&#123; fn.apply(context, args); prev = Date.now(); &#125; &#125;&#125;// ä½¿ç”¨ä¸¾ä¾‹ï¼šfunction fn2()&#123; console.log(\"èŠ‚æµ\")&#125;addEventListener(\"scroll\", throttle(fn2, 1000))","categories":[{"name":"æ‰‹å†™ä»£ç ç³»åˆ—","slug":"æ‰‹å†™ä»£ç ç³»åˆ—","permalink":"https://feidom-up.github.io/categories/%E6%89%8B%E5%86%99%E4%BB%A3%E7%A0%81%E7%B3%BB%E5%88%97/"}],"tags":[]},{"title":"æ‰‹å†™ä»£ç å’”å’”å’”","slug":"æ‰‹å†™ä»£ç å’”å’”å’”","date":"2021-03-16T07:24:51.000Z","updated":"2024-08-22T02:26:03.663Z","comments":true,"path":"2021/03/16/æ‰‹å†™ä»£ç å’”å’”å’”/","link":"","permalink":"https://feidom-up.github.io/2021/03/16/%E6%89%8B%E5%86%99%E4%BB%A3%E7%A0%81%E5%92%94%E5%92%94%E5%92%94/","excerpt":"","text":"å’”å’”å’” æ‰‹å†™ä»£ç ç³»åˆ—ä¹‹é˜²æŠ–ä¸èŠ‚æµ æ‰‹å†™New æ‰‹å†™Promise æ‰‹å†™Promise.all äºŒå‰æ ‘çš„æ·±åŠéå† versionç‰ˆæœ¬å¯¹æ¯” ä¸€ä¸ªå­—ç¬¦ä¸²æœ€å¤§çš„å›æ–‡å­—ç¬¦ä¸² ä¸‰æ•°ä¹‹å’Œ æ‰‹å†™indexof æ‰‹å†™EventEmitter æ‰‹å†™Redux.createStore æ‰‹å†™æ·±æ‹·è´ã€æ·±æ‹·è´å‡½æ•°","categories":[{"name":"æ‰‹å†™ä»£ç ç³»åˆ—","slug":"æ‰‹å†™ä»£ç ç³»åˆ—","permalink":"https://feidom-up.github.io/categories/%E6%89%8B%E5%86%99%E4%BB%A3%E7%A0%81%E7%B3%BB%E5%88%97/"}],"tags":[]},{"title":"æ•°æ®ç»“æ„ä¸ç®—æ³•ä¹‹æ ˆç»“æ„","slug":"æ•°æ®ç»“æ„ä¸ç®—æ³•ä¹‹æ ˆç»“æ„","date":"2021-03-16T07:15:17.000Z","updated":"2024-08-22T02:26:03.664Z","comments":true,"path":"2021/03/16/æ•°æ®ç»“æ„ä¸ç®—æ³•ä¹‹æ ˆç»“æ„/","link":"","permalink":"https://feidom-up.github.io/2021/03/16/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95%E4%B9%8B%E6%A0%88%E7%BB%93%E6%9E%84/","excerpt":"","text":"æ ˆ ç‰¹æ€§ï¼šå…ˆè¿›åå‡º è§£é¢˜æ³•åˆ™ï¼š é¢˜ç›®ä¸­æœ‰é…å¯¹ã€æ¶ˆé™¤çš„é¢˜æ„ï¼Œä¼˜å…ˆè€ƒè™‘æ ˆç»“æ„ æ ˆä¸­å­˜æ”¾çš„å¯ä»¥æ˜¯å†…å®¹æœ¬èº«å’Œå†…å®¹çš„ç´¢å¼• æ•°ç»„ä¸­å³è¾¹ç¬¬ä¸€ä¸ªæ¯”æˆ‘å°çš„å…ƒç´ çš„ä½ç½®ï¼Œæ±‚è§£ç”¨é€’å¢æ ˆ è¾ƒå°çš„æ•°æ¶ˆé™¤æ‰è¾ƒå¤§çš„æ•°çš„æ—¶å€™ï¼Œä½¿ç”¨é€’å¢æ ˆã€‚ æ ¹æ®é¢˜æ„æ€»ç»“å…¥æ ˆä¸å‡ºæ ˆçš„æ—¶æœº æ™®é€šæ ˆ è§„å¾‹æ€§ï¼šé…å¯¹ã€æ¶ˆé™¤ ä¾‹é¢˜1ï¼šå­—ç¬¦ä¸²ä¸­åªæœ‰å­—ç¬¦â€™(â€˜å’Œâ€™)â€™ã€‚åˆæ³•å­—ç¬¦ä¸²éœ€è¦æ‹¬å·å¯ä»¥é…å¯¹ã€‚æ¯”å¦‚ï¼š è¾“å…¥ï¼šâ€()â€ è¾“å‡ºï¼štrue è§£é‡Šï¼š()ï¼Œ()()ï¼Œ(())æ˜¯åˆæ³•çš„ã€‚)(ï¼Œ()(ï¼Œ(()æ˜¯éæ³•çš„ã€‚ è¯·ä½ å®ç°ä¸€ä¸ªå‡½æ•°isValid(s)ï¼Œæ¥åˆ¤æ–­ç»™å®šçš„å­—ç¬¦ä¸²æ˜¯å¦åˆæ³•ã€‚ é’ˆå¯¹ä¾‹1è¿™ç§å†…å®¹ä¸€æ ·æ—¶ï¼Œå¯ä»¥ä½¿ç”¨è®¡æ•°å™¨ä¼˜åŒ– ä¾‹é¢˜æ‹“å±•ï¼š ç»™å®šä¸€ä¸ªåªåŒ…æ‹¬ â€˜(â€˜ï¼Œâ€™)â€™ï¼Œâ€™{â€˜ï¼Œâ€™}â€™ï¼Œâ€™[â€˜ï¼Œâ€™]â€™ çš„å­—ç¬¦ä¸²ï¼Œåˆ¤æ–­å­—ç¬¦ä¸²æ˜¯å¦æœ‰æ•ˆã€‚æœ‰æ•ˆå­—ç¬¦ä¸²éœ€æ»¡è¶³ï¼š å·¦æ‹¬å·å¿…é¡»ç”¨ç›¸åŒç±»å‹çš„å³æ‹¬å·é—­åˆ å·¦æ‹¬å·å¿…é¡»ä»¥æ­£ç¡®çš„é¡ºåºé—­åˆ æ³¨æ„ç©ºå­—ç¬¦ä¸²å¯è¢«è®¤ä¸ºæ˜¯æœ‰æ•ˆå­—ç¬¦ä¸² è¯·å®ç°isValid(s) ä¾‹é¢˜2ï¼šåœ¨æ°´ä¸­æœ‰è®¸å¤šé±¼ï¼Œå¯ä»¥è®¤ä¸ºè¿™äº›é±¼åœæ”¾åœ¨ x è½´ä¸Šã€‚å†ç»™å®šä¸¤ä¸ªæ•°ç»„ Sizeï¼ŒDirï¼ŒSize[i] è¡¨ç¤ºç¬¬ i æ¡é±¼çš„å¤§å°ï¼ŒDir[i] è¡¨ç¤ºé±¼çš„æ–¹å‘ ï¼ˆ0 è¡¨ç¤ºå‘å·¦æ¸¸ï¼Œ1 è¡¨ç¤ºå‘å³æ¸¸ï¼‰ã€‚è¿™ä¸¤ä¸ªæ•°ç»„åˆ†åˆ«è¡¨ç¤ºé±¼çš„å¤§å°å’Œæ¸¸åŠ¨çš„æ–¹å‘ï¼Œå¹¶ä¸”ä¸¤ä¸ªæ•°ç»„çš„é•¿åº¦ç›¸ç­‰ã€‚é±¼çš„è¡Œä¸ºç¬¦åˆä»¥ä¸‹å‡ ä¸ªæ¡ä»¶: æ‰€æœ‰çš„é±¼éƒ½åŒæ—¶å¼€å§‹æ¸¸åŠ¨ï¼Œæ¯æ¬¡æŒ‰ç…§é±¼çš„æ–¹å‘ï¼Œéƒ½æ¸¸åŠ¨ä¸€ä¸ªå•ä½è·ç¦»ï¼› å½“æ–¹å‘ç›¸å¯¹æ—¶ï¼Œå¤§é±¼ä¼šåƒæ‰å°é±¼ï¼› é±¼çš„å¤§å°éƒ½ä¸ä¸€æ ·ã€‚ è¾“å…¥ï¼šSize = [4, 2, 5, 3, 1], Dir = [1, 1, 0, 0, 0] è¾“å‡ºï¼š3 å®Œæˆsolution(Size, Dir)æ¥è®¡ç®—è¿˜å‰©ä¸‹å‡ æ¡é±¼ï¼Ÿ å•è°ƒæ ˆ å®šä¹‰ï¼šå•è°ƒæ ˆå°±æ˜¯æŒ‡æ ˆä¸­çš„å…ƒç´ å¿…é¡»æ˜¯æŒ‰ç…§å‡åºæ’åˆ—çš„æ ˆï¼Œæˆ–è€…æ˜¯é™åºæ’åˆ—çš„æ ˆã€‚ å‡åºæ’åˆ—çš„æ ˆç§°ä¸ºé€’å¢æ ˆ é™åºæ’åˆ—çš„æ ˆç§°ä¸ºé€’å‡æ ˆ ç‰¹ç‚¹ï¼šä»»ä½•æ—¶å€™éƒ½éœ€è¦ä¿è¯æ ˆçš„æœ‰åºæ€§ ä¾‹é¢˜1ï¼šä¸€ä¸ªæ•´æ•°æ•°ç»„ Aï¼Œæ‰¾åˆ°æ¯ä¸ªå…ƒç´ ï¼šå³è¾¹ç¬¬ä¸€ä¸ªæ¯”æˆ‘å°çš„ä¸‹æ ‡ä½ç½®ï¼Œæ²¡æœ‰åˆ™ç”¨ -1 è¡¨ç¤ºã€‚ï¼ˆæ‰¾å‡ºæ•°ç»„ä¸­å³è¾¹æ¯”æˆ‘å°çš„å…ƒç´ ï¼‰ è¾“å…¥ï¼š[5, 2] è¾“å‡ºï¼š[1, -1] è§£é‡Šï¼šå› ä¸ºå…ƒç´  5 çš„å³è¾¹ç¦»æˆ‘æœ€è¿‘ä¸”æ¯”æˆ‘å°çš„ä½ç½®åº”è¯¥æ˜¯ A[1]ï¼Œæœ€åä¸€ä¸ªå…ƒç´  2 å³è¾¹æ²¡æœ‰æ¯” 2 å°çš„å…ƒç´ ï¼Œæ‰€ä»¥åº”è¯¥è¾“å‡º -1ã€‚ ç±»ä¼¼é¢˜ï¼šæ•°ç»„ä¸­å³è¾¹ç¬¬ä¸€ä¸ªæ¯”æˆ‘å¤§çš„å…ƒç´ çš„ä½ç½®æ•°ç»„ä¸­å…ƒç´ å·¦è¾¹ç¦»æˆ‘æœ€è¿‘ä¸”æ¯”æˆ‘å°çš„å…ƒç´ çš„ä½ç½®æ•°ç»„ä¸­å…ƒç´ å·¦è¾¹ç¦»æˆ‘æœ€è¿‘ä¸”æ¯”æˆ‘å¤§çš„å…ƒç´ çš„ä½ç½® ä¾‹é¢˜2ï¼šç»™å®šä¸€ä¸ªæ­£æ•´æ•°æ•°ç»„å’Œ kï¼Œè¦æ±‚ä¾æ¬¡å–å‡º k ä¸ªæ•°ï¼Œè¾“å‡ºå…¶ä¸­æ•°ç»„çš„ä¸€ä¸ªå­åºåˆ—ï¼Œéœ€è¦æ»¡è¶³ï¼š1. é•¿åº¦ä¸º kï¼›2.å­—å…¸åºæœ€å°ã€‚ è¾“å…¥ï¼šnums = [3,5,2,6], k = 2 è¾“å‡ºï¼š[2,6] è§£é‡Šï¼šåœ¨æ‰€æœ‰å¯èƒ½çš„è§£ï¼š{[3,5], [3,2], [3,6], [5,2], [5,6], [2,6]} ä¸­ï¼Œ[2,6] å­—å…¸åºæœ€å°ã€‚ è§£é¢˜æ€è·¯","categories":[{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"https://feidom-up.github.io/categories/%E7%AE%97%E6%B3%95/"}],"tags":[{"name":"æ•°æ®ç»“æ„","slug":"æ•°æ®ç»“æ„","permalink":"https://feidom-up.github.io/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/"},{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"https://feidom-up.github.io/tags/%E7%AE%97%E6%B3%95/"},{"name":"æ ˆ","slug":"æ ˆ","permalink":"https://feidom-up.github.io/tags/%E6%A0%88/"}]},{"title":"æ•°æ®ç»“æ„ä¸ç®—æ³•","slug":"æ•°æ®ç»“æ„ä¸ç®—æ³•","date":"2021-03-03T01:34:21.000Z","updated":"2024-08-22T02:26:03.663Z","comments":true,"path":"2021/03/03/æ•°æ®ç»“æ„ä¸ç®—æ³•/","link":"","permalink":"https://feidom-up.github.io/2021/03/03/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/","excerpt":"","text":"ç®—æ³•å››æ­¥åˆ†ææ³•ï¼š æ¨¡æ‹Ÿï¼šæ¨¡æ‹Ÿé¢˜ç›®çš„è¿è¡Œã€‚ è§„å¾‹ï¼šå°è¯•æ€»ç»“å‡ºé¢˜ç›®çš„ä¸€èˆ¬è§„å¾‹å’Œç‰¹ç‚¹ã€‚ åŒ¹é…ï¼šæ‰¾åˆ°ç¬¦åˆè¿™äº›ç‰¹ç‚¹çš„æ•°æ®ç»“æ„ä¸ç®—æ³•ã€‚ è¾¹ç•Œï¼šè€ƒè™‘ç‰¹æ®Šæƒ…å†µã€‚ æ•°æ®ç»“æ„ä¸ç®—æ³• æ ˆç»“æ„ä¸ç®—æ³•","categories":[{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"https://feidom-up.github.io/categories/%E7%AE%97%E6%B3%95/"}],"tags":[{"name":"æ•°æ®ç»“æ„","slug":"æ•°æ®ç»“æ„","permalink":"https://feidom-up.github.io/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/"},{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"https://feidom-up.github.io/tags/%E7%AE%97%E6%B3%95/"}]},{"title":"Virtual DOMçš„å·¥ä½œåŸç†","slug":"è™šæ‹Ÿdom","date":"2021-01-02T15:22:41.000Z","updated":"2024-08-22T02:26:03.664Z","comments":true,"path":"2021/01/02/è™šæ‹Ÿdom/","link":"","permalink":"https://feidom-up.github.io/2021/01/02/%E8%99%9A%E6%8B%9Fdom/","excerpt":"","text":"Virtual DOM ä¹Ÿè¢«ç§°ä¸ºè™šæ‹ŸDOM åœ¨reactä¸­ï¼Œjsxè¯­æ³•ç»è¿‡babelè§£æè½¬åŒ–ä¸ºReact.createElement()å‡½æ•°è°ƒç”¨åç”ŸæˆastæŠ½è±¡è¯­æ³•æ ‘ï¼Œå†é€šè¿‡renderå‡½æ•°å°†astæ ‘è½¬æ¢ä¸ºfiber ç»“æ„ï¼Œå¡«å…¥è®¸å¤šè°ƒåº¦ã€æ›´æ–°ã€diffç›¸å…³æ•°æ®ï¼Œå¹¶è½¬æ¢astæ ‘ä¸ºè™šæ‹ŸDOMæ ‘ï¼Œå†å®ŒæˆæŒ‚è½½ã€‚ åœ¨vueä¸­ï¼Œæ¨¡ç‰ˆè¯­æ³• ç»è¿‡ generateå¤„ç†(æ­£åˆ™åŒ¹é… ç”Ÿæˆ astæŠ½è±¡è¯­æ³•æ ‘)ï¼Œrenderä¸­è°ƒç”¨_c()/createElement()å‡½æ•°å°†astæ ‘ç”ŸæˆVNode(è™šæ‹ŸDOM),å†å®ŒæˆæŒ‚è½½ã€‚ è™šæ‹ŸDOMçš„æ¥æºreactçš„å‰èº«æ˜¯facebookçš„XHPï¼Œåœ¨è¿™ä¸ªæ¡†æ¶ä¸­ï¼Œé¡µé¢éƒ½æ˜¯é€šè¿‡è½¬ä¹‰çš„æ–¹å¼ç”Ÿæˆçš„ï¼Œå¹¶æ²¡æœ‰ç›´æ¥çš„HTMLï¼Œç¡®ä¿åœ¨XHPä¸­å†™å‡ºå®‰å…¨çš„é™æ€é¡µé¢ã€‚ åˆè¡·æ˜¯ï¼š ç®€åŒ–å‰ç«¯å¼€å‘ï¼ˆåç«¯èµ‹èƒ½ï¼‰ é˜²æ­¢xssæ”»å‡» å‘å±•æ˜¯ï¼š é€šè¿‡è™šæ‹ŸDOMè§„é¿é£é™©ï¼Œä¸è®©ç”¨æˆ·ç›´æ¥çš„æ“ä½œDOMäº†ï¼Œè€Œæ˜¯æŠŠå®ƒå°èµ·æ¥è‡ªå·±ç®¡ç† è™šæ‹ŸDOMçš„è¡¨ç°å½¢å¼12345678&#123; tag: 'input', props: &#123; type: 'button', value: '' &#125;, childrean: []&#125; React æœ‰ä¸¤ä¸ªå‡½æ•° * diff å‡½æ•°ï¼Œå»è®¡ç®—çŠ¶æ€å˜æ›´å‰åçš„è™šæ‹Ÿ DOM æ ‘å·®å¼‚ * æ¸²æŸ“å‡½æ•°ï¼Œæ¸²æŸ“æ•´ä¸ªè™šæ‹Ÿ DOM æ ‘æˆ–è€…å¤„ç†å·®å¼‚ç‚¹ã€‚ ç°åœ¨æ˜¯ä¸æ˜¯æœ‰äº›ç†è§£ä¸ºä»€ä¹ˆ React ä¸ ReactDOM æ˜¯ä¸¤ä¸ªåº“äº†ï¼Ÿæ­£æ˜¯ç”±äºè®¡ç®—ä¸æ¸²æŸ“çš„åˆ†å·¥ã€‚ å…¶ä¸­ React çš„ä¸»è¦å·¥ä½œæ˜¯ç»„ä»¶å®ç°ã€æ›´æ–°è°ƒåº¦ï¼›ReactDOM æä¾›äº†åœ¨ ç½‘é¡µä¸Šæ¸²æŸ“ çš„åŸºç¡€ è™šæ‹ŸDOMçš„ä¼˜ç¼ºç‚¹ä¼˜ç‚¹ æ€§èƒ½ä¼˜è¶Š è§„é¿XSS å¯è·¨å¹³å° ä½†æ˜¯ä¸æ˜¯æ‰€æœ‰çš„æ“ä½œéƒ½æ˜¯è™šæ‹ŸDOMæ›´é«˜æ•ˆ&emsp;&emsp;å¤§é‡çš„ç›´æ¥æ“ä½œDOMå®¹æ˜“å¼•èµ·é¡µé¢æ€§èƒ½ä¸‹é™ã€‚è¿™æ—¶ReactåŸºäºè™šæ‹ŸDOMçš„diffå¤„ç†ä¸æ‰¹å¤„ç†æ“ä½œï¼Œå¯é™ä½DOMçš„æ“ä½œé¢‘æ¬¡å’ŒèŒƒå›´ï¼Œæå‡é¡µé¢æ€§èƒ½&emsp;&emsp;ä½†æ˜¯åœ¨é¦–æ¬¡æ¸²æŸ“æˆ–è€…å¾®é‡domæ“ä½œçš„æ—¶å€™ï¼Œè™šæ‹ŸDOMçš„æ€§èƒ½å°±æ›´æ…¢ä¸€äº›ã€‚ é‚£è™šæ‹Ÿ DOM ä¸€å®šå¯ä»¥è§„é¿ XSSå—ï¼Ÿ&emsp;&emsp;è™šæ‹Ÿ DOM å†…éƒ¨ç¡®ä¿äº†å­—ç¬¦è½¬ä¹‰ï¼Œæ‰€ä»¥ç¡®å®å¯ä»¥åšåˆ°è¿™ç‚¹ï¼Œä½† React å­˜åœ¨é£é™©ï¼Œå› ä¸º React ç•™æœ‰ dangerouslySetInnerHTML API ç»•è¿‡è½¬ä¹‰ã€‚ æ²¡æœ‰è™šæ‹Ÿ DOM ä¸èƒ½å®ç°è·¨å¹³å°å—ï¼Ÿ&emsp;&emsp;æ¯”å¦‚ NativeScript æ²¡æœ‰è™šæ‹Ÿ DOM å±‚ ï¼Œå®ƒæ˜¯é€šè¿‡æä¾›å…¼å®¹åŸç”Ÿ API çš„ JS API å®ç°è·¨å¹³å°å¼€å‘ã€‚é‚£è™šæ‹Ÿ DOM çš„ä¼˜åŠ¿åœ¨å“ªé‡Œï¼Ÿ&emsp;&emsp;å®é™…ä¸Šå®ƒçš„ä¼˜åŠ¿åœ¨äºè·¨å¹³å°çš„æˆæœ¬æ›´ä½ã€‚åœ¨ React Native ä¹‹åï¼Œå‰ç«¯ç¤¾åŒºä»è™šæ‹Ÿ DOM ä¸­ä½“ä¼šåˆ°äº†è·¨å¹³å°çš„æ— é™å‰æ™¯ï¼Œæ‰€ä»¥åœ¨åç»­çš„å‘å±•ä¸­ï¼Œéƒ½å€Ÿé‰´äº†è™šæ‹Ÿ DOMã€‚æ¯”å¦‚ï¼šç¤¾åŒºæµè¡Œçš„å°ç¨‹åºåŒæ„æ–¹æ¡ˆï¼Œåœ¨æ„å»ºè¿‡ç¨‹ä¸­ä¼šæä¾›ç±»ä¼¼è™šæ‹Ÿ DOM çš„ç»“æ„æè¿°å¯¹è±¡ï¼Œæ¥æ”¯æ’‘å¤šç«¯è½¬æ¢ã€‚ ç¼ºç‚¹ å†…å­˜å ç”¨è¾ƒé«˜ éš¾ä»¥è¿›è¡Œä¼˜åŒ–","categories":[{"name":"react","slug":"react","permalink":"https://feidom-up.github.io/categories/react/"},{"name":"vue","slug":"react/vue","permalink":"https://feidom-up.github.io/categories/react/vue/"}],"tags":[{"name":"react","slug":"react","permalink":"https://feidom-up.github.io/tags/react/"},{"name":"vue","slug":"vue","permalink":"https://feidom-up.github.io/tags/vue/"}]},{"title":"Serverlessæ˜¯ä»€ä¹ˆ","slug":"Serverlessæ˜¯ä»€ä¹ˆ","date":"2021-01-01T13:59:56.000Z","updated":"2024-08-22T02:26:03.658Z","comments":true,"path":"2021/01/01/Serverlessæ˜¯ä»€ä¹ˆ/","link":"","permalink":"https://feidom-up.github.io/2021/01/01/Serverless%E6%98%AF%E4%BB%80%E4%B9%88/","excerpt":"","text":"æ˜¯ä»€ä¹ˆ å¹¿ä¹‰ä¸Šæ¥è¯´æ˜¯æ„å»ºå’Œè¿è¡Œè½¯ä»¶æ—¶ä¸éœ€è¦å…³å¿ƒæœåŠ¡å™¨çš„ä¸€ç§æ¶æ„æ€æƒ³ã€‚è™½ç„¶ Serverless ç¿»è¯‘è¿‡æ¥æ˜¯ â€œæ— æœåŠ¡å™¨â€ï¼Œä½†è¿™å¹¶ä¸ä»£è¡¨ç€åº”ç”¨è¿è¡Œä¸éœ€è¦æœåŠ¡å™¨ï¼Œè€Œæ˜¯å¼€å‘è€…ä¸éœ€è¦å…³å¿ƒæœåŠ¡å™¨ã€‚è€ŒåŸºäº Serverless æ€æƒ³å®ç°çš„è½¯ä»¶æ¶æ„å°±æ˜¯ Serverless æ¶æ„ã€‚ ç‹­ä¹‰ä¸Šè¯´ ç‹­ä¹‰çš„ Serverless æ˜¯ FaaS å’Œ BaaS çš„ç»„åˆã€‚ FaaSï¼ˆFunction as a Serviceï¼‰ï¼š FaaSæœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªå‡½æ•°è¿è¡Œå¹³å°ï¼Œå‡½æ•°è¿è¡Œæ—¶ï¼Œä½ å¯¹åº•å±‚çš„æœåŠ¡å™¨æ˜¯æ— æ„ŸçŸ¥çš„ï¼ŒFaaS äº§å“ä¼šè´Ÿè´£èµ„æºçš„è°ƒåº¦å’Œè¿ç»´ï¼Œè¿™æ˜¯å®ƒçš„ç‰¹ç‚¹ä¹‹ä¸€ï¼Œä¸ç”¨è¿ç»´ã€‚ FaaS ä¸­çš„å‡½æ•°ä¹Ÿä¸æ˜¯æŒç»­è¿è¡Œçš„ï¼Œè€Œæ˜¯é€šè¿‡äº‹ä»¶è¿›è¡Œè§¦å‘ï¼Œæ¯”å¦‚ HTTP äº‹ä»¶ã€æ¶ˆæ¯äº‹ä»¶ç­‰ï¼Œäº§ç”Ÿäº‹ä»¶çš„æºå¤´å«è§¦å‘å™¨ï¼ŒFaaS å¹³å°ä¼šé›†æˆè¿™äº›è§¦å‘å™¨ï¼Œæˆ‘ä»¬ç›´æ¥ç”¨å°±è¡Œï¼Œè¿™æ˜¯ FaaS çš„ç¬¬äºŒä¸ªç‰¹ç‚¹ï¼Œäº‹ä»¶é©±åŠ¨ã€‚ FaaS çš„ç¬¬ä¸‰ä¸ªç‰¹ç‚¹æ˜¯æŒ‰é‡ä»˜è´¹ã€‚ FaaS äº§å“çš„æ”¶è´¹æ–¹å¼ï¼Œéƒ½æ˜¯æŒ‰ç…§å‡½æ•°æ‰§è¡Œæ¬¡æ•°å’Œæ‰§è¡Œæ—¶æ¶ˆè€—çš„ CPUã€å†…å­˜ç­‰èµ„æºè¿›è¡Œè®¡è´¹çš„ã€‚ FaaS åœ¨è¿è¡Œå‡½æ•°çš„æ—¶å€™ï¼Œä¼šæ ¹æ®å¹¶å‘é‡è‡ªåŠ¨ç”Ÿæˆå¤šä¸ªå‡½æ•°å®ä¾‹ï¼Œå¹¶ä¸”å¹¶å‘ç†è®ºæ˜¯æ²¡æœ‰ä¸Šé™çš„ï¼Œè¿™æ˜¯å®ƒçš„ç¬¬å››ä¸ªç‰¹ç‚¹ï¼Œå¼¹æ€§ä¼¸ç¼©ã€‚ FaaS æ¯æ¬¡æ‰§è¡Œå‡½æ•°æ—¶ï¼Œéƒ½ä¼šåˆå§‹åŒ–ä¸€ä¸ªæ–°çš„è¿è¡Œç¯å¢ƒï¼Œç„¶åä»å¤´å¼€å§‹æ‰§è¡Œæ•´ä¸ªä»£ç ï¼Œè€Œä¸æ˜¯åªæ‰§è¡Œå…¶ä¸­çš„ handler æ–¹æ³•ã€‚æ‰§è¡Œå®Œæ¯•åï¼Œè¿è¡Œç¯å¢ƒå°±ä¼šè¢«é‡Šæ”¾ã€‚è¿™æ ·æ¯æ¬¡å‡½æ•°æ‰§è¡Œï¼Œéƒ½æ˜¯æ–°çš„è¿è¡Œç¯å¢ƒï¼Œè‡ªç„¶ä¸åŒå‡½æ•°ä¹‹é—´å°±æ— æ³•å…±ç”¨ pv è¿™ä¸ªå˜é‡äº†ã€‚FaaS çš„å¦ä¸€ä¸ªç‰¹ç‚¹ï¼Œæ— çŠ¶æ€ã€‚ BaaSï¼ˆBackend as a Serviceï¼‰ ä¸ºäº†è§£å†³åˆ†å¸ƒå¼ä¸­çš„çŠ¶æ€å…±äº«é—®é¢˜ BaaS æœ¬è´¨ä¸Šå°±æ˜¯æŠŠåç«¯åŠŸèƒ½å°è£…èµ·æ¥ï¼Œä»¥æ¥å£çš„å½¢å¼æä¾›æœåŠ¡ã€‚ æ€»åŸºäº FaaS å’Œ BaaS çš„æ¶æ„ï¼Œæ˜¯ä¸€ç§è®¡ç®—å’Œå­˜å‚¨åˆ†ç¦»çš„æ¶æ„ã€‚ è®¡ç®—ç”± FaaS è´Ÿè´£ï¼Œå­˜å‚¨ç”± BaaS è´Ÿè´£ï¼Œè®¡ç®—å’Œå­˜å‚¨ä¹Ÿè¢«åˆ†å¼€éƒ¨ç½²å’Œæ”¶è´¹ã€‚è¿™ä½¿åº”ç”¨çš„å­˜å‚¨ä¸å†æ˜¯åº”ç”¨æœ¬èº«çš„ä¸€éƒ¨åˆ†ï¼Œè€Œæ˜¯æ¼”å˜æˆäº†ç‹¬ç«‹çš„äº‘æœåŠ¡ï¼Œé™ä½äº†æ•°æ®ä¸¢å¤±çš„é£é™©ã€‚è€Œåº”ç”¨æœ¬èº«ä¹Ÿå˜æˆäº†æ— çŠ¶æ€çš„åº”ç”¨ï¼Œæ›´å®¹æ˜“è¿›è¡Œè°ƒåº¦å’Œæ‰©ç¼©å®¹ã€‚ åŸºäº FaaS å’Œ BaaS ï¼Œä½ çš„åº”ç”¨å°±å®ç°äº†è‡ªåŠ¨å¼¹æ€§ä¼¸ç¼©ã€æŒ‰é‡ä»˜è´¹ã€ä¸ç”¨å…³å¿ƒæœåŠ¡å™¨ï¼Œè¿™æ­£æ˜¯ Serverless æ¶æ„çš„å¿…è¦å› ç´ ã€‚æ‰€ä»¥è¯´ç‹­ä¹‰çš„ Serverless æ˜¯ FaaS å’Œ BaaS çš„ç»„åˆã€‚ ä¸å…¶ä»–æ¶æ„çš„åŒºåˆ« PaaS PaaS ï¼ˆå¹³å°å³æœåŠ¡ï¼‰æ˜¯äº‘è®¡ç®—è™šæ‹Ÿæœºæ—¶ä»£çš„ä¸»è¦å½¢æ€ä¹‹ä¸€ã€‚ å®ƒæ˜¯æŒ‡äº‘å‚å•†æä¾›å¼€å‘å·¥å…·ã€ä¾èµ–åº“ã€æœåŠ¡å’Œè¿è¡Œå¹³å°ç­‰èƒ½åŠ›ï¼Œå¼€å‘è€…å¯ä»¥ä¾èµ–è¿™äº›èƒ½åŠ›å°†è‡ªå·±çš„åº”ç”¨ç›´æ¥éƒ¨ç½²åœ¨äº‘å¹³å°ä¸Šï¼Œä¸ç”¨å…³å¿ƒåº•å±‚çš„è®¡ç®—èµ„æºã€ç½‘ç»œã€å­˜å‚¨ç­‰ã€‚è™½ç„¶ä¸Serverless å¾ˆç±»ä¼¼ï¼Œä½†ä¾æ—§å­˜åœ¨ä¸€äº›åŒºåˆ«ã€‚ Kubernetes Kubernetes æ˜¯ä¸€ç§å®¹å™¨ç¼–æ’æŠ€æœ¯ã€‚åœ¨ Kubernetes ä¸­åº”ç”¨è¿è¡Œçš„åŸºæœ¬å•ä½æ˜¯ Podï¼ˆå®¹å™¨ç»„ï¼‰ï¼ŒPod æ˜¯åº”ç”¨åŠè¿è¡Œç¯å¢ƒçš„é›†åˆï¼Œæ‰€ä»¥ä½ ä¹Ÿä¸ç”¨å…³å¿ƒæœåŠ¡å™¨äº†ã€‚åŸºäº Kubernetesï¼Œä½ èƒ½å¾ˆæ–¹ä¾¿åœ°è¿›è¡Œ Pod çš„ç®¡ç†ï¼Œå¹¶ä¸”å®ç°åº”ç”¨çš„å¼¹æ€§ä¼¸ç¼©ã€‚ æ‰€ä»¥ï¼ŒKubernetes æ˜¯ä»‹äº Serverful å’Œ Serverless ä¸­é—´çš„äº§ç‰©ã€‚ Serverless æ˜¯äº‘åŸç”Ÿçš„ä¸€ç§å®ç°ï¼Œäº‘åŸç”Ÿçš„å¦ä¸€ç§å®ç°æ˜¯ Kubernetesã€‚ Serverless PaaS ï¼ˆå¹³å°å³æœåŠ¡ï¼‰ Kubernetes æŒ‰å®é™…ä½¿ç”¨é‡ä»˜è´¹ æŒ‰èµ„æºä»˜è´¹ æŒ‰ç…§èµ„æºæ•°é‡è®¡è´¹ Serverless çš„ä¼˜ç¼ºç‚¹ ä¼˜ç‚¹ï¼šä¸ç”¨è¿ç»´ã€å¼¹æ€§ä¼¸ç¼©ã€èŠ‚çœæˆæœ¬ã€å¼€å‘ç®€å•ã€é™ä½é£é™©ã€æ˜“äºæ‰©å±•ã€‚ ç¼ºç‚¹ï¼š ä¾èµ–ç¬¬ä¸‰æ–¹æœåŠ¡ï¼šä¸€æ—¦ä½ é€‰æ‹©äº†ä¸€ä¸ªäº‘å‚å•†ï¼Œè¦æƒ³ä»ä¸€ä¸ªäº‘ç§»åˆ°å¦ä¸€ä¸ªå°ï¼Œæˆæœ¬å¾ˆé«˜ åº•å±‚ç¡¬ä»¶çš„å¤šæ ·æ€§ï¼šä»£ç ä¾èµ–çš„åœ°å±‚ç¡¬ä»¶å¤šæ ·æ€§ åº”ç”¨æ€§èƒ½ç“¶é¢ˆï¼šå‡½æ•°è¿è¡Œå‰éœ€è¦ç°åˆå§‹åŒ–å‡½æ•°è¿è¡Œç¯å¢ƒï¼Œè¿™ä¸ªè¿‡ç¨‹éœ€è¦æ¶ˆè€—ä¸€å®šæ—¶é—´ã€‚å› ä¸ºå‡½æ•°ä¸æ˜¯æŒç»­â€œåœ¨çº¿â€çš„ï¼Œè€Œæ˜¯éœ€è¦è¿è¡Œçš„æ—¶å€™æ‰å¯åŠ¨ï¼ˆä¸åƒä¼ ç»Ÿåº”ç”¨ï¼ŒæœåŠ¡æ˜¯ä¸€ç›´å¯åŠ¨çš„ï¼‰ã€‚ å‡½æ•°é€šä¿¡æ•ˆç‡ä½ï¼šåœ¨ Serverless åº”ç”¨ä¸­ï¼Œå‡½æ•°ä¸å‡½æ•°ä¹‹é—´å°±å®Œå…¨ç‹¬ç«‹äº†ã€‚å¦‚æœä¸¤ä¸ªå‡½æ•°çš„æ•°æ®æœ‰ä¾èµ–ï¼Œéœ€è¦è¿›è¡Œé€šä¿¡ã€äº¤æ¢æ•°æ®ï¼Œå°±è¦è¿›è¡Œå‡½æ•°ä¸å‡½æ•°ä¹‹é—´çš„è°ƒç”¨ï¼ˆè°ƒç”¨æ–¹å¼æ˜¯ HTTP è°ƒç”¨ï¼‰ã€‚ç›¸æ¯”ä¹‹å‰çš„å†…å­˜è°ƒç”¨ï¼Œæ•°æ®äº¤äº’æ•ˆç‡æ˜¾ç„¶ä½äº†å¾ˆå¤šã€‚è€Œè¿™ä¸ªé—®é¢˜çš„æœ¬è´¨ï¼Œæ˜¯ FaaS è¿˜æ²¡æœ‰æ¯”è¾ƒå¥½çš„æ•°æ®é€šä¿¡åè®®æˆ–æ–¹æ¡ˆã€‚ å¼€å‘è°ƒè¯•å¤æ‚ï¼šServerless æ¶æ„æ­£å¤„äºé£é€Ÿå‘å±•çš„é˜¶æ®µï¼Œå…¶å¼€å‘ã€è°ƒè¯•ã€éƒ¨ç½²å·¥å…·é“¾å¹¶ä¸å®Œå–„ï¼ˆåŸºæœ¬æ˜¯æ¯ä¸ªäº‘å‚å•†å„ç©å„çš„ï¼‰","categories":[],"tags":[{"name":"serverless","slug":"serverless","permalink":"https://feidom-up.github.io/tags/serverless/"}]},{"title":"Reacté¢å‘ç»„ä»¶è·¨å±‚çº§é€šä¿¡","slug":"Reacté¢å‘ç»„ä»¶è·¨å±‚çº§é€šä¿¡","date":"2020-12-31T09:13:02.000Z","updated":"2024-08-22T02:26:03.658Z","comments":true,"path":"2020/12/31/Reacté¢å‘ç»„ä»¶è·¨å±‚çº§é€šä¿¡/","link":"","permalink":"https://feidom-up.github.io/2020/12/31/React%E9%9D%A2%E5%90%91%E7%BB%84%E4%BB%B6%E8%B7%A8%E5%B1%82%E7%BA%A7%E9%80%9A%E4%BF%A1/","excerpt":"","text":"çˆ¶ä¸å­çˆ¶ç»„ä»¶åŒ…è£¹å­ç»„ä»¶ï¼Œçˆ¶ç»„ä»¶å‘å­ç»„ä»¶ä¼ é€’æ•°æ®ã€‚123456789101112131415161718192021222324// å­ const Button = (&#123; text &#125;) =&gt; &#123; &lt;button type=\"button\"&gt;&#123;text&#125;&lt;/button&gt;&#125;// çˆ¶class HomePage extends React.Component &#123;state = &#123; text: \"é»˜è®¤æ–‡æ¡ˆ\"&#125;asyc componentDidMount() &#123; const response = await fetch('/api/buttonText') this.setState(&#123; text: response.buttoText &#125;)&#125; render() &#123; const &#123; text &#125; = this.state return ( &lt;Button text=&#123;text&#125; /&gt; ) &#125;&#125; è¿™æ ·çš„é€šä¿¡æ–¹å¼éå¸¸é€‚ç”¨äºå±•ç¤ºç»„ä»¶ã€‚ å­ä¸çˆ¶å­ç»„ä»¶å­˜åœ¨äºçˆ¶ç»„ä»¶ä¹‹ä¸­ï¼Œå­ç»„ä»¶éœ€è¦å‘çˆ¶ç»„ä»¶ä¼ é€’æ•°æ®ã€‚ å›è°ƒå‡½æ•°ï¼ˆä¸»è¦æ–¹å¼ï¼‰ 1234567891011121314151617181920212223242526272829303132333435363738// å­class FetchPosts extends React.Component &#123; state = &#123; loading: true, data: [] &#125; async componentDidMount() &#123; const response = await fetch('/api/posts') this.setState(&#123; data: response.data, loading: false, &#125;) &#125; render() &#123; if (this.state.loading) &#123; return &lt;Loading /&gt; &#125; return this.props.renderPosts(this.state.data) &#125;&#125;// çˆ¶class HomePage extends React.Component &#123; render() &#123; return ( &lt;FetchPosts renderPosts=&#123;posts =&gt; ( &lt;ul&gt; &#123;posts.map(post =&gt; ( &lt;li key=&#123;post.id&#125;&gt; &lt;h2&gt;&#123;post.title&#125;&lt;/h2&gt; &lt;p&gt;&#123;post.description&#125;&lt;/p&gt; &lt;/li&gt; ))&#125; &lt;/ul&gt; )&#125; /&gt;) &#125;&#125; å®ä¾‹å‡½æ•°ï¼ˆä¸ç¬¦åˆ React çš„è®¾è®¡ç†å¿µï¼Œä¸è¢«æ¨èï¼‰ 1234567891011121314151617181920212223import React from 'react'class HomePage extends React.Component &#123; modalRef = React.createRef() //å®ä¾‹ showModal = () =&#123; this.modalRef.show() &#125; hideModal = () =&gt; &#123; this.modalRef.hide() &#125; render() &#123; const &#123; text &#125; = this.state return ( &lt;&gt; &lt;Button onClick=&#123;this.showModal&#125;&gt;å±•ç¤º Modal &lt;/Button&gt; &lt;Button onClick=&#123;this.hideModal&#125;&gt;éšè— Modal &lt;/Button&gt; &lt;Modal ref=&#123;modalRef&#125; /&gt; &lt;/&gt; /&gt; ) &#125;&#125; å…„å¼Ÿ ä¸¤ä¸ªç»„ä»¶å¹¶åˆ—å­˜åœ¨äºçˆ¶ç»„ä»¶ä¸­ï¼Œæ•°æ®éœ€è¦è¿›è¡Œç›¸äº’ä¼ é€’ï¼Œå¾€å¾€ä¾èµ–å…±åŒçš„çˆ¶ç»„ä»¶è¿›è¡Œä¸­è½¬ã€‚ 12345678910111213141516171819202122232425262728293031323334// å­class Input extends React.Component &#123; handleChanged = (e) =&gt; &#123; this.onChangeText(e.target.text) &#125; render() &#123; return &lt;input onChange=&#123;handleTextChanged&#125; /&gt; &#125;&#125;// å­const StaticText = (&#123; children &#125;) =&gt; &#123; return ( &lt;P&gt;&#123;children&#125;&lt;/p&gt; )&#125;// çˆ¶class HomePage extends React.Component &#123; state = &#123; text: 'é»˜è®¤æ–‡æ¡ˆ' &#125; handleTextChanged = (text) =&gt; &#123; this.setState(&#123; text, &#125;) &#125; render() &#123; return ( &lt;&gt; &lt;Input onChangeText=&#123;this.handleTextChanged&#125; /&gt; &lt;StaticText&gt;this.state.text&lt;/StaticText&gt; &lt;/&gt; ) &#125;&#125; æ— ç›´æ¥å…³ç³» ä¸¤ä¸ªç»„ä»¶å¹¶æ²¡æœ‰ç›´æ¥çš„å…³è”å…³ç³»ï¼Œå¤„åœ¨ä¸€æ£µæ ‘ä¸­ç›¸è·ç”šè¿œçš„ä½ç½®ï¼Œä½†éœ€è¦å…±äº«ã€ä¼ é€’æ•°æ®ã€‚ Context Context ç¬¬ä¸€ä¸ªæœ€å¸¸è§çš„ç”¨é€”å°±æ˜¯åš i18n i18nä½¿ç”¨Context I18nContext1234567import &#123; createContext &#125; from 'react';const I18nContext = createContext(&#123; translate: () =&gt; '', getLocale: () =&gt; &#123;&#125;, setLocale: () =&gt; &#123;&#125;,&#125;);export default I18nContext; ç”¨I18nContextå°è£…ä¸ªç»„ä»¶I18nProvider12345678910111213141516171819202122import React, &#123; useState &#125; from 'react';import I18nContext from './I18nContext';class I18nProvider extends React.Component &#123; state = &#123; locale: '', &#125; render() &#123; const i18n = &#123; translate: key =&gt; this.props.languages[locale][key], getLocale: () =&gt; this.state.locale, setLocale: locale =&gt; this.setState(&#123; loacal, &#125;) &#125; return ( &lt;I18nContext.Provider value=&#123;i18n&#125;&gt; &#123;this.props.children&#125; &lt;/I18nContext.Provider&gt; ) &#125;&#125;export default I18nProvider;\b ç”¨I18nContextå®ç°é«˜é˜¶ç»„ä»¶withI18n123456789101112import React from 'react';import I18nContext from './I18nContext';const withI18n = () =&gt; &#123; return WrappedComponent =&gt; &#123; return (props) =&gt; ( &lt;I18nContext.Consumer&gt; &#123;i18n =&gt; &lt;WrappedComponent &#123;...i18n&#125; &#123;...props&#125; /&gt;&#125; &lt;/I18nContext.Consumer&gt; ) &#125;&#125;;export default withI18n; åœ¨æœ€é¡¶å±‚æ³¨å…¥ Provider123456789101112131415import React from 'react';import ReactDOM from 'react-dom';import App from './App';import &#123; I18nProvider &#125; from './i18n';const locales = [ 'en-US', 'zh-CN' ];const languages = &#123; 'en-US': require('./locales/en-US'), 'zh-CN': require('./locales/zh-CN'),&#125;ReactDOM.render( &lt;I18nProvider locales=&#123;locales&#125; languages=&#123;languages&#125;&gt; &lt;App /&gt; &lt;/I18nProvider&gt;, document.getElementById('root')); åœ¨éœ€è¦çš„åœ°æ–¹ä½¿ç”¨123456789101112const Title = withI18n( (&#123; translate &#125;) =&gt; &#123; return ( &lt;div&gt;&#123;translate('title')&#125;&lt;/div&gt; ) &#125;)const Footer = withI18n( (&#123; setLocale &#125;) =&gt; &#123; return ( &lt;Button onClick=(() =&gt; &#123; setLocale('zh-CN') &#125;) /&gt; ) &#125;) å…¨å±€å˜é‡ å…¨å±€å˜é‡ï¼Œé¡¾åæ€ä¹‰å°±æ˜¯æ”¾åœ¨ Window ä¸Šçš„å˜é‡ã€‚ä½†å€¼å¾—æ³¨æ„çš„æ˜¯ä¿®æ”¹ Window ä¸Šçš„å˜é‡å¹¶ä¸ä¼šå¼•èµ· React ç»„ä»¶é‡æ–°æ¸²æŸ“ã€‚ çŠ¶æ€ç®¡ç†æ¡†æ¶ Flux Redux Mobx","categories":[{"name":"react","slug":"react","permalink":"https://feidom-up.github.io/categories/react/"}],"tags":[{"name":"react","slug":"react","permalink":"https://feidom-up.github.io/tags/react/"}]},{"title":"å¦‚ä½•è®¾è®¡reactç»„ä»¶","slug":"å¦‚ä½•è®¾è®¡reactç»„ä»¶","date":"2020-12-29T11:33:19.000Z","updated":"2024-08-22T02:26:03.663Z","comments":true,"path":"2020/12/29/å¦‚ä½•è®¾è®¡reactç»„ä»¶/","link":"","permalink":"https://feidom-up.github.io/2020/12/29/%E5%A6%82%E4%BD%95%E8%AE%BE%E8%AE%A1react%E7%BB%84%E4%BB%B6/","excerpt":"","text":"ç—›å®šæ€ç—›æ²¡æœ‰å¾ˆå¥½çš„è®¾è®¡æ¨¡å¼ï¼Œå†™ä»£ç å°†ä¼šå‡Œä¹±æ— åºã€‚æ²¡æœ‰æ¨¡å—åˆ’åˆ†ï¼Œä¹Ÿæ²¡æœ‰ç»„åˆçš„æ€æƒ³ã€‚ æŠŠä¸€ä¸ªé¡µé¢å†™æˆä¸€ä¸ªç»„ä»¶ ä¸€ä¸ªç»„ä»¶æœ‰3000è¡Œä»£ç  åŸºäºåœºæ™¯çš„è®¾è®¡åˆ†ç±»å›´ç»•â€œå¦‚ä½•ç»„åˆâ€æ ¹æ®ä¸åŒçš„åœºæ™¯è®¾è®¡ä¸åŒæ¨¡å¼ ç»„ä»¶çš„ç±»åˆ« æ— çŠ¶æ€ç»„ä»¶/å“‘ç»„ä»¶/å±•ç¤ºç»„ä»¶ï¼š åªåšå±•ç¤ºã€ç‹¬ç«‹è¿è¡Œã€ä¸é¢å¤–å¢åŠ åŠŸèƒ½çš„ç»„ä»¶ ä¼˜ç‚¹ï¼š å±•ç¤ºç»„ä»¶çš„å¤ç”¨æ€§æ›´å¼ºï¼Œå¤ç”¨ç‡æ›´é«˜ å†…éƒ¨æ²¡æœ‰ä»»ä½•çš„stateï¼Œåªå—åˆ¶äºå¤–éƒ¨çš„propsä¼ å‚ è¡ç”Ÿå‡ºçš„å…¶ä»–ç»„ä»¶è®¾è®¡ ä»£ç†ç»„ä»¶ï¼šåŸºäºuiæ¡†æ¶çš„å…¶ä»–ç»„ä»¶ï¼Œå¤–é¢å°è£…ä¸€å±‚ï¼Œå®ç°ä»£ç†ç»„ä»¶ã€‚ æ›´æ¢uiæ¡†æ¶æ—¶æ›´æ–¹ä¾¿ã€‚è§£å†³äº†ç»„ä»¶åº“çš„å¼ºä¾èµ–ç‰¹æ€§ï¼Œå®ç°æ— ç—›åˆ‡æ¢ éƒ½å†…èšåœ¨ä»£ç†ç»„ä»¶ä¸­ï¼Œä¿®æ”¹åŸºç¡€ç»„ä»¶çš„å±æ€§æ›´æ–¹ä¾¿ï¼Œä¸ä¼šæ•£è½åœ¨å„å¤„ æ ·å¼ç»„ä»¶ï¼šæœ¬è´¨ä¸Šä¹Ÿæ˜¯ä¸€ç§ä»£ç†ç»„ä»¶ï¼Œä½†æ˜¯åˆç»†åˆ†äº†å¤„ç†æ ·å¼çš„é¢†åŸŸï¼Œå°†å½“å‰çš„å…³æ³¨ç‚¹åˆ†ç¦»åœ¨ç»„ä»¶å†… è‡ªèº«æ‰¿æ¥ä¸šåŠ¡åˆ¤æ–­é€»è¾‘ï¼Œå°è£…äº†uiåº“ä¸­çš„ç»„ä»¶æ¥æ§åˆ¶æ ·å¼ï¼Œæ”¹åŠ¨ä¼šæ›´æ–¹ä¾¿æ›´å‹å¥½ å¸ƒå±€ç»„ä»¶ï¼š åŸºæœ¬è®¾è®¡ä¸æ ·å¼ç»„ä»¶å®Œå…¨ä¸€æ ·ï¼Œå¢åŠ äº†ä¸€ä¸ªå°ä¼˜åŒ– å¸ƒå±€ç»„ä»¶ä¸€èˆ¬ä¸æ ¹æ®çŠ¶æ€æ”¹å˜ï¼Œæ‰€ä»¥å¯ä»¥å°è£…å¸ƒå±€ç»„ä»¶åï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨shouldComponentUpdateå‡½æ•°é˜»æ–­æ¸²æŸ“ï¼Œæå‡æ€§èƒ½ æœ‰çŠ¶æ€ç»„ä»¶/çµå·§ç»„ä»¶ï¼š å¤„ç†ä¸šåŠ¡é€»è¾‘ä¸æ•°æ®çŠ¶æ€çš„ç»„ä»¶ çµå·§ç»„ä»¶æ›´ä¸“æ³¨äºä¸šåŠ¡æœ¬èº«ï¼›çµå·§ç»„ä»¶ä¸€å®šè¦è‡³å°‘åŒ…å«ä¸€ä¸ªçµå·§ç»„ä»¶æˆ–å±•ç¤ºç»„ä»¶ã€‚åŠŸèƒ½æ›´ä¸°å¯Œï¼Œä½†å¤ç”¨ç‡ä½ è¡ç”Ÿå‡ºçš„å…¶ä»–ç»„ä»¶è®¾è®¡ å®¹å™¨ç»„ä»¶ï¼šå‡ ä¹æ²¡æœ‰å¤ç”¨æ€§ï¼Œä¸»è¦åŠŸèƒ½åœ¨æ‹‰å–æ•°æ®å’Œç»„åˆç»„ä»¶ é«˜é˜¶ç»„ä»¶ï¼š Reactä¸­å¤ç”¨ç»„ä»¶çš„é«˜çº§æŠ€æœ¯ï¼ŒåŸºäºReactç»„åˆç‰¹æ€§å½¢æˆçš„è®¾è®¡æ¨¡å¼ é“ç†ç±»ä¼¼å‡½æ•°å¼ç¼–ç¨‹çš„é«˜çº§å‡½æ•°ï¼ˆæ¥æ”¶ä¸€ä¸ªå‡½æ•°ï¼Œè¿”å›ä¸€ä¸ªå‡½æ•°ï¼‰ï¼Œé«˜é˜¶ç»„ä»¶æ¥æ”¶å‚æ•°ä¸ºç»„ä»¶ï¼Œè¿”å›å€¼ä¹Ÿæ˜¯æ–°ä¸€ä¸ªç»„ä»¶ã€‚ å¯æŠ½å–å…¬å…±é€»è¾‘ ç™»é™†æ€çš„åˆ¤æ–­1234567891011121314151617181920212223242526// è£…é¥°å™¨const checkLogin = () =&gt; &#123; return !!localStorage.getItem('token')&#125;// è£…é¥°å™¨å†™æ³•@checkLoginclass UserPage extends React.Component &#123; ...&#125;@checkLoginclass OrderPage extends React.Component &#123; ...&#125;// é«˜é˜¶å‡½æ•°const checkLogin = (WrappedComponent) =&gt; &#123; return (props) =&gt; &#123; return checkLogin() ? &lt;WrappedComponent &#123;...props&#125; /&gt; : &lt;LoginPage /&gt;; &#125;&#125;// å‡½æ•°å†™æ³•class RawUserPage extends React.Component &#123; ...&#125;const UserPage = checkLogin(RawUserPage) é¡µé¢åŸ‹ç‚¹ç»Ÿè®¡123456789101112131415161718192021222324252627282930const trackPageView = (pageName) = &#123; // å‘é€åŸ‹ç‚¹ä¿¡æ¯è¯·æ±‚ ... &#125;const PV = (pageName) =&gt; &#123; return (WrappedComponent) =&gt; &#123; return class Wrap extends Component &#123; componentDidMount() &#123; trackPageView(pageName) &#125; render() &#123; return ( &lt;WrappedComponent &#123;...this.props&#125; /&gt; ); &#125; &#125; &#125;;&#125;@PV('ç”¨æˆ·é¡µé¢')class UserPage extends React.Component &#123; ...&#125;@PV('è´­ç‰©è½¦é¡µé¢')class CartPage extends React.Component &#123; ...&#125;@PV('è®¢å•é¡µé¢')class OrderPage extends React.Component &#123; ...&#125; æ—¢è¦åˆ¤æ–­ç™»é™†æ€ï¼Œåˆè¦åŸ‹ç‚¹ï¼šé“¾å¼è°ƒç”¨ é“¾å¼è°ƒç”¨æ˜¯å‡½æ•°å¼ç¼–ç¨‹é«˜çº§å‡½æ•°çš„ä¸€ç§ä½¿ç”¨åœºæ™¯ã€‚åœ¨é“¾å¼è°ƒç”¨åï¼Œè£…é¥°å™¨ä¼šæŒ‰ç…§ä»å¤–å‘å†…ã€ä»ä¸Šå¾€ä¸‹çš„é¡ºåºè¿›è¡Œæ‰§è¡Œã€‚ 12345678910111213// å‡½æ•°è°ƒç”¨æ–¹å¼class RawUserPage extends React.Component &#123; ...&#125;const UserPage = checkLogin(PV('ç”¨æˆ·é¡µé¢')(RawUserPage))// è£…é¥°å™¨è°ƒç”¨æ–¹å¼@checkLogin@PV('ç”¨æˆ·é¡µé¢')class UserPage extends React.Component &#123; ...&#125; æ¸²æŸ“åŠ«æŒ æ¸²æŸ“åŠ«æŒå¯ä»¥é€šè¿‡æ§åˆ¶ render å‡½æ•°ä¿®æ”¹è¾“å‡ºå†…å®¹ï¼Œå¸¸è§çš„åœºæ™¯æ˜¯æ˜¾ç¤ºåŠ è½½å…ƒç´  1234567891011function withLoading(WrappedComponent) &#123; return class extends WrappedComponent &#123; render() &#123; if(this.props.isLoading) &#123; return &lt;Loading /&gt;; &#125; else &#123; return super.render(); &#125; &#125; &#125;;&#125; é€šè¿‡é«˜é˜¶å‡½æ•°ä¸­ç»§æ‰¿åŸç»„ä»¶çš„æ–¹å¼ï¼ŒåŠ«æŒä¿®æ”¹ render å‡½æ•°ï¼Œç¯¡æ”¹è¿”å›ä¿®æ”¹ï¼Œè¾¾åˆ°æ˜¾ç¤º Loading çš„æ•ˆæœã€‚ é«˜é˜¶ç»„ä»¶çš„ç¼ºç‚¹ ä¸¢å¤±é™æ€å‡½æ•°ï¼šç”±äºè¢«åŒ…è£¹äº†ä¸€å±‚ï¼Œæ‰€ä»¥é™æ€å‡½æ•°åœ¨å¤–å±‚æ˜¯æ— æ³•è·å–çš„ã€‚ 12345678910// UserPage.jsx@PV('ç”¨æˆ·é¡µé¢')export default class UserPage extends React.Component &#123; static getUser() &#123; ... &#125; &#125;// page.jsimport UserPage from './UserPage'UserPage.checkLogin() // è°ƒç”¨å¤±è´¥ï¼Œå¹¶ä¸å­˜åœ¨ã€‚ è§£å†³æ–¹æ¡ˆï¼šåœ¨å¤–éƒ¨å‡½æ•°ä¸­æŠŠå†…éƒ¨å‡½æ•°çš„æ–¹æ³•å¤åˆ¶å‡ºæ¥ï¼šhoist-non-react-statics(ç°æˆçš„åº“) 1234567891011121314151617import hoistNonReactStatics from 'hoist-non-react-statics';const PV = (pageName) =&gt; &#123; return (WrappedComponent) =&gt; &#123; class Wrap extends Component &#123; componentDidMount() &#123; trackPageView(pageName) &#125; render() &#123; return ( &lt;WrappedComponent &#123;...this.props&#125; /&gt; ); &#125; &#125; hoistNonReactStatics(Wrap, WrappedComponent); return Wrap; &#125;;&#125; refs å±æ€§ä¸èƒ½é€ä¼ : ref å±æ€§ç”±äºè¢«é«˜é˜¶ç»„ä»¶åŒ…è£¹äº†ä¸€æ¬¡ï¼Œæ‰€ä»¥éœ€è¦è¿›è¡Œç‰¹æ®Šå¤„ç†æ‰èƒ½è·å–ã€‚React ä¸ºæˆ‘ä»¬æä¾›äº†ä¸€ä¸ªåä¸º React.forwardRef çš„ API æ¥è§£å†³è¿™ä¸€é—®é¢˜ï¼Œä»¥ä¸‹æ˜¯å®˜æ–¹æ–‡æ¡£ä¸­çš„ä¸€ä¸ªæ¡ˆä¾‹ï¼š 1234567891011121314151617181920function withLog(Component) &#123; class LogProps extends React.Component &#123; componentDidUpdate(prevProps) &#123; console.log('old props:', prevProps); console.log('new props:', this.props); &#125; render() &#123; const &#123;forwardedRef, ...rest&#125; = this.props; // å°†è‡ªå®šä¹‰çš„ prop å±æ€§ â€œforwardedRefâ€ å®šä¹‰ä¸º ref return &lt;Component ref=&#123;forwardedRef&#125; &#123;...rest&#125; /&gt;; &#125; &#125; // æ³¨æ„ React.forwardRef å›è°ƒçš„ç¬¬äºŒä¸ªå‚æ•° â€œrefâ€ã€‚ // æˆ‘ä»¬å¯ä»¥å°†å…¶ä½œä¸ºå¸¸è§„ prop å±æ€§ä¼ é€’ç»™ LogPropsï¼Œä¾‹å¦‚ â€œforwardedRefâ€ // ç„¶åå®ƒå°±å¯ä»¥è¢«æŒ‚è½½åˆ°è¢« LogProps åŒ…è£¹çš„å­ç»„ä»¶ä¸Šã€‚ return React.forwardRef((props, ref) =&gt; &#123; return &lt;LogProps &#123;...props&#125; forwardedRef=&#123;ref&#125; /&gt;; &#125;);&#125;// è¿™æ®µä»£ç è¯»èµ·æ¥ä¼šæœ‰ç‚¹å„¿å¤´çš®å‘éº»ï¼Œå®ƒæ­£ç¡®çš„é˜…è¯»é¡ºåºåº”è¯¥æ˜¯ä»æœ€åº•ä¸‹çš„ React.forwardRef éƒ¨åˆ†å¼€å§‹ï¼Œé€šè¿‡ forwardedRef è½¬å‘ ref åˆ° LogProps å†…éƒ¨ã€‚ æ‰€ä»¥ï¼šç»„ä»¶çš„ç›®å½•ç»“æ„1234567// é€šè¿‡ç›®å½•çº§åˆ«å®Œæˆåˆ‡åˆ† src â”œâ”€â”€ components â”‚ â”œâ”€â”€ basic // æœ€åŸºæœ¬çš„å±•ç¤ºç»„ä»¶æ”¾å…¥ basic ç›®å½•ä¸­ å»ºè®®ä½¿ç”¨ç±»ä¼¼ Storybook çš„å·¥å…·è¿›è¡Œç»„ä»¶ç®¡ç†ã€‚ â”‚ â”œâ”€â”€ container //å°†å®¹å™¨ç»„ä»¶æ”¾å…¥ container â”‚ â””â”€â”€ hoc //é«˜é˜¶ç»„ä»¶æ”¾å…¥ hoc ä¸­ â””â”€â”€ pages //å°†é¡µé¢å¤–å±‚ç»„ä»¶æ”¾åœ¨é¡µé¢ç›®å½•ä¸­ Storybookå®˜ç½‘","categories":[{"name":"react","slug":"react","permalink":"https://feidom-up.github.io/categories/react/"}],"tags":[{"name":"react","slug":"react","permalink":"https://feidom-up.github.io/tags/react/"}]},{"title":"reactçš„ç±»ç»„ä»¶å’Œå‡½æ•°ç»„ä»¶","slug":"reactçš„ç±»ç»„ä»¶å’Œå‡½æ•°ç»„ä»¶","date":"2020-12-29T11:01:39.000Z","updated":"2024-08-22T02:26:03.660Z","comments":true,"path":"2020/12/29/reactçš„ç±»ç»„ä»¶å’Œå‡½æ•°ç»„ä»¶/","link":"","permalink":"https://feidom-up.github.io/2020/12/29/react%E7%9A%84%E7%B1%BB%E7%BB%84%E4%BB%B6%E5%92%8C%E5%87%BD%E6%95%B0%E7%BB%84%E4%BB%B6/","excerpt":"","text":"reactçš„æœ€å°å•ä½æ˜¯ç»„ä»¶ ç›¸åŒç‚¹ å®é™…ç”¨é€”æ˜¯ä¸€æ ·çš„ï¼Œéƒ½å¯ä½œä¸ºåŸºç¡€ç»„ä»¶å±•ç¤ºUI åœ¨ç°ä»£æµè§ˆå™¨ä¸­ï¼Œé™¤æç«¯åœºæ™¯ä¸‹ï¼Œç±»ï¼ˆç±»ç»„ä»¶ï¼‰å’Œé—­åŒ…ï¼ˆå‡½æ•°ç»„ä»¶ï¼‰çš„æ€§èƒ½å·®å¼‚ä¸å¤§ åŒºåˆ«ç‚¹ ä»£ç å®ç°æ€æƒ³ ç±»ç»„ä»¶çš„æ ¹åŸºæ˜¯OOPï¼Œé¢å‘å¯¹è±¡ç¼–ç¨‹ å‡½æ•°ç»„ä»¶çš„æ ¹æ®æ˜¯FPï¼Œå‡½æ•°å¼ç¼–ç¨‹ ä½¿ç”¨åœºæ™¯ ç±»ç»„ä»¶ä½¿ç”¨ç”Ÿå‘½å‘¨æœŸ å‡½æ•°ç»„ä»¶ä½¿ç”¨react hookså®ç°ç±»ä¼¼ç”Ÿå‘½å‘¨æœŸçš„èƒ½åŠ› è®¾è®¡æ¨¡å¼ ç±»ç»„ä»¶å¯ä»¥å®ç°ç»§æ‰¿ å‡½æ•°ç»„ä»¶ç¼ºå°‘ç»§æ‰¿èƒ½åŠ› reactå‰ç«¯æ€æƒ³ï¼šç»„åˆä¼˜äºç»§æ‰¿ï¼ˆç»§æ‰¿çš„çµæ´»æ€§å·®ï¼Œç»†èŠ‚å±è”½è¿‡å¤šï¼‰ æ€§èƒ½ä¼˜åŒ– ç±»ç»„ä»¶ä¾é shouldComponentUpdateå‡½æ•°é˜»æ–­æ¸²æŸ“ å‡½æ•°ç»„ä»¶ä¾é React.memo()æ¥ä¼˜åŒ– React.memo å¹¶ä¸æ˜¯é˜»æ–­æ¸²æŸ“ï¼Œè€Œæ˜¯è·³è¿‡æ¸²æŸ“ç»„ä»¶çš„æ“ä½œå¹¶ç›´æ¥å¤ç”¨æœ€è¿‘ä¸€æ¬¡æ¸²æŸ“çš„ç»“æœï¼Œè¿™ä¸ shouldComponentUpdate æ˜¯å®Œå…¨ä¸åŒçš„ã€‚ æœªæ¥è¶‹åŠ¿ åŸºäºhooksçš„åŠ æŒï¼Œreactç¤¾åŒºä¸»æ¨å‡½æ•°ç»„ä»¶ ä¼˜åŠ£æ€§ ç±»ç»„ä»¶ thisçš„æ¨¡ç³Šæ€§ ä¸šåŠ¡é€»è¾‘æ•£è½åœ¨ç”Ÿå‘½å‘¨æœŸä¸­ ç±»ç»„ä»¶ç¼ºä¹æ ‡å‡†çš„æ‹†åˆ†æ–¹å¼ å‡½æ•°ç»„ä»¶ åŸºäºå‡½æ•°å¼ç¼–ç¨‹çš„ä¼˜ç‚¹ï¼ˆè¾“å…¥è¾“å‡ºæ’å®šï¼Œæ— å‰¯ä½œç”¨ç­‰ï¼‰ï¼Œå‡½æ•°ç»„ä»¶æ›´çº¯ç²¹ã€ç®€å•ã€æ˜“æµ‹è¯•ã€‚ é—­åŒ…æ•è·çš„å€¼ä¼˜äºthisçš„æ¨¡ç³Šæ€§ï¼Œæ•è·çš„å€¼æ°¸è¿œæ˜¯ç¡®å®šä¸”å®‰å…¨çš„ æ›´ç»†è…»çš„é€»è¾‘ç»„ç»‡å’Œå¤ç”¨ï¼Œæ›´å¥½çš„ä½œç”¨äºæ—¶é—´åˆ‡ç‰‡ä¸å¹¶å‘æ¨¡å¼ ç”±äºå‡½æ•°ç»„ä»¶çš„æ‰§è¡Œä»æ¥éƒ½æ˜¯è‡ªé¡¶å‘ä¸‹ï¼Œä¾èµ–äºdom diffç®—æ³•ä¸è‡³äºé¢‘ç¹æ¸²æŸ“","categories":[{"name":"react","slug":"react","permalink":"https://feidom-up.github.io/categories/react/"}],"tags":[{"name":"react","slug":"react","permalink":"https://feidom-up.github.io/tags/react/"}]},{"title":"reactç”Ÿå‘½å‘¨æœŸçˆ¬å‘","slug":"reactç”Ÿå‘½å‘¨æœŸçˆ¬å‘","date":"2020-12-28T11:43:41.000Z","updated":"2024-08-22T02:26:03.660Z","comments":true,"path":"2020/12/28/reactç”Ÿå‘½å‘¨æœŸçˆ¬å‘/","link":"","permalink":"https://feidom-up.github.io/2020/12/28/react%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%E7%88%AC%E5%9D%91/","excerpt":"","text":"ç”±äºå‡½æ•°å¼ç»„ä»¶ä¼šä»å¤´æ‰§è¡Œåˆ°å°¾ï¼Œæ‰€ä»¥ç”Ÿå‘½å‘¨æœŸä¸€å®šæ˜¯åœ¨è°ˆè®ºç±»ç»„ä»¶ æ¢³ç†ç”Ÿå‘½å‘¨æœŸçš„æ—¶æœºå’ŒèŒè´£ï¼Œå»ºç«‹æ—¶æœºä¸æ“ä½œçš„å¯¹åº”å…³ç³» ä½¿ç”¨æ–¹å¼ï¼ˆæ—¶æœºæ¢³ç†ï¼‰ï¼š æŒ‚è½½ï¼Œæ›´æ–°ï¼Œå¸è½½ é€‚ç”¨èŒƒå›´ï¼ˆèŒè´£æ¢³ç†ï¼‰ï¼šçŠ¶æ€å˜æ›´ã€é”™è¯¯å¤„ç† æ—¶æœºæ¢³ç†æŒ‚è½½é˜¶æ®µæŒ‚è½½é˜¶æ®µæ˜¯æŒ‡ç»„ä»¶ä»åˆå§‹åŒ–åˆ°å®ŒæˆåŠ è½½çš„è¿‡ç¨‹ã€‚ constructor æ˜¯ç±»é€šç”¨çš„æ„é€ å‡½æ•°ï¼Œå¸¸ç”¨äºåˆå§‹åŒ–ã€‚æ‰€ä»¥åœ¨è¿‡å»ï¼Œconstructor é€šå¸¸ç”¨äºåˆå§‹åŒ– state ä¸ç»‘å®šå‡½æ•°ã€‚ 123456class Com extends React.Component&#123; // constructor react å®˜æ–¹å¼ƒç”¨ constructor(props)&#123; super(props) this.state = &#123;count: 0&#125; &#125; getDerivedStateFromProps å½“propsè¢«ä¼ å…¥ stateå‘ç”Ÿå˜åŒ–æ—¶ fouceUpdateè¢«è°ƒç”¨ æœ€å¸¸è§çš„ä¸€ä¸ªé”™è¯¯æ˜¯è®¤ä¸ºåªæœ‰ props å‘ç”Ÿå˜åŒ–æ—¶ï¼ŒgetDerivedStateFromProps æ‰ä¼šè¢«è°ƒç”¨ï¼Œè€Œå®é™…ä¸Šåªè¦çˆ¶çº§ç»„ä»¶é‡æ–°æ¸²æŸ“æ—¶ï¼ŒgetDerivedStateFromProps å°±ä¼šè¢«è°ƒç”¨ã€‚æ‰€ä»¥æ˜¯å¤–éƒ¨å‚æ•°ï¼Œä¹Ÿå°±æ˜¯ props ä¼ å…¥æ—¶å°±ä¼šå‘ç”Ÿå˜åŒ–ã€‚ä½ å¯èƒ½ä¸éœ€è¦ä½¿ç”¨æ´¾ç”Ÿ state UNSAFE_componentWillMount(componentWillMount) ç”¨äºç»„ä»¶åŠ è½½å‰åšæŸäº›æ“ä½œ å› åœ¨Reactçš„å¼‚æ­¥æ¸²æŸ“æœºåˆ¶ä¸‹ï¼Œä¼šè¢«å¤šæ¬¡è°ƒç”¨ã€‚reactå¼ƒç”¨ egï¼šåŒæ„æ—¶ï¼Œåœ¨æœåŠ¡å™¨ç«¯å’Œå®¢æˆ·ç«¯åŒæ—¶å‘èµ·è¯·æ±‚æ‹‰å–æ•°æ®ï¼Œä¼šåˆ†åˆ«è¢«æ‰§è¡Œä¸€æ¬¡ render çº¯å‡½æ•° è¿”å›jsxè§£æ„ï¼Œæè¿°æ¸²æŸ“å†…å®¹ componentDidMount ç»„ä»¶åŠ è½½å®Œæˆæ—¶åšæŸäº›æ“ä½œï¼Œç”¨äºå‘èµ·è¯·æ±‚ æ›´æ–°é˜¶æ®µæ›´æ–°é˜¶æ®µæ˜¯æŒ‡å¤–éƒ¨ props ä¼ å…¥ï¼Œæˆ–è€… state å‘ç”Ÿå˜åŒ–æ—¶çš„é˜¶æ®µã€‚ UNSAFE_componentWillReceiveProps è¢«æ ‡è®°å¼ƒç”¨ï¼Œå› ä¸ºå…¶åŠŸèƒ½å¯è¢«å‡½æ•° getDerivedStateFromProps æ‰€æ›¿ä»£ã€‚ getDerivedStateFromProps åŒæŒ‚è½½é˜¶æ®µçš„è¡¨ç°ä¸€è‡´ã€‚ shouldComponentUpdate è¯¥æ–¹æ³•é€šè¿‡è¿”å› true æˆ–è€… false æ¥ç¡®å®šæ˜¯å¦éœ€è¦è§¦å‘æ–°çš„æ¸²æŸ“ã€‚å› ä¸ºæ¸²æŸ“è§¦å‘æœ€åä¸€é“å…³å¡ï¼Œæ‰€ä»¥ä¹Ÿæ˜¯æ€§èƒ½ä¼˜åŒ–çš„å¿…äº‰ä¹‹åœ°ã€‚é€šè¿‡æ·»åŠ åˆ¤æ–­æ¡ä»¶æ¥é˜»æ­¢ä¸å¿…è¦çš„æ¸²æŸ“ã€‚ React å®˜æ–¹æä¾›äº†ä¸€ä¸ªé€šç”¨çš„ä¼˜åŒ–æ–¹æ¡ˆï¼Œä¹Ÿå°±æ˜¯ PureComponentã€‚PureComponent çš„æ ¸å¿ƒåŸç†å°±æ˜¯é»˜è®¤å®ç°äº†shouldComponentUpdateå‡½æ•°ï¼Œåœ¨è¿™ä¸ªå‡½æ•°ä¸­å¯¹ props å’Œ state è¿›è¡Œæµ…æ¯”è¾ƒï¼Œç”¨æ¥åˆ¤æ–­æ˜¯å¦è§¦å‘æ›´æ–°ã€‚ UNSAFE_componentWillUpdate åŒæ ·å·²åºŸå¼ƒï¼Œå› ä¸ºåç»­çš„ React å¼‚æ­¥æ¸²æŸ“è®¾è®¡ä¸­ï¼Œå¯èƒ½ä¼šå‡ºç°ç»„ä»¶æš‚åœæ›´æ–°æ¸²æŸ“çš„æƒ…å†µã€‚ render åŒæŒ‚è½½é˜¶æ®µçš„è¡¨ç°ä¸€è‡´ã€‚ getSnapshotBeforeUpdate getSnapshotBeforeUpdate æ–¹æ³•æ˜¯é…åˆ React æ–°çš„å¼‚æ­¥æ¸²æŸ“çš„æœºåˆ¶ï¼Œåœ¨ DOM æ›´æ–°å‘ç”Ÿå‰è¢«è°ƒç”¨ï¼Œè¿”å›å€¼å°†ä½œä¸º componentDidUpdate çš„ç¬¬ä¸‰ä¸ªå‚æ•°ã€‚ 12345678910111213141516171819202122232425262728293031class ScrollingList extends React.Component &#123; constructor(props) &#123; super(props); this.listRef = React.createRef(); &#125; getSnapshotBeforeUpdate(prevProps, prevState) &#123; // Are we adding new items to the list? // Capture the scroll position so we can adjust scroll later. if (prevProps.list.length &lt; this.props.list.length) &#123; const list = this.listRef.current; return list.scrollHeight - list.scrollTop; &#125; return null; &#125; componentDidUpdate(prevProps, prevState, snapshot) &#123; // If we have a snapshot value, we've just added new items. // Adjust scroll so these new items don't push the old ones out of view. // (snapshot here is the value returned from getSnapshotBeforeUpdate) if (snapshot !== null) &#123; const list = this.listRef.current; list.scrollTop = list.scrollHeight - snapshot; &#125; &#125; render() &#123; return ( &lt;div ref=&#123;this.listRef&#125;&gt;&#123;/* ...contents... */&#125;&lt;/div&gt; ); &#125; componentDidUpdate æ­£å¦‚ä¸Šé¢çš„æ¡ˆä¾‹ï¼ŒgetSnapshotBeforeUpdate çš„è¿”å›å€¼ä¼šä½œä¸ºcomponentDidUpdateçš„ç¬¬ä¸‰ä¸ªå‚æ•°ä½¿ç”¨ã€‚ å¸è½½é˜¶æ®µ componentWillUnmount å¸è½½é˜¶æ®µå”¯ä¸€çš„å›è°ƒå‡½æ•°ã€‚ è¯¥å‡½æ•°ä¸»è¦ç”¨äºæ‰§è¡Œæ¸…ç†å·¥ä½œã€‚ä¸€ä¸ªæ¯”è¾ƒå¸¸è§çš„ Bug å°±æ˜¯å¿˜è®°åœ¨ componentWillUnmount ä¸­å–æ¶ˆå®šæ—¶å™¨ï¼Œå¯¼è‡´å®šæ—¶æ“ä½œä¾ç„¶åœ¨ç»„ä»¶é”€æ¯åä¸åœåœ°æ‰§è¡Œã€‚æ‰€ä»¥ä¸€å®šè¦åœ¨è¯¥é˜¶æ®µè§£é™¤äº‹ä»¶ç»‘å®šï¼Œå–æ¶ˆå®šæ—¶å™¨ã€‚ èŒè´£æ¢³ç†å¦‚æœæˆ‘ä»¬çš„ React åº”ç”¨è¶³å¤Ÿå¤æ‚ã€æ¸²æŸ“å±‚çº§è¶³å¤Ÿæ·±æ—¶ï¼Œä¸€æ¬¡é‡æ–°æ¸²æŸ“ï¼Œå°†ä¼šæ¶ˆè€—éå¸¸é«˜çš„æ€§èƒ½ï¼Œå¯¼è‡´å¡é¡¿ç­‰é—®é¢˜ã€‚å…³é”®ç‚¹ï¼š ä»€ä¹ˆæƒ…å†µä¸‹ä¼šè§¦å‘é‡æ–°æ¸²æŸ“ã€‚ æ¸²æŸ“ä¸­å‘ç”ŸæŠ¥é”™åä¼šæ€æ ·ï¼Ÿåˆè¯¥å¦‚ä½•å¤„ç†ï¼Ÿ å‡½æ•°ç»„ä»¶ å‡½æ•°ç»„ä»¶ä»»ä½•æƒ…å†µä¸‹éƒ½ä¼šé‡æ–°æ¸²æŸ“ã€‚å®˜æ–¹æä¾›äº†ä¸€ç§æ–¹å¼ä¼˜åŒ–æ‰‹æ®µï¼Œé‚£å°±æ˜¯ React.memoã€‚React.memo å¹¶ä¸æ˜¯é˜»æ–­æ¸²æŸ“ï¼Œè€Œæ˜¯è·³è¿‡æ¸²æŸ“ç»„ä»¶çš„æ“ä½œå¹¶ç›´æ¥å¤ç”¨æœ€è¿‘ä¸€æ¬¡æ¸²æŸ“çš„ç»“æœï¼Œè¿™ä¸ shouldComponentUpdate æ˜¯å®Œå…¨ä¸åŒçš„ã€‚ 123const MyComponent = React.memo(function MyComponent(props) &#123; /* ä½¿ç”¨ props æ¸²æŸ“ */&#125;); React.Component å¦‚æœä¸å®ç° shouldComponentUpdate å‡½æ•°ï¼Œé‚£ä¹ˆæœ‰ä¸¤ç§æƒ…å†µè§¦å‘é‡æ–°æ¸²æŸ“ã€‚ å½“ state å‘ç”Ÿå˜åŒ–æ—¶ã€‚è¿™ä¸ªå¾ˆå¥½ç†è§£ï¼Œæ˜¯å¸¸è§çš„æƒ…å†µã€‚ å½“çˆ¶çº§ç»„ä»¶çš„ Props ä¼ å…¥æ—¶ã€‚æ— è®º Props æœ‰æ²¡æœ‰å˜åŒ–ï¼Œåªè¦ä¼ å…¥å°±ä¼šå¼•å‘é‡æ–°æ¸²æŸ“ã€‚ React.PureComponent PureComponent é»˜è®¤å®ç°äº† shouldComponentUpdate å‡½æ•°ã€‚æ‰€ä»¥ä»…åœ¨ props ä¸ state è¿›è¡Œæµ…æ¯”è¾ƒåï¼Œç¡®è®¤æœ‰å˜æ›´æ—¶æ‰ä¼šè§¦å‘é‡æ–°æ¸²æŸ“ã€‚ é”™è¯¯è¾¹ç•Œé”™è¯¯è¾¹ç•Œæ˜¯ä¸€ç§ React ç»„ä»¶ï¼Œè¿™ç§ç»„ä»¶å¯ä»¥æ•è·å¹¶æ‰“å°å‘ç”Ÿåœ¨å…¶å­ç»„ä»¶æ ‘ä»»ä½•ä½ç½®çš„ JavaScript é”™è¯¯ï¼Œå¹¶ä¸”ï¼Œå®ƒä¼šæ¸²æŸ“å‡ºå¤‡ç”¨ UIï¼Œå¦‚ä¸‹ React å®˜æ–¹æ‰€ç»™çš„ç¤ºä¾‹ï¼š 123456789101112131415161718192021class ErrorBoundary extends React.Component &#123; constructor(props) &#123; super(props); this.state = &#123; hasError: false &#125;; &#125; static getDerivedStateFromError(error) &#123; // æ›´æ–° state ä½¿ä¸‹ä¸€æ¬¡æ¸²æŸ“èƒ½å¤Ÿæ˜¾ç¤ºé™çº§åçš„ UI return &#123; hasError: true &#125;; &#125; componentDidCatch(error, errorInfo) &#123; // ä½ åŒæ ·å¯ä»¥å°†é”™è¯¯æ—¥å¿—ä¸ŠæŠ¥ç»™æœåŠ¡å™¨ logErrorToMyService(error, errorInfo); &#125; render() &#123; if (this.state.hasError) &#123; // ä½ å¯ä»¥è‡ªå®šä¹‰é™çº§åçš„ UI å¹¶æ¸²æŸ“ return &lt;h1&gt;Something went wrong.&lt;/h1&gt;; &#125; return this.props.children; &#125;&#125; æ— è®ºæ˜¯ Reactï¼Œè¿˜æ˜¯ React Nativeï¼Œå¦‚æœæ²¡æœ‰é”™è¯¯è¾¹ç•Œï¼Œåœ¨ç”¨æˆ·ä¾§çœ‹åˆ°çš„ç°è±¡ä¼šæ˜¯è¿™æ ·çš„ï¼šåœ¨æ‰§è¡ŒæŸä¸ªæ“ä½œæ—¶ï¼Œè§¦å‘äº† Bugï¼Œå¼•å‘äº†å´©æºƒï¼Œé¡µé¢çªç„¶ç™½å±ã€‚ä½†æ¸²æŸ“æ—¶çš„æŠ¥é”™ï¼Œåªèƒ½é€šè¿‡ componentDidCatch æ•è·ã€‚è¿™æ˜¯åœ¨åšçº¿ä¸Šé¡µé¢æŠ¥é”™ç›‘æ§æ—¶ï¼Œæå…¶å®¹æ˜“å¿½ç•¥çš„ç‚¹å„¿ã€‚ å‘ åœ¨ä¸æ°å½“çš„æ—¶æœºè°ƒç”¨ä¸åˆé€‚çš„ä»£ç  åœ¨éœ€è¦è°ƒç”¨æ—¶ï¼Œå¿˜è®°äº†è°ƒç”¨ ä»¥ä¸‹æƒ…å†µå®¹æ˜“é€ æˆç”Ÿå‘½å‘¨æœŸçš„å‘ getDerivedStateFromProps å®¹æ˜“ç¼–å†™åæ¨¡å¼ä»£ç ï¼Œä½¿å—æ§ç»„ä»¶ä¸éå—æ§ç»„ä»¶åŒºåˆ†æ¨¡ç³Šã€‚ componentWillMount åœ¨ React ä¸­å·²è¢«æ ‡è®°å¼ƒç”¨ï¼Œä¸æ¨èä½¿ç”¨ï¼Œä¸»è¦åŸå› æ˜¯æ–°çš„å¼‚æ­¥æ¸²æŸ“æ¶æ„ä¼šå¯¼è‡´å®ƒè¢«å¤šæ¬¡è°ƒç”¨ã€‚æ‰€ä»¥ç½‘ç»œè¯·æ±‚åŠäº‹ä»¶ç»‘å®šä»£ç åº”ç§»è‡³ componentDidMount ä¸­ã€‚ componentWillReceiveProps åŒæ ·è¢«æ ‡è®°å¼ƒç”¨ï¼Œè¢« getDerivedStateFromProps æ‰€å–ä»£ï¼Œä¸»è¦åŸå› æ˜¯æ€§èƒ½é—®é¢˜ã€‚ shouldComponentUpdate é€šè¿‡è¿”å› true æˆ–è€… false æ¥ç¡®å®šæ˜¯å¦éœ€è¦è§¦å‘æ–°çš„æ¸²æŸ“ã€‚ä¸»è¦ç”¨äºæ€§èƒ½ä¼˜åŒ–ã€‚ componentWillUpdate åŒæ ·æ˜¯ç”±äºæ–°çš„å¼‚æ­¥æ¸²æŸ“æœºåˆ¶ï¼Œè€Œè¢«æ ‡è®°åºŸå¼ƒï¼Œä¸æ¨èä½¿ç”¨ï¼ŒåŸå…ˆçš„é€»è¾‘å¯ç»“åˆ getSnapshotBeforeUpdate ä¸ componentDidUpdate æ”¹é€ ä½¿ç”¨ã€‚ å¦‚æœåœ¨ componentWillUnmount å‡½æ•°ä¸­å¿˜è®°è§£é™¤äº‹ä»¶ç»‘å®šï¼Œå–æ¶ˆå®šæ—¶å™¨ç­‰æ¸…ç†æ“ä½œï¼Œå®¹æ˜“å¼•å‘ bugã€‚ å¦‚æœæ²¡æœ‰æ·»åŠ é”™è¯¯è¾¹ç•Œå¤„ç†ï¼Œå½“æ¸²æŸ“å‘ç”Ÿå¼‚å¸¸æ—¶ï¼Œç”¨æˆ·å°†ä¼šçœ‹åˆ°ä¸€ä¸ªæ— æ³•æ“ä½œçš„ç™½å±ï¼Œæ‰€ä»¥ä¸€å®šè¦æ·»åŠ ã€‚","categories":[{"name":"react","slug":"react","permalink":"https://feidom-up.github.io/categories/react/"}],"tags":[{"name":"react","slug":"react","permalink":"https://feidom-up.github.io/tags/react/"}]},{"title":"ä½ å¯èƒ½ä¸éœ€è¦ä½¿ç”¨æ´¾ç”Ÿstate","slug":"ä½ å¯èƒ½ä¸éœ€è¦ä½¿ç”¨æ´¾ç”Ÿstate","date":"2020-12-28T09:14:17.000Z","updated":"2024-08-22T02:26:03.663Z","comments":true,"path":"2020/12/28/ä½ å¯èƒ½ä¸éœ€è¦ä½¿ç”¨æ´¾ç”Ÿstate/","link":"","permalink":"https://feidom-up.github.io/2020/12/28/%E4%BD%A0%E5%8F%AF%E8%83%BD%E4%B8%8D%E9%9C%80%E8%A6%81%E4%BD%BF%E7%94%A8%E6%B4%BE%E7%94%9Fstate/","excerpt":"","text":"ä½ å¯èƒ½ä¸éœ€è¦ä½¿ç”¨æ´¾ç”Ÿstate æ–‡ä¸­åˆ—ä¸¾äº†ä¸¤ç§åæ¨¡å¼çš„ä½¿ç”¨æ–¹å¼ ç›´æ¥å¤åˆ¶propåˆ°state åœ¨propså˜åŒ–åä¿®æ”¹state è¿™ä¸¤ç§ä½¿ç”¨æ–¹å¼é™¤äº†å¢åŠ ä»£ç çš„ç»´æŠ¤æˆæœ¬å¤–ï¼Œæ²¡æœ‰ä»»ä½•çš„å¥½å¤„","categories":[{"name":"react","slug":"react","permalink":"https://feidom-up.github.io/categories/react/"}],"tags":[{"name":"react","slug":"react","permalink":"https://feidom-up.github.io/tags/react/"}]},{"title":"webpackä¼˜åŒ–ä¹‹ä»£ç åˆ†å‰²splitChunck","slug":"webpackä¼˜åŒ–ä¹‹ä»£ç åˆ†å‰²","date":"2020-12-21T06:06:00.000Z","updated":"2024-08-22T02:26:03.662Z","comments":true,"path":"2020/12/21/webpackä¼˜åŒ–ä¹‹ä»£ç åˆ†å‰²/","link":"","permalink":"https://feidom-up.github.io/2020/12/21/webpack%E4%BC%98%E5%8C%96%E4%B9%8B%E4%BB%A3%E7%A0%81%E5%88%86%E5%89%B2/","excerpt":"","text":"ä»£ç åˆ†å‰² splitChunck åŠ¨æ€å¼•ç”¨ é€‚ç”¨åœºæ™¯ï¼šæŠ½ç¦»ç›¸åŒä»£ç åˆ°ä¸€ä¸ªå…±äº«å— è„šæœ¬æ‡’åŠ è½½ï¼Œä½¿å¾—åˆå§‹ä¸‹è½½ä»£ç æ›´å° æ‡’åŠ è½½JSè„šæœ¬æ–¹å¼ CommonJS: require.ensure ES6: åŠ¨æ€importï¼ˆéœ€è¦babelæ”¯æŒï¼Œ@babel/plugin-syntax-dynamic-import) 1234// é…ç½®.babelrc\"plugins\": [ [\"@babel/plugin-syntax-dynamic-import\"],] distä»£ç é€šè¿‡window[â€˜webpackJsonpâ€™]æ¥è·å–å¯¹åº”è„šæœ¬","categories":[{"name":"webpack","slug":"webpack","permalink":"https://feidom-up.github.io/categories/webpack/"}],"tags":[{"name":"å‰ç«¯å·¥ç¨‹åŒ–","slug":"å‰ç«¯å·¥ç¨‹åŒ–","permalink":"https://feidom-up.github.io/tags/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96/"},{"name":"webpack","slug":"webpack","permalink":"https://feidom-up.github.io/tags/webpack/"}]},{"title":"webpackä¼˜åŒ–ä¹‹Scope Hoisting","slug":"webpackä¼˜åŒ–ä¹‹ScopeHoisting","date":"2020-12-21T05:58:20.000Z","updated":"2024-08-22T02:26:03.662Z","comments":true,"path":"2020/12/21/webpackä¼˜åŒ–ä¹‹ScopeHoisting/","link":"","permalink":"https://feidom-up.github.io/2020/12/21/webpack%E4%BC%98%E5%8C%96%E4%B9%8BScopeHoisting/","excerpt":"","text":"webpackæ‰“åŒ…ç°è±¡webpackæ„å»ºåçš„ä»£ç å­˜åœ¨å¤§é‡çš„é—­åŒ…ä»£ç  å¤§é‡å‡½æ•°é—­åŒ…åŒ…è£¹ä»£ç ï¼Œå¯¼è‡´ä½“ç§¯å¢å¤§(æ¨¡å—è¶Šå¤šè¶Šæ˜æ˜¾) è¿è¡Œä»£ç æ—¶åˆ›å»ºçš„å‡½æ•°ä½œç”¨åŸŸå˜å¤šï¼Œå†…å­˜å¼€é”€å˜å¤§ è¢«webpackè½¬æ¢åçš„æ¨¡å—ä¼šå¸¦ä¸Šä¸€å±‚åŒ…è£¹ï¼Œimportä¼šè¢«è½¬æ¢æˆwebpack_require Scope HoistingåŸç† å°†æ‰€æœ‰æ¨¡å—çš„ä»£ç æŒ‰ç…§å¼•ç”¨é¡ºåºæ”¾åœ¨ä¸€ä¸ªå‡½æ•°ä½œç”¨åŸŸä¸­ï¼Œç„¶åé€‚å½“çš„é‡å‘½åä¸€äº›å˜é‡ä»¥é˜²æ­¢å˜é‡åå†²çª å¯¹æ¯”ï¼Œé€šè¿‡scope hoisting å¯ä»¥å‡å°‘å‡½æ•°å£°æ˜ä»£ç å’Œå†…å­˜å¼€é”€ å¼€å¯scope hoisting webpack4 mode ä¸º productioné»˜è®¤å¼€å¯ï¼Œå¿…é¡»æ˜¯ES6è¯­æ³•ï¼ŒcommonJSä¸æ”¯æŒ webpack3 å¢åŠ æ’ä»¶ new webpack.optimize.ModuleConcatenationPlugin()","categories":[{"name":"webpack","slug":"webpack","permalink":"https://feidom-up.github.io/categories/webpack/"}],"tags":[{"name":"å‰ç«¯å·¥ç¨‹åŒ–","slug":"å‰ç«¯å·¥ç¨‹åŒ–","permalink":"https://feidom-up.github.io/tags/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96/"},{"name":"webpack","slug":"webpack","permalink":"https://feidom-up.github.io/tags/webpack/"}]},{"title":"webpackä¼˜åŒ–ä¹‹tree-shaking","slug":"webpackä¼˜åŒ–ä¹‹TreeShaking","date":"2020-12-21T05:57:47.000Z","updated":"2024-08-22T02:26:03.662Z","comments":true,"path":"2020/12/21/webpackä¼˜åŒ–ä¹‹TreeShaking/","link":"","permalink":"https://feidom-up.github.io/2020/12/21/webpack%E4%BC%98%E5%8C%96%E4%B9%8BTreeShaking/","excerpt":"","text":"tree-shaking é™æ€åˆ†æï¼Œä¸æ˜¯åŠ¨æ€åˆ†æ ä»£ç ä¸ä¼šè¢«æ‰§è¡Œåˆ°ï¼Œå°±ä¸ä¼šæ‰“åŒ…åˆ°bound.js å¿…é¡»ä½¿ç”¨ES6çš„è¯­æ³•(importã€export)æ‰æ”¯æŒtree-shakingï¼Œcommonjsæ–¹å¼ä¸æ”¯æŒ webpcké»˜è®¤æ”¯æŒï¼Œåœ¨.babelrcé‡Œé¢è®¾ç½® modules: falseå³å¯ï¼ŒåŒæ—¶mode=productioné»˜è®¤å¼€å¯ tree-shakingåŸç† åªèƒ½ä½œä¸ºæ¨¡å—é¡¶å±‚çš„è¯­å¥å‡ºç° importçš„æ¨¡å—åªèƒ½æ˜¯å­—ç¬¦ä¸²å¸¸é‡ export function() {} import binding æ˜¯ immutable çš„ ä»£ç æ“¦é™¤: uglifyé˜¶æ®µåˆ é™¤æ— ç”¨ä»£ç ","categories":[{"name":"webpack","slug":"webpack","permalink":"https://feidom-up.github.io/categories/webpack/"}],"tags":[{"name":"å‰ç«¯å·¥ç¨‹åŒ–","slug":"å‰ç«¯å·¥ç¨‹åŒ–","permalink":"https://feidom-up.github.io/tags/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96/"},{"name":"webpack","slug":"webpack","permalink":"https://feidom-up.github.io/tags/webpack/"}]},{"title":"webpack4&&ESlint","slug":"webpack4&&ESlint","date":"2020-12-15T08:23:27.000Z","updated":"2024-08-22T02:26:03.662Z","comments":true,"path":"2020/12/15/webpack4&&ESlint/","link":"","permalink":"https://feidom-up.github.io/2020/12/15/webpack4&&ESlint/","excerpt":"","text":"ESlintESLintæ˜¯ä¸€ä¸ªç”¨æ¥è¯†åˆ«ECMAScript å¹¶ä¸”æŒ‰ç…§è§„åˆ™ç»™å‡ºæŠ¥å‘Šçš„ä»£ç æ£€æµ‹å·¥å…·ï¼Œä½¿ç”¨å®ƒå¯ä»¥é¿å…ä½çº§é”™è¯¯å’Œç»Ÿä¸€ä»£ç çš„é£æ ¼ã€‚ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354//.eslint.js// åŒºåˆ†ç”Ÿäº§ç¯å¢ƒã€å¼€å‘ç¯å¢ƒconst _mode = process.env.NODE_ENV || 'production';module.exports = &#123; \"env\": &#123; \"browser\": true, \"es6\": true, \"node\": true, &#125;, \"globals\": &#123; \"$\": true, \"process\": true, \"dirname\": true, &#125;, \"parser\": \"babel-eslint\", \"extends\": \"eslint:recommended\", \"parserOptions\": &#123; \"ecmaFeatures\": &#123; \"jsx\": true, \"legacyDecorators\": true &#125;, \"ecmaVersion\": 2018, \"sourceType\": \"module\" &#125;, \"plugins\": [ \"react\" ], \"rules\": &#123; \"no-console\": \"off\", \"no-debugger\": _mode==='development' ? 0 : 2, \"no-alert\": _mode==='development' ? 0 : 2, // \"no-multi-spaces\": \"error\", \"no-unused-vars\": \"off\", // reactä¸­ä¸é€‚ç”¨ \"no-constant-condition\": \"off\", \"no-fallthrough\": \"off\", // \"keyword-spacing\": [\"error\", &#123; \"before\": true&#125; ], // ä¸ç”Ÿæ•ˆï¼Œå…ˆæ³¨é‡Š // \"indent\": [ // \"error\", // 2 // ], \"linebreak-style\": [ \"error\", \"unix\" ], // \"quotes\": [ // \"error\", // \"single\" // ], \"semi\": [0], \"no-unexpected-multiline\": 0, \"no-class-assign\": 0, &#125;&#125;; æ£€æŸ¥eslint æ–¹å¼ä¸€: å®‰è£…huskyï¼Œå¢åŠ npm scriptï¼Œé€‚åˆè€é¡¹ç›® 12345678910111213\"scripts\": &#123; //\"precommit\": \"eslint --ext .js --ext .jsx src/\", \"precommit\": \"eslint lint-staged\", // å¢é‡æ£€æŸ¥ä¿®æ”¹çš„æ–‡ä»¶ &#125;,\"lint-staged\": &#123; //\"src/**/*.js\": [ // \"eslint --ext .js --ext .jsx\", // \"git add\" //] \"linters\": &#123; \"*.[js,scss]\": [\"eslint --fix\", \"git add\"] &#125;&#125; æ–¹å¼äºŒï¼šwebpackä¸eslintç»“åˆï¼Œæ–°é¡¹ç›® 1234567rules: [ &#123; test: /\\.jsx?$/, exclude: /node_modules/, use: ['babel-loader', 'eslint-loader'] &#125;] å…¶å®æ–°é¡¹ç›®ä¸­ï¼Œå¯ä»¥å°†ä¸¤ç§æ–¹å¼åŒæ—¶ä½¿ç”¨","categories":[{"name":"webpack","slug":"webpack","permalink":"https://feidom-up.github.io/categories/webpack/"}],"tags":[{"name":"å‰ç«¯å·¥ç¨‹åŒ–","slug":"å‰ç«¯å·¥ç¨‹åŒ–","permalink":"https://feidom-up.github.io/tags/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96/"},{"name":"webpack","slug":"webpack","permalink":"https://feidom-up.github.io/tags/webpack/"}]},{"title":"webpack4å®šä½æºä»£ç source-map","slug":"webpack4å®šä½æºä»£ç source-map","date":"2020-12-15T08:22:25.000Z","updated":"2024-08-22T02:26:03.662Z","comments":true,"path":"2020/12/15/webpack4å®šä½æºä»£ç source-map/","link":"","permalink":"https://feidom-up.github.io/2020/12/15/webpack4%E5%AE%9A%E4%BD%8D%E6%BA%90%E4%BB%A3%E7%A0%81source-map/","excerpt":"","text":"å®šä½æºä»£ç  é€šè¿‡ source-map å®šä½åˆ°æºä»£ç  å¼€å‘ç¯å¢ƒï¼šå»ºè®®ä½¿ç”¨ é¦–å…ˆåœ¨æºä»£ç çš„åˆ—ä¿¡æ¯æ˜¯æ²¡æœ‰æ„ä¹‰çš„ï¼Œåªè¦æœ‰è¡Œä¿¡æ¯å°±èƒ½å®Œæ•´çš„å»ºç«‹æ‰“åŒ…å‰åä»£ç ä¹‹é—´çš„ä¾èµ–å…³ç³»ã€‚å› æ­¤ä¸ç®¡æ˜¯å¼€å‘ç¯å¢ƒè¿˜æ˜¯ç”Ÿäº§ç¯å¢ƒï¼Œæˆ‘ä»¬éƒ½ä¼šé€‰æ‹©å¢åŠ cheapåŸºæœ¬ç±»å‹æ¥å¿½ç•¥æ¨¡å—æ‰“åŒ…å‰åçš„åˆ—ä¿¡æ¯å…³è”ã€‚ å…¶æ¬¡ï¼Œä¸ç®¡åœ¨ç”Ÿäº§ç¯å¢ƒè¿˜æ˜¯å¼€å‘ç¯å¢ƒï¼Œæˆ‘ä»¬éƒ½éœ€è¦å®šä½debugåˆ°æœ€æœ€åŸå§‹çš„èµ„æºï¼Œæ¯”å¦‚å®šä½é”™è¯¯åˆ°jsxï¼ŒcoffeeScriptçš„åŸå§‹ä»£ç å¤„ï¼Œè€Œä¸æ˜¯ç¼–è¯‘æˆjsçš„ä»£ç å¤„ï¼Œå› æ­¤ï¼Œä¸èƒ½å¿½ç•¥moduleå±æ€§ å†æ¬¡æˆ‘ä»¬å¸Œæœ›é€šè¿‡ç”Ÿæˆ.mapæ–‡ä»¶çš„å½¢å¼ï¼Œå› æ­¤è¦å¢åŠ source-mapå±æ€§ çº¿ä¸Šç¯å¢ƒå…³é—­ evalï¼šä½¿ç”¨evalåŒ…è£¹æ¨¡å—ä»£ç  cheapï¼šä¸åŒ…å«åˆ—ä¿¡æ¯ inlineï¼šå°†.mapä½œä¸ºDataURIåµŒå…¥ï¼Œä¸å•ç‹¬ç”Ÿæˆ.mapæ–‡ä»¶ moduleï¼šåŒ…å«loaderçš„source source-map ç±»å‹ devtool é¦–æ¬¡æ„å»º äºŒæ¬¡æ„å»º æ˜¯å¦é€‚åˆç”Ÿäº§ç¯å¢ƒ å¯ä»¥å®šä½çš„ä»£ç  (none) +++ +++ yes æœ€ç»ˆè¾“å‡ºçš„ä»£ç  eval +++ +++ no webpackç”Ÿæˆçš„ä»£ç å—ï¼ˆä¸€ä¸ªä¸ªçš„æ¨¡å—ï¼‰ cheap-eval-source-map + ++ no ç»è¿‡loaderè½¬æ¢åçš„ä»£ç ï¼ˆåªèƒ½çœ‹åˆ°è¡Œï¼‰ cheap-module-eval-source-map o ++ no æºä»£ç ï¼ˆåªèƒ½çœ‹åˆ°è¡Œï¼‰ eval-source-map â€“ + no æºä»£ç  cheap-source-map + o yes ç»è¿‡loaderè½¬æ¢åçš„ä»£ç ï¼ˆåªèƒ½çœ‹åˆ°è¡Œï¼‰ cheap-module-source-map o - yes æºä»£ç ï¼ˆåªèƒ½çœ‹åˆ°è¡Œï¼‰ inline-cheap-source-map + o no ç»è¿‡loaderè½¬æ¢åçš„ä»£ç ï¼ˆåªèƒ½çœ‹åˆ°è¡Œï¼‰ inline-cheap-module-source-map o - no æºä»£ç ï¼ˆåªèƒ½çœ‹åˆ°è¡Œï¼‰ source-map â€“ â€“ yes æºä»£ç  inline-source-map â€“ â€“ no æºä»£ç  hidden-source-map â€“ â€“ yes æºä»£ç  123456module.expors = &#123; // å¼€å‘,å› ä¸ºevalçš„rebuildé€Ÿåº¦å¿«ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥åœ¨æœ¬åœ°ç¯å¢ƒä¸­å¢åŠ evalå±æ€§ devtool: 'cheap-module-eval-source-map' // ç”Ÿäº§ devtool: 'cheap-module-source-map'&#125; æœ¬åšå®¢ç¬”è®°å†…å®¹ä¸»è¦æ¥è‡ªäº¬åŸä¸€ç¯å…¬ä¼—å· å‰ç«¯å…ˆé”‹","categories":[{"name":"webpack","slug":"webpack","permalink":"https://feidom-up.github.io/categories/webpack/"}],"tags":[{"name":"å‰ç«¯å·¥ç¨‹åŒ–","slug":"å‰ç«¯å·¥ç¨‹åŒ–","permalink":"https://feidom-up.github.io/tags/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96/"},{"name":"webpack","slug":"webpack","permalink":"https://feidom-up.github.io/tags/webpack/"}]},{"title":"webpack4ä»£ç æ‹†åˆ†","slug":"webpack4ä»£ç æ‹†åˆ†","date":"2020-12-15T08:17:51.000Z","updated":"2024-08-22T02:26:03.662Z","comments":true,"path":"2020/12/15/webpack4ä»£ç æ‹†åˆ†/","link":"","permalink":"https://feidom-up.github.io/2020/12/15/webpack4%E4%BB%A3%E7%A0%81%E6%8B%86%E5%88%86/","excerpt":"","text":"åŸºç¡€åº“åˆ†ç¦»å°†reactã€react-domåŸºç¡€åŒ…é€šè¿‡cdnå¼•å…¥ï¼Œä¸æ‰“å…¥åˆ°bundleä¸­ externals é…ç½®12345678module.exports = &#123; externals: &#123; react: 'React', 'react-dom': 'ReactDOM', 'react-router-dom': 'ReactRouterDOM', mobx: 'mobx' &#125;,&#125; åœ¨htmlæ¨¡ç‰ˆä¸­ scriptæ ‡ç­¾å¼•å…¥å¯¹åº”çš„cdnåœ°å€ html-webpack-externals-pluginï¼ˆæ¨èä½¿ç”¨ï¼‰ åœ¨htmlæ¨¡ç‰ˆä¸­ scriptæ ‡ç­¾å¼•å…¥å¯¹åº”çš„cdnåœ°å€ åœ¨pluginsä¸­é…ç½®1234567891011121314151617181920212223plugins: [ new HtmlWebpackPlugin(), new htmlWebpackExternalsPlugin(&#123; externals: [ &#123; module: 'react', entry: reactçš„cdnåœ°å€, global: 'React' &#125;, &#123; module: 'react-dom', entry: react-domçš„cdnåœ°å€, global: 'ReactDOM' &#125;, &#123; module: 'react-router-dom', entry: react-router-domçš„cdnåœ°å€, global: 'ReactRouterDOM' &#125;, // ... ] &#125;)] webpack4 æ›¿ä»£ CommonsChunckPluginæ’ä»¶ 123456789101112131415161718192021222324252627282930313233343536373839404142434445module.exports = &#123; optimization: &#123; minimize: true, runtimeChunk: &#123; name: 'manifest' &#125;, splitChunks: &#123; chunks: 'async', // asyncå¼‚æ­¥å¼•å…¥åº“è¿›è¡Œåˆ†ç¦»(é»˜è®¤),initialåŒæ­¥å¼•å…¥åº“åˆ†ç¦»ï¼Œallæ‰€æœ‰å¼•å…¥åº“åˆ†ç¦» minSize: 30000, // æŠ½ç¦»å…¬å…±åŒ…æœ€å°çš„å¤§å° maxSize: 0, minChunks: 1, // æœ€å°ä½¿ç”¨çš„æ¬¡æ•° maxAsyncRequests: 5, maxInitialRequests: 3, name: true, cacheGroups: &#123; // æå–åŸºç¡€åº“ï¼Œä¸ä½¿ç”¨CDNçš„æ–¹å¼ //commons: &#123; // test: /(react|react-dom|react-router-dom)/, // name: \"vendors\", // chunks: 'all' //&#125;, // æå–å…¬å…±js commons: &#123; chunks: \"all\", // initial minChunks: 2, maxInitialRequests: 5, minSize: 0, name: \"commons\" &#125;, // vendors: &#123; // test: /[\\\\/]node_modules[\\\\/]/, // priority: -10 // &#125; // åˆå¹¶æ‰€æœ‰css // styles: &#123; // name: 'style', // test: /\\.(css|scss)$/, // chunks: 'all', // minChunks: 1, // enforce: true // &#125; &#125; &#125; &#125;,&#125; æœ¬åšå®¢ç¬”è®°å†…å®¹ä¸»è¦æ¥è‡ªäº¬åŸä¸€ç¯å…¬ä¼—å· å‰ç«¯å…ˆé”‹","categories":[{"name":"webpack","slug":"webpack","permalink":"https://feidom-up.github.io/categories/webpack/"}],"tags":[{"name":"å‰ç«¯å·¥ç¨‹åŒ–","slug":"å‰ç«¯å·¥ç¨‹åŒ–","permalink":"https://feidom-up.github.io/tags/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96/"},{"name":"webpack","slug":"webpack","permalink":"https://feidom-up.github.io/tags/webpack/"}]},{"title":"webpack4å¤šé¡µé¢åº”ç”¨MPA","slug":"webpack4å¤šé¡µé¢åº”ç”¨MPA","date":"2020-12-15T08:17:12.000Z","updated":"2024-08-22T02:26:03.662Z","comments":true,"path":"2020/12/15/webpack4å¤šé¡µé¢åº”ç”¨MPA/","link":"","permalink":"https://feidom-up.github.io/2020/12/15/webpack4%E5%A4%9A%E9%A1%B5%E9%9D%A2%E5%BA%94%E7%94%A8MPA/","excerpt":"","text":"å¤šé¡µé¢åº”ç”¨MPA æ¯ä¸€æ¬¡é¡µé¢è·³è½¬ï¼Œåå°éƒ½ä¼šè¿”å›ä¸€ä¸ªæ–°çš„htmlï¼Œå¤šé¡µåº”ç”¨ å±äºåç«¯æ¸²æŸ“ï¼Œæœ‰æ˜æ˜¾çš„ä¼˜åŠ¿ï¼šSEOå‹å¥½ã€æ¯ä¸ªé¡µé¢æ˜¯è§£è€¦çš„ ç¼ºç‚¹ï¼šæ¯ä¸ªé¡µé¢å¯¹åº”ä¸€ä¸ªentryï¼Œä¸€ä¸ªhtml-webpack-pluginï¼Œï¼ˆè¿™ç§å¤ªéº»çƒ¦äº†ï¼Œæ¯æ¬¡æ–°å¢éƒ½éœ€è¦å†é…ç½®ä¸€æ¬¡ï¼‰ é’ˆå¯¹ä¸Šè¿°ç¼ºç‚¹çš„è§£å†³æ–¹æ¡ˆ123456789101112131415161718192021222324252627282930// ä¾‹å¦‚ ./src/index/index.js ä¸ ./src/search/index.js// path: './src/*/index.js'const setMPA = filenames =&gt; &#123; const entry = &#123;&#125;, htmlWebpackPlugins = []; const entryFiles = glob.sync(path.join(__dirname, filenames)) for(let item of entryFiles)&#123; // (/\\/([a-z\\_\\$]+)\\/index.js$/) const match = item.match(/src\\(.*)/index\\.js$/) const pageName = match &amp;&amp; match[1]; entry[pageName] = item htmlWebpackPlugins.push( new HtmlWebpackPlugin(&#123; template: `src/$&#123;pageName&#125;/index.html`, filename: `$&#123;pageName&#125;.html`, chunks: [\"runtime\", \"common\", pageName], minify: &#123; // .. &#125; &#125;) ) &#125; return &#123; entry, htmlWebpackPlugins &#125;&#125;entry: entryplugin: [//.....].concat(htmlWebpackPlugins) æœ¬åšå®¢ç¬”è®°å†…å®¹ä¸»è¦æ¥è‡ªäº¬åŸä¸€ç¯å…¬ä¼—å· å‰ç«¯å…ˆé”‹","categories":[{"name":"webpack","slug":"webpack","permalink":"https://feidom-up.github.io/categories/webpack/"}],"tags":[{"name":"å‰ç«¯å·¥ç¨‹åŒ–","slug":"å‰ç«¯å·¥ç¨‹åŒ–","permalink":"https://feidom-up.github.io/tags/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96/"},{"name":"webpack","slug":"webpack","permalink":"https://feidom-up.github.io/tags/webpack/"}]},{"title":"webpack4èµ„æºå†…è”","slug":"webpack4èµ„æºå†…è”","date":"2020-12-15T08:16:48.000Z","updated":"2024-08-22T02:26:03.662Z","comments":true,"path":"2020/12/15/webpack4èµ„æºå†…è”/","link":"","permalink":"https://feidom-up.github.io/2020/12/15/webpack4%E8%B5%84%E6%BA%90%E5%86%85%E8%81%94/","excerpt":"","text":"èµ„æºå†…è”æ˜¯å¹²ä»€ä¹ˆèµ„æºå†…è”ï¼šå°±æ˜¯æŠŠæ‰“åŒ…å¥½çš„cssç­‰æ–‡ä»¶ï¼Œåœ¨htmlä¸­æ³¨å…¥è¿™äº›æ–‡ä»¶è·¯å¾„ï¼Œå®ç°å†…è” é¡µé¢æ¡†æ¶çš„åˆå§‹åŒ–ï¼Œæ¯”å¦‚flexible ä¸ŠæŠ¥ç›¸å…³æ‰“ç‚¹ csså†…è”é¿å…é¡µé¢é—ªåŠ¨ï¼ˆç›´æ¥å°†csså†…è”åˆ°htmlæ–‡ä»¶ï¼‰ å†…è”html123// raw-loader@0.5.1 å†…è”htmlç‰‡æ®µï¼Œåœ¨templateä¸­å¼„// å†…è”html&lt;%= require('raw-loader!./meta.html') %&gt; å†…è”javascript123// raw-loaderå†…è”js// åˆå§‹åŒ–è„šæœ¬ï¼Œä¾‹å¦‚flexible&lt;script&gt;&lt;%= require('raw-loader!babel-loader!../node_modules/lib-flexible/flexible.js') %&gt;&lt;/script&gt; å†…è”css æ–¹å¼ä¸€ï¼šstyle-loader 123456789101112131415161718module: &#123; rules: [ &#123; test: /.s?css$/, use: [ &#123; loader: 'style-loader', options: &#123; injectType: 'singletonStyleTag', // å°†æ‰€æœ‰styleæ ‡ç­¾åˆå¹¶æˆä¸€ä¸ª &#125; &#125; 'css-loader' 'postcss-loader', 'sass-loader' ] &#125;, ]&#125;, æ–¹å¼äºŒï¼š html-inline-css-webpack-pluginé¦–å…ˆä½¿ç”¨ mini-css-extract-pluginï¼ˆè€Œé style-loaderï¼‰å°† css æå–æ‰“åŒ…æˆä¸€ä¸ªç‹¬ç«‹çš„ css chunk æ–‡ä»¶ ç„¶åä½¿ç”¨html-webpack-plugin ç”Ÿæˆ html é¡µé¢ æœ€åä½¿ç”¨ html-inline-css-webpack-plugin è¯»å–æ‰“åŒ…å¥½çš„ css chunk å†…å®¹æ³¨å…¥åˆ°é¡µé¢ï¼ŒåŸæœ¬ html-webpack-plugin åªä¼šå¼•å…¥ css èµ„æºåœ°å€ï¼Œç°åœ¨å®ç°äº† css å†…è” 1234567891011121314151617181920212223const MiniCssExtractPlugin = require(\"mini-css-extract-plugin\");const HtmlWebpackPlugin = require('html-webpack-plugin');const HTMLInlineCSSWebpackPlugin = require(\"html-inline-css-webpack-plugin\").default; module.exports = &#123; module: &#123; rules: [&#123; test: /\\.css$/, use: [ MiniCssExtractPlugin.loader, \"css-loader\" ] &#125;] &#125;, plugins: [ new MiniCssExtractPlugin(&#123; filename: \"[name].css\", chunkFilename: \"[id].css\" &#125;), new HtmlWebpackPlugin(), new HTMLInlineCSSWebpackPlugin(), ],&#125; æ–¹å¼ä¸€style-loader VS æ–¹å¼äºŒhtml-inline-css-webpack-plugin style-loaderæ˜¯css-in-jsï¼Œéœ€è¦åŠ è½½jsåæ‰èƒ½å†™å…¥åˆ°styleä¸­ï¼Œæœ‰ä¸€å®šçš„å»¶è¿Ÿæ€§ html-inline-css-webpack-pluginæ˜¯å°†cssæå–å‡ºæ¥ï¼Œå†å†™å…¥åˆ°htmlä¸­ï¼Œhtmlç½‘é¡µæºä»£ç ä¸­å·²ç»å†…è”å¥½cssäº†ï¼Œæ²¡æœ‰å»¶è¿Ÿæ€§äº† è¯·æ±‚å±‚é¢ï¼šå‡å°‘HTTPç½‘ç»œè¯·æ±‚æ•° å°å›¾ç‰‡æˆ–è€…å­—ä½“å†…è”url-loader æœ¬åšå®¢ç¬”è®°å†…å®¹ä¸»è¦æ¥è‡ªäº¬åŸä¸€ç¯å…¬ä¼—å· å‰ç«¯å…ˆé”‹","categories":[{"name":"webpack","slug":"webpack","permalink":"https://feidom-up.github.io/categories/webpack/"}],"tags":[{"name":"å‰ç«¯å·¥ç¨‹åŒ–","slug":"å‰ç«¯å·¥ç¨‹åŒ–","permalink":"https://feidom-up.github.io/tags/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96/"},{"name":"webpack","slug":"webpack","permalink":"https://feidom-up.github.io/tags/webpack/"}]},{"title":"webpackçƒ­æ›´æ–°åŸç†","slug":"webpackçƒ­æ›´æ–°åŸç†","date":"2020-12-15T08:01:43.000Z","updated":"2024-08-22T02:26:03.662Z","comments":true,"path":"2020/12/15/webpackçƒ­æ›´æ–°åŸç†/","link":"","permalink":"https://feidom-up.github.io/2020/12/15/webpack%E7%83%AD%E6%9B%B4%E6%96%B0%E5%8E%9F%E7%90%86/","excerpt":"","text":"webpackçƒ­æ›´æ–°pluginsé…ç½® webpack-dev-server å¼€å¯æœ¬åœ°æœåŠ¡å™¨ï¼Œç›‘å¬æ–‡ä»¶å˜åŒ–åï¼Œçƒ­æ›´æ–°é¡µé¢;ä¸åˆ·æ–°æµè§ˆå™¨è€Œæ˜¯çƒ­æ›´æ–°ï¼Œä¸è¾“å‡ºæ–‡ä»¶ï¼Œè€Œæ˜¯æ”¾åœ¨å†…å­˜ä¸­;é…åˆ new.webpack.HotModuleReplacementPlugin() æˆ– react-hot-loader æ’ä»¶ä½¿ç”¨ 123456789101112131415161718192021222324252627282930313233343536373839404142// package.jsonwebpack-dev-server mode=development -open// configmodule.exports = &#123; devServer: &#123; host: '0.0.0.0', compress: true, port: '3000', contentBase: join(__dirname, '../dist'),//ç›‘å¬çš„ç›®å½•ï¼Œç”¨äºåˆ·æ–°æµè§ˆå™¨ hot: true, overlay: &#123; errors: true, warnings: true &#125;, disableHostCheck: true, publicPath: '/', // è®¾ç½®æ—¶ï¼Œè¦ä¸output.publicPathä¿æŒä¸€è‡´ historyApiFallback: true, // historyApiFallback: &#123; // rewrites: [from: /.*/, to: path.posix.join('/', // 'index.html')], //&#125; proxy: &#123; '/api': 'http://localhost:8081', &#125; //proxy: &#123; // '/api/*': &#123; // target: 'https://xxx.com', // changeOrigin: true, // secure: false, // headers: &#123;&#125;, // onProxyReq: function(proxyReq, req, res) &#123; // proxyReq.setHeader('origin', 'xxx.com'); // proxyReq.setHeader('referer', 'xxx.com'); // proxyReq.setHeader('cookie', 'xxxxx'); // &#125;, // onProxyRes: function(proxyRes, req, res) &#123; // const cookies = proxyRes.header['set-cookie']; // cookies &amp;&amp; buildCookie(cookies) // &#125; // &#125; // &#125; &#125;,&#125; åŸç† Webpack Compile: å°†JSç¼–è¯‘ä¸ºBundle HMR Server: å°†çƒ­æ›´æ–°çš„æ–‡ä»¶è¾“å‡ºç»™ HMR Runtime Bundle server: æä¾›æ–‡ä»¶åœ¨æµè§ˆå™¨çš„è®¿é—® HMR Runtime: ä¼šè¢«æ³¨å…¥åˆ°æµè§ˆå™¨ï¼Œæ›´æ–°æ–‡ä»¶çš„å˜åŒ– bundle.js: æ„å»ºè¾“å‡ºçš„æ–‡ä»¶ HMR: Hot Module Replacement æœ¬åšå®¢ç¬”è®°å†…å®¹ä¸»è¦æ¥è‡ªäº¬åŸä¸€ç¯å…¬ä¼—å· å‰ç«¯å…ˆé”‹","categories":[{"name":"webpack","slug":"webpack","permalink":"https://feidom-up.github.io/categories/webpack/"}],"tags":[{"name":"å‰ç«¯å·¥ç¨‹åŒ–","slug":"å‰ç«¯å·¥ç¨‹åŒ–","permalink":"https://feidom-up.github.io/tags/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96/"},{"name":"webpack","slug":"webpack","permalink":"https://feidom-up.github.io/tags/webpack/"}]},{"title":"reactçŸ¥è¯†Q&A","slug":"reactçŸ¥è¯†Q&A","date":"2020-12-04T03:42:24.000Z","updated":"2024-08-22T02:26:03.660Z","comments":true,"path":"2020/12/04/reactçŸ¥è¯†Q&A/","link":"","permalink":"https://feidom-up.github.io/2020/12/04/react%E7%9F%A5%E8%AF%86Q&A/","excerpt":"","text":"qaçš„å…³é”®åœ¨äºå›ç­”æ—¶æ³¨æ„çŸ¥è¯†å¯æ‰©å±•çš„æ·±åº¦å’Œå¹¿åº¦ï¼ŒåŸºæœ¬ä»â€œæ˜¯ä»€ä¹ˆâ€ï¼Œâ€œä¸ºä»€ä¹ˆâ€ï¼Œâ€œæ€ä¹ˆåšâ€ä¸‰ä¸ªæ–¹é¢æ¥å›ç­” Q:è¯´è¯´ä»€ä¹ˆæ˜¯reactï¼Ÿ é¢˜è§£ï¼šreactçš„è¯ç”ŸèƒŒæ™¯ 2005å¹´ jqueryè¯ç”Ÿï¼Œæµè§ˆå™¨å…¼å®¹æ˜¯å½“æ—¶æœ€å¤§çš„é—®é¢˜ã€‚ä¸ç®—æ¡†æ¶ï¼Œåªç®—æ˜¯å·¥å…·å‡½æ•°åˆé›†ã€‚ä»ä¸èƒ½è§£å†³ä»£ç å¤ç”¨é—®é¢˜å’Œå·¥ç¨‹åŒ–é—®é¢˜ã€‚ 2009å¹´ angularJså¸¦ç€åå°javaå¼€å‘çš„æ€æƒ³æ¨ªç©ºå‡ºä¸–ï¼Œå‰ç«¯é¡¹ç›®å·¥ç¨‹åŒ–åŒå‘ç»‘å®šç»™å½“æ—¶çš„ä¸­å°ç³»ç»Ÿå¸¦æ¥äº†å·¨å¤§çš„ä¾¿åˆ©ï¼Œä½†æ˜¯angularè‡ƒè‚¿ï¼Œéœ€è¦å­¦ä¹ å¾ˆå¤šangularæ¦‚å¿µï¼Œæˆæœ¬é«˜ã€‚ 2010å¹´ backbonejså‡ºç°ï¼Œæ—¢å…¼å®¹jqueryï¼Œåˆæœ‰å¾ˆå¥½çš„mvcå·¥ç¨‹åŒ–ç®¡ç†ï¼Œåœ¨å‰ç«¯é£é¡ä¸€æ—¶ã€‚ 2013å¹´ reactjsè¯ç”Ÿï¼Œreactçš„è™šæ‹Ÿdomï¼Œç»„ä»¶å¼å¼€å‘ï¼Œå®Œç¾çš„å®ç°äº†è§†å›¾å¼€å‘ä¸­ç»„åˆä¼˜äºç»§æ‰¿çš„æ€æƒ³ï¼Œå¾ˆå¤§ç¨‹åº¦ä¸Šè§£å†³äº†å¼€å‘å¤ç”¨çš„é—®é¢˜ 2014å¹´ vueè¯ç”Ÿ A: æ˜¯ä»€ä¹ˆï¼šreactæ˜¯ä¸€ä¸ªç”¨äºæ„å»ºç”¨æˆ·ç•Œé¢çš„javascriptåº“ï¼› ä¼˜ç‚¹: å£°æ˜å¼ã€ç»„ä»¶åŒ–ã€é€šç”¨æ€§ å£°æ˜å¼ï¼šç¼–å†™ä»£ç æ›´ç›´è§‚æ›´ç®€æ´ ç»„ä»¶åŒ–ï¼šæé«˜ä»£ç å¤ç”¨ç‡ï¼Œå®ç°é«˜å†…èšï¼Œä½è€¦åˆçš„è®¾è®¡åŸåˆ™ é€šç”¨æ€§ï¼šä¸€æ¬¡å­¦ä¹ ï¼Œéšå¤„ç¼–å†™ã€‚reactå®ç°äº†è™šæ‹Ÿdomå±‚ï¼Œç¨‹åºä¸ä¼šç›´æ¥æ“ä½œdomï¼Œä¾æ®domdiffå¤„ç†è§†å›¾æ”¹å˜ã€‚æ”¯æŒè™šæ‹Ÿdomå±‚çš„æŠ€æœ¯æ ˆï¼Œéƒ½èƒ½ç”¨reactè¿›è¡Œå‰ç«¯å¤„ç†ã€‚ ç¼ºç‚¹ï¼šreactå¹¶æ²¡æœ‰æ”¯æŒå‰ç«¯å…¨éƒ¨è§£å†³æ–¹æ¡ˆï¼Œè€Œæ˜¯äº¤ç»™ç¤¾åŒºæ¥å®ç°ï¼Œæ‰€ä»¥reactçš„ç¤¾åŒºå¾ˆæ´»è·ƒã€‚ä½†æ˜¯å¸¦æ¥äº†å­¦ä¹ ä¸œè¥¿å¤šçš„é«˜å­¦ä¹ æˆæœ¬ã€‚ Q:è¯´è¯´reactä¸ºä»€ä¹ˆé€‰æ‹©äº†jsxè¯­æ³• é¢˜è§£ï¼šä¹Ÿå°±æ˜¯åœ¨é—®ï¼Œä¸ºä»€ä¹ˆæ²¡æœ‰é€‰æ‹©å…¶ä»–æ–¹æ¡ˆ å…¶ä»–æ–¹æ¡ˆæœ‰ï¼švueåœ¨ç”¨çš„æ¨¡æ¿è¯­æ³•ï¼Œæ¨¡æ¿å­—ç¬¦ä¸²ï¼Œjxonè¯­æ³• A: æ˜¯ä»€ä¹ˆï¼šjsxè¯­æ³•æ˜¯javacsriptçš„æ‰©å±•ã€‚jsxä¼šè¢«babelç¼–è¯‘ä¸ºReact.createElement(),æ˜¯React.createElement()çš„è¯­æ³•ç³–ï¼Œé€šè¿‡ç±»ä¼¼XMLçš„æè¿°æ–¹å¼ï¼Œæå†™å‡½æ•°å¯¹è±¡ã€‚ ä¼˜ç‚¹ï¼šæ›´ç®€æ´æ›´ç›´è§‚ï¼Œæ›´è´´è¿‘åŸç”Ÿhtmlã€‚è´´è¿‘reacâ€œå…³æ³¨ç‚¹åˆ†ç¦»â€çš„æ€æƒ³ã€‚ å¯¹æ¯”å…¶ä»–æ–¹æ¡ˆï¼š æ¨¡æ¿è¯­æ³•ï¼šåˆ†ç¦»äº†æŠ€æœ¯æ ˆï¼Œå¼•å…¥äº†ä¸è¯¥ç§°ä¸ºå…³æ³¨ç‚¹çš„æ¨¡æ¿æ¦‚å¿µï¼šæ¨¡æ¿æŒ‡ä»¤ï¼Œæ¨¡æ¿è¯­æ³•ç­‰ã€‚ä¸ç¬¦åˆreactçš„è®¾è®¡æ€æƒ³ æ¨¡æ¿å­—ç¬¦ä¸²ï¼šä½¿ä»£ç å˜å¾—æ›´å¤æ‚ï¼Œå­—ç¬¦ä¸²ç¼–å†™ï¼Œä¸åˆ©äºè¯­æ³•æç¤º jxonï¼šç±»ä¼¼jsxè¯­æ³•ï¼Œä½†æ˜¯å› ä¸ºå¤§æ‹¬å·çš„è¯­æ³•æç¤ºé—®é¢˜ æ‰€ä»¥reacté€‰æ‹©äº†jsxï¼Œå› ä¸ºjsxä¸å…¶è®¾è®¡ç†å¿µè´´åˆï¼Œä¸éœ€è¦å¼•å…¥è¿‡å¤šçš„æ¦‚å¿µï¼Œå¯¹ä»£ç æç¤ºä¹Ÿå¾ˆå‹å¥½ï¼Œæœ€é€‚åˆreactã€‚ Q:React çš„è¯·æ±‚åº”è¯¥æ”¾åœ¨å“ªé‡Œï¼Œä¸ºä»€ä¹ˆ? å¯¹äºå¼‚æ­¥è¯·æ±‚ï¼Œåº”è¯¥æ”¾åœ¨ componentDidMount ä¸­å»æ“ä½œã€‚ä»æ—¶é—´é¡ºåºæ¥çœ‹ï¼Œé™¤äº† componentDidMount è¿˜å¯ä»¥æœ‰ä»¥ä¸‹é€‰æ‹©ï¼š constructorï¼šå¯ä»¥æ”¾ï¼Œä½†ä»è®¾è®¡ä¸Šè€Œè¨€ä¸æ¨èã€‚constructor ä¸»è¦ç”¨äºåˆå§‹åŒ– state ä¸å‡½æ•°ç»‘å®šï¼Œå¹¶ä¸æ‰¿è½½ä¸šåŠ¡é€»è¾‘ã€‚è€Œä¸”éšç€ç±»å±æ€§çš„æµè¡Œï¼Œconstructor å·²ç»å¾ˆå°‘ä½¿ç”¨äº†ã€‚ componentWillMountï¼šå·²è¢«æ ‡è®°åºŸå¼ƒï¼Œåœ¨æ–°çš„å¼‚æ­¥æ¸²æŸ“æ¶æ„ä¸‹ä¼šè§¦å‘å¤šæ¬¡æ¸²æŸ“ï¼Œå®¹æ˜“å¼•å‘ Bugï¼Œä¸åˆ©äºæœªæ¥ React å‡çº§åçš„ä»£ç ç»´æŠ¤ã€‚ A: æ‰€ä»¥React çš„è¯·æ±‚æ”¾åœ¨ componentDidMount é‡Œæ˜¯æœ€å¥½çš„é€‰æ‹©ã€‚ Qï¼šç¤¾åŒºä¸­å»é™¤ç±»ç»„ä»¶constructorçš„åŸå›  constructorä¹‹å‰ä¸»è¦ç”¨äºåˆå§‹åŒ–ç»„ä»¶çš„ä¸€äº›stateçŠ¶æ€ï¼Œç°åœ¨ç›´æ¥å°†çŠ¶æ€å†™åœ¨é¡¶éƒ¨state = {count: 0}ä¸å†å†™åœ¨constructorä¸­ A: constructor ä¸­ä¸æ¨èå¤„ç†å¤„ç†åˆå§‹åŒ–ä»¥å¤–çš„é€»è¾‘ constructor æœ¬èº«åªæ˜¯classçš„åˆå§‹åŒ–å‡½æ•°ï¼Œå¹¶ä¸å±äºreactç”Ÿå‘½å‘¨æœŸ ç§»é™¤ constructor åï¼Œä»£ç æ›´ç®€æ´ Q:setStateæ˜¯åŒæ­¥æ›´æ–°è¿˜æ˜¯å¼‚æ­¥æ›´æ–° é¢˜è§£ï¼šæ˜¯Aè¿˜æ˜¯Bè¿™ç§é—®é¢˜ï¼Œä¸è¦æƒ³å½“ç„¶çš„å›ç­”ï¼Œè¿™ç§é—®é¢˜å¯èƒ½åœ¨ä¸åŒåœºæ™¯ä¸­æœ‰ä¸åŒçš„é€‰æ‹© å¯èƒ½æ˜¯A å¯èƒ½æ˜¯B Aå’ŒBåŒæ—¶å­˜åœ¨ setStateç”¨äºæ›´æ–°ç»„ä»¶çŠ¶æ€ï¼Œè§¦å‘ç»„ä»¶é‡æ–°æ¸²æŸ“ï¼Œæ›´æ–°è§†å›¾UI å…ˆäº†è§£ä¸‹åˆæˆäº‹ä»¶ åŸºäº äº‹ä»¶å§”æ‰˜ æ€æƒ³, åœ¨React @17.0å‰ Reactç»™document(HTML)æŒ‚ä¸Šäº‹ä»¶ç›‘å¬ Domäº‹ä»¶è§¦å‘åå†’æ³¡åˆ°document(HTML) Reactæ‰¾åˆ°å¯¹åº”çš„ç»„ä»¶ï¼Œé€ å‡ºä¸€ä¸ªåˆæˆäº‹ä»¶ æŒ‰ç»„ä»¶æ ‘æ¨¡æ‹Ÿä¸€éäº‹ä»¶å†’æ³¡æ‰€ä»¥ä¸€ä¸ªé¡µé¢ä¸­åªèƒ½æœ‰ä¸€ä¸ªç‰ˆæœ¬çš„Reactï¼Œå¤šä¸ªç‰ˆæœ¬çš„è¯ï¼Œäº‹ä»¶å°±ä¹±å¥—äº†React@17.0åï¼Œäº‹ä»¶å§”æ‰˜å¯¹è±¡ç”±document(HTML)æ›´æ”¹ä¸ºDomå®¹å™¨(ReactDOM.render()æ‰€è°ƒç”¨çš„èŠ‚ç‚¹)ä¸Š å¼‚æ­¥åœºæ™¯ ä¸€èˆ¬æƒ…å†µä¸‹ï¼ŒsetStateæ˜¯å¼‚æ­¥çš„ã€‚Reactçš„setStateæ‰§è¡Œæ›´åƒä¸€ä¸ªé˜Ÿåˆ—ï¼Œæ‰§è¡Œæ—¶æ ¹æ®é˜Ÿåˆ—ä¸€ä¸€æ‰§è¡Œï¼Œåˆå¹¶stateæ•°æ®ã€‚å®Œæˆåæ‰§è¡Œå›è°ƒï¼Œæ ¹æ®ç»“æœæ›´æ–°è™šæ‹ŸDomè§¦å‘æ¸²æŸ“ ä¸ºä»€ä¹ˆæ˜¯å¼‚æ­¥çš„ï¼Ÿ å®˜æ–¹å›å¤çœ‹è¿™é‡Œ ä¿æŒå†…éƒ¨çš„ä¸€è‡´æ€§ ä¸ºåç»­çš„æ¶æ„å‡çº§å¯ç”¨å¹¶å‘æ›´æ–° åŒæ­¥åœºæ™¯ åœ¨ addEventListenerã€ setTimeoutã€ setIntervalè¿™äº›åŸç”Ÿäº‹ä»¶ä¸­ä¼šåŒæ­¥æ›´æ–° setStateçš„å·¥ä½œåŸç† Aï¼š setState å¹¶éçœŸå¼‚æ­¥ï¼Œåªæ˜¯çœ‹ä¸Šå»åƒå¼‚æ­¥ã€‚åœ¨æºç ä¸­ï¼Œé€šè¿‡ isBatchingUpdates æ¥åˆ¤æ–­ setState æ˜¯å…ˆå­˜è¿› state é˜Ÿåˆ—è¿˜æ˜¯ç›´æ¥æ›´æ–°ï¼Œå¦‚æœå€¼ä¸º true åˆ™æ‰§è¡Œå¼‚æ­¥æ“ä½œï¼Œä¸º false åˆ™ç›´æ¥æ›´æ–°ã€‚ é‚£ä¹ˆä»€ä¹ˆæƒ…å†µä¸‹ isBatchingUpdates ä¼šä¸º true å‘¢ï¼Ÿåœ¨ React å¯ä»¥æ§åˆ¶çš„åœ°æ–¹ï¼Œå°±ä¸º trueï¼Œæ¯”å¦‚åœ¨ React ç”Ÿå‘½å‘¨æœŸäº‹ä»¶å’Œåˆæˆäº‹ä»¶ä¸­ï¼Œéƒ½ä¼šèµ°åˆå¹¶æ“ä½œï¼Œå»¶è¿Ÿæ›´æ–°çš„ç­–ç•¥ã€‚ ä½†åœ¨ React æ— æ³•æ§åˆ¶çš„åœ°æ–¹ï¼Œæ¯”å¦‚åŸç”Ÿäº‹ä»¶ï¼Œå…·ä½“å°±æ˜¯åœ¨ addEventListener ã€setTimeoutã€setInterval ç­‰äº‹ä»¶ä¸­ï¼Œå°±åªèƒ½åŒæ­¥æ›´æ–°ã€‚ ä¸€èˆ¬è®¤ä¸ºï¼Œåšå¼‚æ­¥è®¾è®¡æ˜¯ä¸ºäº†æ€§èƒ½ä¼˜åŒ–ã€å‡å°‘æ¸²æŸ“æ¬¡æ•°ï¼ŒReact å›¢é˜Ÿè¿˜è¡¥å……äº†ä¸¤ç‚¹ã€‚ ä¿æŒå†…éƒ¨ä¸€è‡´æ€§ã€‚å¦‚æœå°† state æ”¹ä¸ºåŒæ­¥æ›´æ–°ï¼Œé‚£å°½ç®¡ state çš„æ›´æ–°æ˜¯åŒæ­¥çš„ï¼Œä½†æ˜¯ propsä¸æ˜¯ã€‚ å¯ç”¨å¹¶å‘æ›´æ–°ï¼Œå®Œæˆå¼‚æ­¥æ¸²æŸ“ã€‚","categories":[{"name":"react","slug":"react","permalink":"https://feidom-up.github.io/categories/react/"}],"tags":[{"name":"react","slug":"react","permalink":"https://feidom-up.github.io/tags/react/"}]},{"title":"webpack4åŸºç¡€","slug":"webpack4åŸºç¡€","date":"2020-11-25T02:16:54.000Z","updated":"2024-08-22T02:26:03.662Z","comments":true,"path":"2020/11/25/webpack4åŸºç¡€/","link":"","permalink":"https://feidom-up.github.io/2020/11/25/webpack4%E5%9F%BA%E7%A1%80/","excerpt":"","text":"å®‰è£…yarn add webpack webpack-cli åŸºç¡€é…ç½® entry ä¾èµ–å…¥å£ 12345entry: '&#123;path&#125;/app.js' //å•å…¥å£ SPAentry: &#123; app: '&#123;path&#125;/app.js', otherapp: '&#123;path&#125;/otherapp.js'&#125; //å¤šå…¥å£ MPA output æŒ‡å®šæ‰“åŒ…åçš„è¾“å‡º 123456output: &#123; path: path.resolve(__diranme,'dist') filename: '[name].js' // å•å…¥å£å¯ä»¥å†™æ­»æ–‡ä»¶åï¼Œå¤šå…¥å£ä¸€å®šè¦ä½¿ç”¨å ä½ç¬¦[name]ï¼Œæ¥è‡ªåŠ¨ç”Ÿæˆå¤šä¸ªæ–‡ä»¶ // filename: '[name].[chunkhash:5]]js' // filename: '[name].[hash]js'&#125; Loaders è§£æå™¨ webpackæœ¬èº«åªæ”¯æŒjså’Œjsonä¸¤ç§æ–‡ä»¶ç±»å‹ï¼Œå…¶ä»–ç±»å‹çš„æ–‡ä»¶éœ€è¦å„ç§Loadersæ”¯æŒï¼Œè½¬åŒ–ä¸ºæœ‰æ•ˆçš„æ¨¡å—ã€‚ æœ¬èº«æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œæ¥å—æºæ–‡ä»¶ä½œä¸ºå‚æ•°ï¼Œè¿”å›è½¬æ¢çš„ç»“æœ å¸¸ç”¨loaders loader ä½œç”¨ ts-loader åŠ è½½è§£ætsæ–‡ä»¶ babel-loader åœ¨webpackä¸­ä½¿ç”¨babelè§£æES6 css-loader/less-loader/scss-loader css/less/sassè§£æå™¨ cstyle-loader å°†æ ·å¼é€šè¿‡ style æ ‡ç­¾ï¼Œæ’å…¥åˆ° head ä¸­ url-loader/file-loader å¤„ç†æ–‡ä»¶ï¼Œå›¾ç‰‡ã€å­—ä½“ã€å¤šåª’ä½“ url-loader å®ç°è¾ƒå°çš„å›¾ç‰‡è½¬æˆbase64ï¼Œæ’å…¥åˆ°ä»£ç ä¸­ï¼Œå½“è¶…è¿‡é™åˆ¶çš„limitåï¼Œä¼šè‡ªåŠ¨é™çº§åˆ°file-loader raw-loader å°†.txtæ–‡ä»¶ä»¥å­—ç¬¦ä¸²çš„å½¢å¼å¯¼å…¥ thread-loader å¤šè¿›ç¨‹æ‰“åŒ…jså’Œcss 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576777879808182// webpack.configmodule: &#123; rules: [ // è§£æES6,appæ ¹ç›®å½•è¦é…ç½®.babelrcï¼Œå¦‚ä¸‹é¢çš„.babelrc &#123;test: /.js?x$/, use: 'babel-loader', exclude: /node_modules/&#125; // exclude é™¤å»node_modulesé‡Œçš„æ–‡ä»¶ // å°†.txtæ–‡ä»¶ä»¥å­—ç¬¦ä¸²çš„å½¢å¼å¯¼å…¥ &#123;test: /.txt$/, use: 'raw-loader'&#125;, // åŒ¹é…sass/cssæ–‡ä»¶ï¼Œç”¨å¯¹åº”çš„loaderå¤„ç†æ–‡ä»¶ &#123; test: /.s?css$/, use: [ isDev ? 'style-loader' : MiniCssExtractPlugin.loader &#123; loader: 'css-loader', options: &#123; importLoaders: 1, // cssæ¨¡å—åŒ–ä½¿ç”¨ modules: &#123; localIdentName: '[path][name]__[local]--[hash:base64:5]' &#125; &#125; &#125;, // é¢„å¤„ç†å™¨, autoprefixer(éœ€è¦å®‰è£…) &#123; loader: 'postcss-loader', options: &#123; plugins: () =&gt; &#123; require('autoprefixer')(&#123; browsers: ['last 2 version', '&gt;1%', 'ios7'] &#125;) &#125; &#125; &#125;, 'sass-loader', // pxè‡ªåŠ¨è½¬rem &#123; loader: 'px2rem-loader', options: &#123; remUnit: 75, // ä¸€ä¸ªremç­‰äºå¤šå°‘px remPrecision: 8 // pxè½¬æ¢æˆremçš„å°æ•°ä½ &#125; &#125; ], include: [], exclude: [ Root('src/components') ] &#125;, // &#123; test: /\\.(png|jpg|jpeg|gif|eot|woff|woff2|ttf|svg|otf)$/, use: [ &#123; loader: 'url-loader', options: &#123; limit: 10 * 1024, // 10k name: isDev ? 'images/[name].[ext]' : 'images/[name].[hash.[ext]', publicPath: idDev ? '/' : 'cdnåœ°å€', &#125;, &#125;, // prductionï¼Œç”¨äºå›¾ç‰‡å‹ç¼© &#123; loader: 'image-webpack-loader', options: &#123; bypassOnDebug: true &#125; &#125; ] &#125;, ]&#125;// .babelrc&#123; \"presets\": [ \"@babel/preset-env\", \"@babel/preset-react\" ], \"plugins\": [ // å„ç§æ’ä»¶ \"@babel/propsoal-class-properties\" ]&#125; plugins æ’ä»¶ æ’ä»¶ç”¨äºbundleæ–‡ä»¶çš„ä¼˜åŒ–ï¼Œèµ„æºç®¡ç†å’Œç¯å¢ƒå˜é‡æ³¨å…¥ï¼Œä½œç”¨äºæ•´ä¸ªæ„å»ºè¿‡ç¨‹ webpack-dev-server çƒ­æ›´æ–° è¯¦æƒ…è¯·å…³æ³¨webpackçƒ­æ›´æ–°åŸç† webpack-dev-middleware å°†webpackè¾“å‡ºæ–‡ä»¶ä¼ è¾“ç»™æœåŠ¡å™¨ï¼Œé€‚ç”¨äºçµæ´»çš„å®šåˆ¶åœºæ™¯ 123456789101112const express = requrie('express')const webpack = require('webpack')const webpackDevMiddleware = requrie('webpack-dev-middleware')const app = express()const config = require('./webpack.config.js')const compiler = webpack(config)app.use(webpackDevMiddleware(compiler, &#123; publicPath: config.output.publicPath&#125;))app.listen(3000) mini-css-extract-pluginå’Œoptimize-css-assets-webpack-plugin æå–cssï¼Œå»ºè®®ä½¿ç”¨contenthash 1234567891011121314151617181920212223242526272829303132333435363738394041424344module: &#123; rules: [ &#123; test: /.s?css$/, use: [ isDev ? 'style-loader' : iniCssExtractPlugin.loader &#123; loader: 'css-loader', options: &#123; importLoaders: 1, // cssæ¨¡å—åŒ–ä½¿ç”¨ modules: &#123; localIdentName: '[path][name]__[local]--[hash:base64:5]' &#125; &#125; &#125;, 'postcss-loader', 'sass-loader' ] &#125;, ] &#125;, plugins: [ // æå–css new MiniCssExtractPlugin(&#123; filename: 'styles/[name].[contenthash:5].css', &#125;), // å‹ç¼©css new OptimizeCSSAssetsPlugin(&#123; assetNameRegExp: /\\.css$/g, cssProcessor: require(\"cssnano\"),//éœ€è¦å®‰è£…cssnano cssProcessorPluginOptions: &#123; preset: [ 'default', &#123; discardComments: &#123; removeAll: true &#125; &#125; ] &#125;, canPrint: true &#125;), ] html-webpack-plugin 123456789101112131415161718192021plugins: [ new HtmlWebpackPlugin(&#123; // è‡ªå®šä¹‰å‚æ•°titleä¼ é€’åˆ°htmlä¸­ // htmlä¸­ä½¿ç”¨&lt;title&gt;&lt;%= htmlWebpackPlugin.options.title %&gt;&lt;/title&gt; // &lt;script&gt;let number = &lt;%= htmlWebpackPlugin.options.number %&gt;&lt;script&gt; number: 1, title: 'äº¬ç¨‹ä¸€ç¯', filename: 'index.html', // chunks: ['index'] //ç”¨äºå¤šé¡µé¢ï¼Œä½¿ç”¨å“ªäº›chunk template: resolve(__dirname, '/src/index.html'), minify: &#123; minifyJS: true, minifyCSS: true, removeComments: true, collapseWhitespace: true, preserveLineBreak: false, removeAttributeQuotes: true, removeComments: false &#125; &#125;),] clean-webpack-plugin æˆ–è€…ä½¿ç”¨ rimraf dist123plugins: [ new CleanWebpackPlugin()] mode ç”¨æ¥æŒ‡å®šå½“å‰æ„å»ºç¯å¢ƒ developmentã€production å’Œ none è®¾ç½® mode å¯ä»¥ä½¿ç”¨ wepackå†…ç½®å‡½æ•°ï¼Œå†…éƒ¨è‡ªåŠ¨å¼€å¯ä¸€äº›é…ç½®é¡¹ï¼Œé»˜è®¤å€¼ä¸º production å†…ç½®åŠŸèƒ½developmentï¼šprocess.env.NODE_ENVä¸ºdevelopment,å¼€å¯NamedChunksPlugin å’Œ NameModulesPluginè¿™ä¸¤ä¸ªæ’ä»¶ç”¨äºçƒ­æ›´æ–°ï¼Œæ§åˆ¶å°æ‰“å°è·¯å¾„produtionï¼šprocess.env.NODE_ENVä¸ºprodution.å¼€å¯ FlagDependencyUsagePluginã€ModuleConcatenationPluginã€NoEmitOnErrorsPluginï¼ŒOccurrentceOrderPluginã€SideEffectsFlagPluginç­‰noneï¼šä¸å¼€å¯ä»»ä½•ä¼˜åŒ–é€‰é¡¹ watch æ–‡ä»¶ç›‘å¬å¯ä»¥åœ¨webpackå‘½ä»¤ååŠ ä¸Š â€“watch å‚æ•°ï¼Œæˆ–åœ¨webpack.configä¸­è®¾ç½®watch:trueã€‚ åŸç†ï¼šè½®è¯¢åˆ¤æ–­æ–‡ä»¶çš„æœ€åç¼–è¾‘æ—¶é—´æ˜¯å¦å˜åŒ–12345678910111213module.exports = &#123; // é»˜è®¤falseï¼Œä¸å¼€å¯ watch: true, // åªæœ‰å¼€å¯æ—¶ï¼ŒwatchOptionsæ‰æœ‰æ„ä¹‰ watchOptions: &#123; // å¿½ç•¥ï¼Œæ”¯æŒæ­£åˆ™ ignored: /node_modules/, // ç›‘å¬åˆ°å˜åŒ–åç­‰300mså†æ‰§è¡Œï¼Œé»˜è®¤300ms aggregateTimeout: 300, // æ€•ä¹±æ–‡ä»¶æ˜¯å¦å˜åŒ–æ˜¯é€šè¿‡ä¸åœè¯¢é—®ç³»ç»ŸæŒ‡å®šæ–‡ä»¶æœ‰æ²¡å˜åŒ–å®ç°çš„ï¼Œé»˜è®¤æ¯ç§’1000æ¬¡ poll: 1000 &#125;&#125; æ–‡ä»¶æŒ‡çº¹ æ‰“åŒ…åè¾“å‡ºæ–‡ä»¶ååç¼€ï¼Œä¹Ÿå°±æ˜¯hashå€¼ hashï¼šå’Œæ•´ä¸ªé¡¹ç›®æ„å»ºç›¸å…³ï¼Œåªè¦é¡¹ç›®ä¸­æœ‰ä¸€ä¸ªæ–‡ä»¶ä¿®æ”¹ï¼Œæ•´ä¸ªé¡¹ç›®ä¸­çš„æ–‡ä»¶hashéƒ½ä¼šä¿®æ”¹æˆç»Ÿä¸€çš„ä¸€ä¸ª chunkhashï¼šå’Œwebpckæ‰“åŒ…çš„chunkæœ‰å…³ï¼Œä¸åŒçš„entryä¼šç”Ÿæˆä¸åŒçš„chunkhashå€¼ï¼ˆé€‚ç”¨äºjsæ–‡ä»¶ï¼‰ contenthashï¼šæ ¹æ®æ–‡ä»¶å†…å®¹å®šä¹‰hashï¼Œæ–‡ä»¶å†…å®¹ä¸å˜ï¼Œåˆ™contenthashä¸å˜ï¼Œç”¨äºæ‰¹é‡æ›´æ–°ï¼ˆé€‚ç”¨äºcssæ–‡ä»¶ï¼‰ ä¼˜åŒ–å‘½ä»¤è¡Œæ—¥å¿— ç»Ÿè®¡ä¿¡æ¯ statsï¼Œwebpackå±æ€§ï¼Œè¿™ç§æ–¹å¼ä¸å¥½ error-onlyï¼šå€¼å‘ç”Ÿé”™è¯¯æ—¶è¾“å‡º minimalï¼šåªåœ¨å‘ç”Ÿé”™è¯¯æˆ–æœ‰æ–°çš„ç¼–è¯‘æ—¶è¾“å‡º noneï¼šæ²¡æœ‰è¾“å‡º normalï¼šæ ‡å‡†è¾“å‡ºï¼Œé»˜è®¤ verboseï¼šå…¨éƒ¨è¾“å‡º123456789// developmentdevServer: &#123; // ..... stats: 'errors-only'&#125;// productionmodule.exports = &#123; stats: 'errors-only'&#125; statsç»“åˆfriendly-errors-webpack-pluginï¼ˆæ¨èï¼‰1234plugins: [ new FriendlyErrorsPlugin()],stats: 'errors-only' æ„å»ºå¼‚å¸¸å’Œä¸­æ–­å¤„ç† wepback4ä¹‹å‰çš„ç‰ˆæœ¬æ„å»ºå¤±è´¥ä¸ä¼šè·‘å‡ºé”™è¯¯ç  nodeä¸­çš„process.exitè§„èŒƒ 0 è¡¨ç¤ºæˆåŠŸå®Œæˆï¼Œå›è°ƒå‡½æ•°ä¸­ï¼Œerr ä¸º null é0 è¡¨ç¤ºæ‰§è¡Œå¤±è´¥ï¼Œå›è°ƒå‡½æ•°ä¸­ï¼Œerr ä¸ä¸ºç©ºï¼Œerr.codeå°±æ˜¯ä¼ ç»™exitçš„æ•°å­— ä¸»åŠ¨æ•è·é”™è¯¯ï¼Œå¹¶å¤„ç†æ„å»ºé”™è¯¯ å†™ä¸ªæ’ä»¶ï¼Œcompiler åœ¨æ¯æ¬¡æ„å»ºç»“æŸåä¼šå‡ºå‘doneè¿™ä¸ªhook 12345678910111213plugins: [ function() &#123; // webpack3 this.plugin('done', (stats) =&gt; &#123;&#125;) // webpack4 this.hooks.done.tap('done', (stats) =&gt; &#123; if (stats.compilation.errors &amp;&amp; stats.compilation.errors.length &amp;&amp; process.argv.indexOf('--watch') == -1) &#123; console.log('build error'); // dosomething process.exit(1); &#125; &#125;) &#125; ] æœ¬åšå®¢ç¬”è®°å†…å®¹ä¸»è¦æ¥è‡ªäº¬åŸä¸€ç¯å…¬ä¼—å· å‰ç«¯å…ˆé”‹","categories":[{"name":"webpack","slug":"webpack","permalink":"https://feidom-up.github.io/categories/webpack/"}],"tags":[{"name":"å‰ç«¯å·¥ç¨‹åŒ–","slug":"å‰ç«¯å·¥ç¨‹åŒ–","permalink":"https://feidom-up.github.io/tags/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96/"},{"name":"webpack","slug":"webpack","permalink":"https://feidom-up.github.io/tags/webpack/"}]},{"title":"vueå®šä¹‰å…¨å±€æ–¹æ³•","slug":"vueå®šä¹‰å…¨å±€æ–¹æ³•","date":"2020-11-05T00:34:48.000Z","updated":"2024-08-22T02:26:03.661Z","comments":true,"path":"2020/11/05/vueå®šä¹‰å…¨å±€æ–¹æ³•/","link":"","permalink":"https://feidom-up.github.io/2020/11/05/vue%E5%AE%9A%E4%B9%89%E5%85%A8%E5%B1%80%E6%96%B9%E6%B3%95/","excerpt":"","text":"ä¸€ã€å°†æ–¹æ³•æŒ‚åœ¨åˆ°vueåŸå‹(Vue.prototype)ä¸Š å®šä¹‰ï¼š 1234567// global.jsconst Func = ()=&gt;&#123; console.log('global')&#125;export default &#123; Func&#125; åœ¨main.jsä¸­é…ç½® 123456// main.jsimport Vue from 'vue'import global from '@/global'object.keys(global).forEach((key)=&gt;&#123; Vue.prototype['$global' + key] = global[key]&#125;) ä½¿ç”¨ 12345export default &#123; mounted()&#123; this.$globalFunc() &#125;&#125; ç¼ºç‚¹ï¼Œè°ƒç”¨çš„æ—¶å€™ï¼Œæ²¡æœ‰æ–¹æ³•æç¤º äºŒã€å…¨å±€æ··å…¥mixin å®šä¹‰ï¼š12345678910// mixin.jsconst mixin = &#123; methods: &#123; func()&#123; console.log('global') &#125;, ... &#125;&#125;export default mixin åœ¨main.jsä¸­é…ç½®1234// main.jsimport Vue from 'vue'import mixin from '@/mixin'Vue.mixin(mixin) åœ¨vueæ–‡ä»¶ä¸­ä½¿ç”¨12345export default &#123; mounted()&#123; this.func() &#125;&#125; mixiné‡Œçš„methodsä¼šå’Œåˆ›å»ºçš„æ¯ä¸ªå•æ–‡ä»¶ç»„ä»¶åˆå¹¶ï¼Œè°ƒç”¨æ–¹æ³•æ—¶æœ‰æç¤º ä¸‰ã€ä½¿ç”¨Plugin Vue.useçš„å®ç°æœ¬èº«æ²¡æœ‰æŒ‚è½½åŠŸèƒ½ï¼Œåªæ˜¯è§¦å‘äº†æ’ä»¶çš„installæ–¹æ³•ï¼Œæœ¬è´¨ä¸Šè¿˜æ˜¯ä½¿ç”¨äº†Vue.prototype å®šä¹‰ï¼š 123456789101112// plugin.jsfunction func()&#123; console.log('global')&#125;const plugin = &#123; // installæ˜¯pluginä¸­é»˜è®¤çš„æ–¹æ³• // å½“å¤–ç•Œåœ¨useè¿™ä¸ªç»„ä»¶æˆ–å‡½æ•°çš„æ—¶å€™ï¼Œå°±ä¼šè°ƒç”¨æœ¬èº«çš„installæ–¹æ³•ï¼ŒåŒæ—¶ä¼ å…¥ä¸€ä¸ªVueè¿™ä¸ªç±»çš„å‚æ•° install: function(Vue)&#123; Vue.prototype.$pluginGlobalFunc = func &#125;&#125;export default plugin åœ¨main.jsä¸­é…ç½® 1234// main.jsimport Vue from 'vue'import plugin from '@/plugin'Vue.use(plugin) åœ¨vueæ–‡ä»¶ä¸­ä½¿ç”¨ 12345export default &#123; mounted()&#123; this.$pluginGlobalFunc() &#125;&#125; mixiné‡Œçš„methodsä¼šå’Œåˆ›å»ºçš„æ¯ä¸ªå•æ–‡ä»¶ç»„ä»¶åˆå¹¶ï¼Œè°ƒç”¨æ–¹æ³•æ—¶æœ‰æç¤º å››ä»»æ„vueæ–‡ä»¶ä¸­å†™å…¨å±€å‡½æ•°12345678// åˆ›å»ºå…¨å±€æ–¹æ³•this.$root.$on('func', function()&#123; console.log('global');&#125;);// é”€æ¯å…¨å±€æ–¹æ³•this.$root.$off('func');// è°ƒç”¨å…¨å±€æ–¹æ³•this.$root.$emit('func'); æœ¬ç« å†…å®¹ä¸»è¦æ¥è‡ªäº¬åŸä¸€ç¯","categories":[{"name":"vue","slug":"vue","permalink":"https://feidom-up.github.io/categories/vue/"}],"tags":[{"name":"vue","slug":"vue","permalink":"https://feidom-up.github.io/tags/vue/"}]},{"title":"vueä¸­ä½¿ç”¨svgå›¾æ ‡","slug":"vueä¸­ä½¿ç”¨svgå›¾æ ‡","date":"2020-11-03T00:41:24.000Z","updated":"2024-08-22T02:26:03.661Z","comments":true,"path":"2020/11/03/vueä¸­ä½¿ç”¨svgå›¾æ ‡/","link":"","permalink":"https://feidom-up.github.io/2020/11/03/vue%E4%B8%AD%E4%BD%BF%E7%94%A8svg%E5%9B%BE%E6%A0%87/","excerpt":"","text":"å¯¹svgå›¾æ ‡çš„ç®€å•å®ç”¨å’Œè®¤è¯†svgå›¾æ ‡çš„ä½¿ç”¨ åœ¨Vueé¡¹ç›®ä¸­å†™ä¸€ä¸ªsvgç»„ä»¶ å®‰è£…svg-sprite-loaderæ’ä»¶å¯¹svgæ–‡ä»¶è¿›è¡Œç¼–è¯‘è§£æ yarn add svg-sprite-loader åœ¨src/assets/ç›®å½•ä¸‹æ–°å»ºiconsç›®å½•ï¼Œå­˜æ”¾éœ€è¦ç”¨åˆ°çš„svgå›¾æ ‡ åœ¨vue-cli4ä¸­ï¼Œå¯¹vue.config.jsè¿›è¡Œé…ç½® 123456789101112131415161718192021chainWebpack: config =&gt; &#123; // set svg-sprite-loader // ç¬¬ä¸€æ­¥ï¼šè®©å…¶ä»–svg loaderä¸è¦å¯¹svgè¿›è¡Œæ“ä½œ config.module .rule('svg') .exclude.add(path.join(__dirname, 'src/assets/icons')) .end() // ç¬¬äºŒæ­¥ï¼šä½¿ç”¨svg-sprite-loader å¯¹svgè¿›è¡Œæ“ä½œ config.module .rule('icons') .test(/\\.svg$/) .include.add(path.join(__dirname, 'src/assets/icons')) .end() .use('svg-sprite-loader') .loader('svg-sprite-loader') //å®šä¹‰è§„åˆ™ ä½¿ç”¨æ—¶ &lt;svg class=\"icon\"&gt; &lt;use xlink:href=\"#icon-svgæ–‡ä»¶å\"&gt;&lt;/use&gt;&lt;/svg&gt; .options(&#123; symbolId: 'icon-[name]' &#125;) .end()&#125; å¦‚æœæ˜¯vue-cli2ä¸­ï¼Œé…ç½®build/webpack.base.conf.js 1234567891011121314151617181920212223module.exports = &#123; module: &#123; rules: [ &#123; test: /\\.svg$/, loader: \"svg-sprite-loader\", include: [resolve(\"src/assets/icons\")], options: &#123; symbolId: \"icon-[name]\" &#125; &#125;, &#123; test: /\\.(png|jpe?g|gif|svg)(\\?.*)?$/, loader: \"url-loader\", exclude: [resolve(\"src/assets/icons\")], options: &#123; limit: 10000, name: utils.assetsPath(\"img/[name].[hash:7].[ext]\") &#125; &#125;, ] &#125;&#125; åœ¨iconsç›®å½•ä¸‹ï¼Œæ–°å»ºindex.jsæ–‡ä»¶ 1234567891011import Vue from 'vue'import SvgIcon from '@/components/common/svgIcon'// å…¨å±€æ³¨å†Œç»„ä»¶Vue.component('svg-icon', SvgIcon)// å®šä¹‰ä¸€ä¸ªåŠ è½½ç›®å½•çš„å‡½æ•°const requireAll = requireContext =&gt; &#123; requireContext.keys().map(requireContext)&#125;const req = require.context('@/assets/icons', false, /\\.svg$/)// åŠ è½½ç›®å½•ä¸‹çš„æ‰€æœ‰ svg æ–‡ä»¶requireAll(req) ä¸Šè¿°index.jsä¸­ï¼Œå¼•ç”¨äº†svgIconç»„ä»¶ï¼Œåœ¨å¯¹åº”çš„å¼•ç”¨è·¯å¾„ä¸‹æ–°å»ºsvgIcon.vueæ–‡ä»¶ 123456789101112131415161718192021222324252627282930313233343536373839404142434445&lt;template&gt; &lt;svg :class&#x3D;&quot;svgClass&quot; aria-hidden&#x3D;&quot;true&quot;&gt; &lt;use :xlink:href&#x3D;&quot;iconName&quot;&gt;&lt;&#x2F;use&gt; &lt;&#x2F;svg&gt;&lt;&#x2F;template&gt;&lt;script&gt; export default &#123; name: &#39;svg-icon&#39;, props: &#123; &#x2F;&#x2F; ç»„ä»¶æ ·å¼ï¼Œå¯ä»¥æ§åˆ¶svgå›¾æ ‡ iconClass: &#123; type: String, required: true &#125;, &#x2F;&#x2F; ä½¿ç”¨svgæ–‡ä»¶åçš„æ–¹å¼ä½¿ç”¨å¯¹åº”svgå›¾æ ‡ className: &#123; type: String &#125; &#125;, computed: &#123; iconName() &#123; return &#96;#icon-$&#123;this.iconClass&#125;&#96; &#125;, svgClass() &#123; if (this.className) &#123; return &#39;svg-icon &#39; + this.className &#125; else &#123; return &#39;svg-icon&#39; &#125; &#125; &#125; &#125;&lt;&#x2F;script&gt;&lt;style scoped&gt;.svg-icon &#123; float: left; margin: 4px 6px 0 0; width: 13px; height: 13px; vertical-align: 1px; fill: #e1e1e1; overflow: hidden;&#125;&lt;&#x2F;style&gt; åœ¨main.jsä¸­å¼•å…¥ import &#39;./assets/icons&#39; ä½¿ç”¨svg-icon 1234&lt;svg-icon :iconClass&#x3D;&quot;&#39;download&#39;&quot; &#x2F;&#x2F;è¦†ç›–æ ·å¼ç±»å className&#x3D;&quot;downloadIcon&quot; &#x2F;&#x2F;æ–‡ä»¶å&gt;&lt;&#x2F;svg-icon&gt;","categories":[{"name":"vue","slug":"vue","permalink":"https://feidom-up.github.io/categories/vue/"}],"tags":[{"name":"svg","slug":"svg","permalink":"https://feidom-up.github.io/tags/svg/"},{"name":"vue","slug":"vue","permalink":"https://feidom-up.github.io/tags/vue/"}]},{"title":"å‰ç«¯å¦‚ä½•é˜²èŒƒxssæ”»å‡»","slug":"å‰ç«¯å¦‚ä½•é˜²èŒƒxssæ”»å‡»","date":"2020-09-10T05:56:05.000Z","updated":"2024-08-22T02:26:03.663Z","comments":true,"path":"2020/09/10/å‰ç«¯å¦‚ä½•é˜²èŒƒxssæ”»å‡»/","link":"","permalink":"https://feidom-up.github.io/2020/09/10/%E5%89%8D%E7%AB%AF%E5%A6%82%E4%BD%95%E9%98%B2%E8%8C%83xss%E6%94%BB%E5%87%BB/","excerpt":"","text":"xssæ˜¯ä»€ä¹ˆ Cross-Site Scriptingï¼ˆè·¨ç«™è„šæœ¬æ”»å‡»ï¼‰ç®€ç§° XSSï¼Œæ˜¯ä¸€ç§ä»£ç æ³¨å…¥æ”»å‡»ã€‚æ”»å‡»è€…é€šè¿‡åœ¨ç›®æ ‡ç½‘ç«™ä¸Šæ³¨å…¥æ¶æ„è„šæœ¬ï¼Œä½¿ä¹‹åœ¨ç”¨æˆ·çš„æµè§ˆå™¨ä¸Šè¿è¡Œã€‚åˆ©ç”¨è¿™äº›æ¶æ„è„šæœ¬ï¼Œæ”»å‡»è€…å¯è·å–ç”¨æˆ·çš„æ•æ„Ÿä¿¡æ¯å¦‚ Cookieã€SessionID ç­‰ï¼Œè¿›è€Œå±å®³æ•°æ®å®‰å…¨ã€‚ä¸ºäº†å’Œ CSS åŒºåˆ†ï¼Œè¿™é‡ŒæŠŠæ”»å‡»çš„ç¬¬ä¸€ä¸ªå­—æ¯æ”¹æˆäº† Xï¼Œäºæ˜¯å«åš XSSã€‚ XSS çš„æœ¬è´¨æ˜¯ï¼šæ¶æ„ä»£ç æœªç»è¿‡æ»¤ï¼Œä¸ç½‘ç«™æ­£å¸¸çš„ä»£ç æ··åœ¨ä¸€èµ·ï¼›æµè§ˆå™¨æ— æ³•åˆ†è¾¨å“ªäº›è„šæœ¬æ˜¯å¯ä¿¡çš„ï¼Œå¯¼è‡´æ¶æ„è„šæœ¬è¢«æ‰§è¡Œã€‚ æ€ä¹ˆåŠ è¾“å…¥è¿‡æ»¤ â€‹ è¾“å…¥è¿‡æ»¤å°±åœ¨åå°æ¥å£å¤„ç†æ•°æ®æ—¶åˆé€‚ï¼Œåšä¸ªæ•°æ®è½¬ä¹‰ æ¸²æŸ“æ—¶å¤„ç† â€‹ ä¼ ç»Ÿå‰ç«¯ï¼Œæ‹¼æ¥ HTMLåŠä½¿ç”¨ .innerHTMLã€.outerHTMLã€document.write()å°†æ•°æ®æ¸²æŸ“åˆ°é¡µé¢ä¸Šæ—¶ï¼Œå¾ˆå®¹æ˜“å°†ä¸å¯ä¿¡çš„é—®é¢˜æ•°æ®æ’åˆ°é¡µé¢ä¸Šã€‚ â€‹ Sdkå‰ç«¯é¡¹ç›®ï¼Œä½¿ç”¨Vueæ¡†æ¶ã€‚Vueæ¡†æ¶åœ¨æ¸²æŸ“å‰ï¼Œä¼šå°†templateæ¨¡æ¿ç¼–è¯‘ä¸ºè™šæ‹ŸDomæ ‘ï¼Œå‡å°‘äº† encode æ“ä½œï¼Œå‡å°‘äº† XSS éšæ‚£ã€‚ ä½†æ˜¯ï¼Œä½¿ç”¨`v-html`æ—¶ä¼šæœ‰é—®é¢˜ï¼Œè¿™ä¸€ç‚¹åœ¨vueå®˜æ–¹æ–‡æ¡£ä¸­æœ‰æåˆ°ï¼š![v-html](http://i.feidom.com/Vhtml.jpg) è§£å†³æ–¹æ¡ˆï¼š * å°½é‡ä½¿ç”¨æ’å€¼è¡¨è¾¾å¼`{{}}`ï¼Œå®ƒä¼šæŠŠè¦æ˜¾ç¤ºçš„å†…å®¹è½¬ä¸ºå­—ç¬¦ä¸²ã€‚ * å¦‚æœä½¿ç”¨v-htmlï¼Œè¦ä¿è¯æ¥è‡ªæœåŠ¡ç«¯çš„æ¸²æŸ“æ•°æ®éƒ½æ˜¯å®‰å…¨çš„ã€‚ * åœ¨ä½¿ç”¨ç¬¬ä¸‰æ–¹UIç»„ä»¶åº“çš„çš„æ—¶å€™ï¼Œè¦æ£€æŸ¥ä¸€ä¸‹å®ƒä»¬æ¸²æŸ“é¡µé¢çš„æ–¹å¼ï¼Œæ˜¯å¦ä½¿ç”¨äº† v-htmlã€‚ * æœ‰çš„æ—¶å€™å®åœ¨ç»•ä¸å¼€ï¼Œå¿…é¡»ç”¨ã€‚é‚£å°±ç”¨[lodashçš„_.template](https://www.lodashjs.com/docs/lodash.template)åšä¸€å±‚å­—ç¬¦ä¸²é€ƒé€¸æ“ä½œï¼Œå†å¡ç»™ v-html å°±è¡Œã€‚ 123var template &#x3D; _.template(&quot;&lt;%- value %&gt;&quot;);template(&#123;value: &#39;&lt;script&gt;&#39;&#125;);è¾“å‡º &#x3D;&#x3D;&gt; &lt;script&gt; åœ¨é¡¹ç›®ä¸­ä½¿ç”¨ç¬¬ä¸‰æ–¹åº“xss,ä¸­æ–‡æ–‡æ¡£","categories":[{"name":"å‰ç«¯å®‰å…¨","slug":"å‰ç«¯å®‰å…¨","permalink":"https://feidom-up.github.io/categories/%E5%89%8D%E7%AB%AF%E5%AE%89%E5%85%A8/"}],"tags":[{"name":"å‰ç«¯å®‰å…¨","slug":"å‰ç«¯å®‰å…¨","permalink":"https://feidom-up.github.io/tags/%E5%89%8D%E7%AB%AF%E5%AE%89%E5%85%A8/"}]},{"title":"vueä½¿ç”¨jesté—®é¢˜è§£å†³","slug":"vueä½¿ç”¨jestæ—¶é—®é¢˜è§£å†³","date":"2020-09-03T01:40:51.000Z","updated":"2024-08-22T02:26:03.661Z","comments":true,"path":"2020/09/03/vueä½¿ç”¨jestæ—¶é—®é¢˜è§£å†³/","link":"","permalink":"https://feidom-up.github.io/2020/09/03/vue%E4%BD%BF%E7%94%A8jest%E6%97%B6%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3/","excerpt":"","text":"vueé¡¹ç›®ä¸­ç”¨jestæµ‹è¯•æ—¶ï¼Œé‡åˆ°å‡ ä¸ªé—®é¢˜ï¼Œåœ¨è¿™è®°å½•ä»¥ä¸‹è¸©çš„å‘ï¼Œä»¥åçˆ¬å¾—å¿«ã€‚ SecurityError: localStorage is not available for opaque originsè¯¦ç»†æŠ¥é”™å¦‚ä¸‹ï¼š 1234567Test suite failed to runSecurityError: localStorage is not available for opaque originsat Window.get localStorage [as localStorage] (node_modules&#x2F;jsdom&#x2F;lib&#x2F;jsdom&#x2F;browser&#x2F;Window.js:257:15) at Array.forEach (&lt;anonymous&gt;) è§£å†³æ–¹æ³•ï¼šåœ¨jest.conf.jsæ–‡ä»¶ä¸­ï¼Œå¢åŠ é…ç½®testURL: &quot;http://localhost/&quot;ï¼Œå¦‚ä¸‹: 1234&#123; ..., testURL: &quot;http:&#x2F;&#x2F;localhost&#x2F;&quot;&#125; HandlebarsæŠ¥é”™å¯¼è‡´æµ‹è¯•æŠ¥å‘Šæ²¡æœ‰æ•°æ®å±•ç¤ºï¼Œè¯¦ç»†æŠ¥é”™å¦‚ä¸‹ï¼š 123456789101112Handlebars: Access has been denied to resolve the property &quot;statements&quot; because it is not an &quot;own property&quot; of its parent.You can add a runtime option to disable the check or this warning:See https:&#x2F;&#x2F;handlebarsjs.com&#x2F;api-reference&#x2F;runtime-options.html#options-to-control-prototype-access for detailsHandlebars: Access has been denied to resolve the property &quot;branches&quot; because it is not an &quot;own property&quot; of its parent.You can add a runtime option to disable the check or this warning:See https:&#x2F;&#x2F;handlebarsjs.com&#x2F;api-reference&#x2F;runtime-options.html#options-to-control-prototype-access for detailsHandlebars: Access has been denied to resolve the property &quot;functions&quot; because it is not an &quot;own property&quot; of its parent.You can add a runtime option to disable the check or this warning:See https:&#x2F;&#x2F;handlebarsjs.com&#x2F;api-reference&#x2F;runtime-options.html#options-to-control-prototype-access for detailsHandlebars: Access has been denied to resolve the property &quot;lines&quot; because it is not an &quot;own property&quot; of its parent.You can add a runtime option to disable the check or this warning:See https:&#x2F;&#x2F;handlebarsjs.com&#x2F;api-reference&#x2F;runtime-options.html#options-to-control-prototype-access for details æŠ¥é”™åŸå› è¯´çš„å¾ˆæ¸…æ¥šï¼Œæ˜¯Handlebarsç‰ˆæœ¬çš„é—®é¢˜ã€‚è§£å†³æ–¹æ³•ï¼š ç§»é™¤node_moudulesåŒ…1rm -rf node_moudules åœ¨package.jsonæ–‡ä»¶ä¸­ï¼Œæ–°å¢&quot;handlebars&quot;: &quot;4.5.0&quot;,è¿™ä¸ªåŒ…,ç›¸å½“äºæ‰‹åŠ¨æ·»åŠ è¿™ä¸ªåŒ…12345// package.json\"devDependencies\": &#123; ..., \"handlebars\": \"4.5.0\",&#125; yarn.lockè¿™ä¸ªæ–‡ä»¶ä¸­ï¼Œä¿®æ”¹handlebarsçš„åŒ…é…ç½®å’Œæ‰€æœ‰ä¾èµ–handlebarsåŒ…çš„åŒ…é…ç½®12handlebars@^4.0.3: version &quot;4.7.6&quot; æ”¹ä¸º==ã€‹12handlebars@4.5.0: version &quot;4.5.0&quot; ä¿®æ”¹ä¾èµ–handlebarsçš„åŒ…çš„é…ç½®123456istanbul-reports@^1.5.1: version &quot;1.5.1&quot; resolved &quot;https:&#x2F;&#x2F;registry.yarnpkg.com&#x2F;istanbul-reports&#x2F;-&#x2F;istanbul-reports-1.5.1.tgz#97e4dbf3b515e8c484caea15d6524eebd3ff4e1a&quot; integrity sha512-+cfoZ0UXzWjhAdzosCPP3AN8vvef8XDkWtTfgaN+7L3YTpNYITnCaEkceo5SEYy644VkHka&#x2F;P1FvkWvrG&#x2F;rrJw&#x3D;&#x3D; dependencies: handlebars &quot;^4.0.3&quot; æ”¹ä¸º==ã€‹123456istanbul-reports@^1.5.1: version &quot;1.5.1&quot; resolved &quot;https:&#x2F;&#x2F;registry.yarnpkg.com&#x2F;istanbul-reports&#x2F;-&#x2F;istanbul-reports-1.5.1.tgz#97e4dbf3b515e8c484caea15d6524eebd3ff4e1a&quot; integrity sha512-+cfoZ0UXzWjhAdzosCPP3AN8vvef8XDkWtTfgaN+7L3YTpNYITnCaEkceo5SEYy644VkHka&#x2F;P1FvkWvrG&#x2F;rrJw&#x3D;&#x3D; dependencies: handlebars &quot;4.5.0&quot; è­¦å‘Šï¼šmapCoverageè¿™ä¸ªé…ç½®åº”è¯¥è¢«ç§»é™¤ï¼Œå› ä¸ºè®¡ç®—è¦†ç›–ç‡çš„æ—¶é—´å¹¶ä¸é•¿ è¯¦ç»†è­¦å‘Šå¦‚ä¸‹ï¼š 12345678Deprecation Warning: Option &quot;mapCoverage&quot; has been removed, as it&#39;s no longer necessary. Please update your configuration. Configuration Documentation: https:&#x2F;&#x2F;facebook.github.io&#x2F;jest&#x2F;docs&#x2F;configuration.html è¿™ä¸ªé…ç½®åœ¨jesté…ç½®æ–‡æ¡£ä¸­çš„è§£é‡Šå¦‚ä¸‹ï¼š If you have transformers configured that emit source maps, Jest will use them to try and map code coverage against the original source code when writing reports and checking thresholds. This is done on a best-effort basis as some compile-to-JavaScript languages may provide more accurate source maps than others. This can also be resource-intensive. If Jest is taking a long time to calculate coverage at the end of a test run, try setting this option to false. Both inline source maps and source maps returned directly from a transformer are supported. Source map URLs are not supported because Jest may not be able to locate them. To return source maps from a transformer, the process function can return an object like the following. The map property may either be the source map object, or the source map object as a JSON string. å¤§è‡´æ„æ€æ˜¯ï¼š*å¦‚æœæ‚¨é…ç½®äº†å‘å‡ºæºæ˜ å°„çš„è½¬æ¢å™¨ï¼Œé‚£ä¹ˆåœ¨ç¼–å†™æŠ¥å‘Šå’Œæ£€æŸ¥é˜ˆå€¼æ—¶ï¼ŒJestå°†ä½¿ç”¨å®ƒä»¬æ¥å°è¯•å°†ä»£ç è¦†ç›–ç‡æ˜ å°„åˆ°åŸå§‹æºä»£ç ä¸Šã€‚è¿™æ ·åšéœ€è¦ä»˜å‡ºæœ€å¤§çš„åŠªåŠ›ï¼Œå› ä¸ºä¸€äº›ç¼–è¯‘åˆ°javascriptçš„è¯­è¨€å¯èƒ½æ¯”å…¶ä»–è¯­è¨€æä¾›æ›´å‡†ç¡®çš„æºæ˜ å°„ã€‚è¿™ä¹Ÿå¯ä»¥æ˜¯èµ„æºå¯†é›†å‹çš„ã€‚å¦‚æœJeståœ¨æµ‹è¯•è¿è¡Œç»“æŸæ—¶èŠ±è´¹å¾ˆé•¿æ—¶é—´æ¥è®¡ç®—è¦†ç›–ç‡ï¼Œè¯·å°è¯•å°†æ­¤é€‰é¡¹è®¾ç½®ä¸ºfalseã€‚ æ”¯æŒå†…è”æºæ˜ å°„å’Œä»è½¬æ¢å™¨ç›´æ¥è¿”å›çš„æºæ˜ å°„ã€‚ä¸æ”¯æŒæºæ˜ å°„urlï¼Œå› ä¸ºJestå¯èƒ½æ— æ³•å®šä½å®ƒä»¬ã€‚è¦ä»è½¬æ¢å™¨è¿”å›æºæ˜ å°„ï¼Œprocesså‡½æ•°å¯ä»¥è¿”å›å¦‚ä¸‹æ‰€ç¤ºçš„å¯¹è±¡ã€‚mapå±æ€§å¯ä»¥æ˜¯æºæ˜ å°„å¯¹è±¡ï¼Œä¹Ÿå¯ä»¥æ˜¯JSONå­—ç¬¦ä¸²å½¢å¼çš„æºæ˜ å°„å¯¹è±¡ã€‚ è§£å†³æ–¹æ³•ï¼šåœ¨jest.conf.jsæ–‡ä»¶ä¸­ï¼Œç§»é™¤mapCoverage:trueè¿™ä¸ªé…ç½®ã€‚","categories":[],"tags":[{"name":"é—®é¢˜è§£å†³","slug":"é—®é¢˜è§£å†³","permalink":"https://feidom-up.github.io/tags/%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3/"},{"name":"å•å…ƒæµ‹è¯•","slug":"å•å…ƒæµ‹è¯•","permalink":"https://feidom-up.github.io/tags/%E5%8D%95%E5%85%83%E6%B5%8B%E8%AF%95/"}]},{"title":"astæŠ½è±¡è¯­æ³•æ ‘","slug":"astæŠ½è±¡è¯­æ³•æ ‘","date":"2020-08-31T01:59:55.000Z","updated":"2024-08-22T02:26:03.658Z","comments":true,"path":"2020/08/31/astæŠ½è±¡è¯­æ³•æ ‘/","link":"","permalink":"https://feidom-up.github.io/2020/08/31/ast%E6%8A%BD%E8%B1%A1%E8%AF%AD%E6%B3%95%E6%A0%91/","excerpt":"","text":"å°½ç®¡é€šå¸¸å°† JavaScript å½’ç±»ä¸ºâ€œåŠ¨æ€â€æˆ–â€œè§£é‡Šæ‰§è¡Œâ€è¯­è¨€ï¼Œä½†äº‹å®ä¸Šå®ƒæ˜¯ä¸€é—¨ç¼–è¯‘è¯­è¨€ã€‚â€” ã€Šä½ ä¸çŸ¥é“çš„js(ä¸Š)ã€‹ ä»£ç æ‰§è¡Œå‰çš„æ­¥éª¤-ç¼–è¯‘ä¸‹å›¾æ˜¯ç®€æ˜“çš„é‡ç‚¹æµç¨‹ï¼Œå®é™…jsçš„ç¼–è¯‘è¦å¤æ‚çš„å¤š è¯æ³•åˆ†æï¼ˆæ‰«æscannerï¼‰ è¿™ä¸ªè¿‡ç¨‹å°†ç”±å­—ç¬¦ç»„æˆçš„å­—ç¬¦ä¸²åˆ†è§£ä¸ºæœ‰æ„ä¹‰çš„ä»£ç å—ï¼Œè¿™äº›ä»£ç å—å«â€œè¯æ³•å•å…ƒâ€ã€‚ å¦‚ï¼š let a = 2; å°†è¢«åˆ†æä¸º[let, a, =, 2]è¿™äº›è¯æ³•å•å…ƒã€‚ç©ºæ ¼ç®—ä¸ç®—å–å†³äºç©ºæ ¼åœ¨è¿™é—¨è¯­è¨€ä¸­æ˜¯å¦æœ‰æ„ä¹‰ grammars-v4ä¸­æœ‰æ‰€æœ‰è¯­è¨€çš„è¯­æ³•è§„åˆ™ï¼Œä¹ŸåŒ…æ‹¬jsã€‚ è¯­æ³•åˆ†æï¼ˆè§£æå™¨ï¼‰ è¿™ä¸ªè¿‡ç¨‹æ˜¯å°†è¯æ³•å•å…ƒæµï¼ˆæ•°ç»„ï¼Œé€šä¿—çš„è®²ï¼Œå¤„ç†è¿‡ç¨‹å°±æ˜¯ä¸ªforå¾ªç¯ï¼‰è½¬æ¢æˆä¸€ä¸ªç”±å…ƒç´ é€çº§åµŒå¥—æ‰€ç»„æˆçš„ä»£è¡¨äº†ç¨‹åºè¯­æ³•ç»“æ„çš„æ ‘ã€‚è¿™ä¸ªæ ‘è¢«ç§°ä¸ºâ€œæŠ½è±¡è¯­æ³•æ ‘â€Abstract Syntax Treeï¼ŒASTã€‚ ä»£ç ç”Ÿæˆ å°†ç”Ÿæˆçš„astè½¬åŒ–ä¸ºå¯æ‰§è¡Œä»£ç çš„è¿‡ç¨‹ã€‚ ASTAST Exploreræä¾›äº†å¾ˆå¤šä¸åŒçš„astç”Ÿæˆè§„åˆ™å¯ç”¨æ¥å­¦ä¹ ä¾‹å¦‚: ç¼–è¯‘javascriptæ—¶çš„var a = 1;å°†ç”Ÿæˆå¦‚ä¸‹æŠ½è±¡è¯­æ³•æ ‘ 12345678910111213141516171819202122232425262728293031323334&#123; type: \"Program\", // ç¨‹åº start: 0, end: 10, body: [ &#123; // VariableDeclaration type: \"VariableDeclaration\", // å˜é‡å£°æ˜ start: 0, end: 10, declarations: [ &#123; // VariableDeclarator // å˜é‡å£°æ˜è€… type: \"VariableDeclarator\", start: 4, end: 9, id: &#123; // Identifier å£°æ˜a type: \"Identifier\", start: 4, end: 5, name: \"a\" &#125;, init:&#123; // å°†açš„å€¼åˆå§‹åŒ–ä¸º 1 type: \"Literal\", start: 8, end: 9, value: 1, raw: \"1\" &#125; &#125; ], kind: \"var\" &#125;, ], sourceType: \"module\"&#125; å®ä¾‹ï¼š bableçš„ç¼–è¯‘ä½¿ç”¨äº†ASTã€‚ åœ¨vue3çš„æ¨¡æ¿è¯­æ³•ç¼–è¯‘ï¼Œå®šä¹‰äº†è‡ªå·±çš„ä¸€å¥—è¯­æ³•è§„åˆ™ï¼Œä½¿ç”¨ASTå¤§å¤§æé«˜äº†æ€§èƒ½ æ‰©å±•recastæ˜¯ä¸€ä¸ªastçš„å·¥å…·ï¼Œä½¿ç”¨å®ƒå¯ä»¥æŸ¥çœ‹astï¼Œæ›´æ¢è¯­æ³•è§„åˆ™ç­‰ã€‚","categories":[{"name":"ç¼–è¯‘åŸç†","slug":"ç¼–è¯‘åŸç†","permalink":"https://feidom-up.github.io/categories/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86/"}],"tags":[{"name":"ç¼–è¯‘åŸç†","slug":"ç¼–è¯‘åŸç†","permalink":"https://feidom-up.github.io/tags/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86/"}]},{"title":"vueä¸­ä½¿ç”¨vueChartJs","slug":"vueä¸­ä½¿ç”¨vueChartJs","date":"2020-08-26T07:24:53.000Z","updated":"2024-08-22T02:26:03.661Z","comments":true,"path":"2020/08/26/vueä¸­ä½¿ç”¨vueChartJs/","link":"","permalink":"https://feidom-up.github.io/2020/08/26/vue%E4%B8%AD%E4%BD%BF%E7%94%A8vueChartJs/","excerpt":"","text":"vue-chartJsvue-chartJsæ˜¯vueå¯¹Chart.jsçš„å°è£…,å¯ä»¥å¾ˆç®€å•çš„åˆ›å»ºå¯å¤ç”¨çš„å›¾è¡¨ç»„ä»¶ã€‚ç”±äºæ˜¯å¯¹åº•å±‚çš„å°è£…ï¼Œæ‰€ä»¥è®¸å¤šå›¾è¡¨çš„é…ç½®ï¼Œè¿˜æ˜¯éœ€è¦çœ‹è¿™ä¸ªChart.jsçš„æ–‡æ¡£ å…ˆç®€å•å°è£…ä¸ªç»„ä»¶12345678910111213// vBar.vue&lt;script&gt;import &#123; Bar &#125; from 'vue-chartjs'export default &#123; name: 'vBar', extends: Bar, props: ['chartdata', 'options'], mounted () &#123; this.renderChart(this.chartdata,this.options) &#125;&#125;&lt;/script&gt; åœ¨éœ€è¦çš„åœ°æ–¹ç”¨è¿™ä¸ªç»„ä»¶12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576777879808182838485// index.vue&lt;template&gt; &lt;div class=\"example-3d\"&gt; &lt;vBar :chartdata=\"vBarData\" :options=\"vOptions\" :styles=\"myStyles\"&gt;&lt;/vBar&gt; &lt;/div&gt;&lt;/template&gt;&lt;script&gt;import &#123; vBar &#125; from '@/components/vCharts/vBar'export default &#123; name: 'barTest', components: &#123; vBar, &#125;, data() &#123; return &#123; vBarData: &#123; labels: ['1', '2', '3', '4', '5', '6'], datasets: [ &#123; data: [1,2,3,4,5,6], backgroundColor: '#ffa200', barPercentage: 1, maxBarThickness: 12, &#125;, ], &#125;, vOptions: &#123; // è‡ªé€‚åº”å¿…é¡»è¦åŠ çš„ä¸‹é¢ä¸¤ä¸ªé…ç½® responsive: true, maintainAspectRatio: false, layout: &#123; padding: &#123; left: 5, right: 5, top: 5, bottom: 5, &#125;, &#125;, legend: &#123; display: false &#125;, scales: &#123; grid: &#123; x: 10, x2: 20, y: 20, y2: 10, &#125;, xAxes: [ &#123; gridLines: &#123; display: false, &#125;, ticks: &#123; display: false, &#125;, &#125;, ], yAxes: [ &#123; gridLines: &#123; display: false, &#125;, ticks: &#123; display: false, &#125;, &#125;, ], &#125;, &#125;, &#125; &#125;, computed: &#123; myStyles() &#123; return &#123; height: '100px', // è‡ªé€‚åº”å¿…é¡»è¦åŠ çš„position: 'relative', position: 'relative', marginTop: '200px' &#125; &#125;, &#125;, mounted() &#123;&#125;, created() &#123;&#125;, methods: &#123;&#125;,&#125;&lt;/script&gt; vue-chartJsçš„è‡ªé€‚åº”resize v-charté…ç½®1234Options: &#123; responsive: true, maintainAspectRatio: false,&#125; ç»„ä»¶å®ä¾‹ç»‘å®šstyleså±æ€§:styles=&quot;myStyles&quot;123456myStyles() &#123; return &#123; // è‡ªé€‚åº”å¿…é¡»è¦åŠ çš„position: 'relative', position: 'relative', &#125;&#125;,","categories":[{"name":"vue","slug":"vue","permalink":"https://feidom-up.github.io/categories/vue/"}],"tags":[{"name":"vue","slug":"vue","permalink":"https://feidom-up.github.io/tags/vue/"},{"name":"å›¾è¡¨","slug":"å›¾è¡¨","permalink":"https://feidom-up.github.io/tags/%E5%9B%BE%E8%A1%A8/"}]},{"title":"vueä½¿ç”¨swiper","slug":"vueä½¿ç”¨swiper","date":"2020-08-25T06:26:14.000Z","updated":"2024-08-22T02:26:03.661Z","comments":true,"path":"2020/08/25/vueä½¿ç”¨swiper/","link":"","permalink":"https://feidom-up.github.io/2020/08/25/vue%E4%BD%BF%E7%94%A8swiper/","excerpt":"","text":"åœ¨vueé¡¹ç›®ä¸­ä½¿ç”¨swiper.jsæœ‰ä¸€ä¸ªä¸“ä¸švueå°è£…åº“çš„vue-awesome-swiper.js,åœ¨vueé¡¹ç›®ä¸­ä½¿ç”¨æ—¶ï¼Œéœ€è¦æŠŠè¿™ä¸ªåŒ…ä¹Ÿè£…ä¸Šã€‚ 1yarn add swiper@5.3.6 vue-awesome-swiper@4.1.0 ä¸Šé¢è£…åŒ…æ—¶æŒ‡å®šç‰ˆæœ¬ï¼Œæ˜¯å› ä¸ºåœ¨é¡¹ç›®ä¸­è¸©å‘äº†ã€‚è£…äº†æ–°åŒ…ä¸èƒ½ç”¨ã€‚äºæ˜¯æŸ¥çœ‹vue-awesome-swiperåœ¨githubä¸Šçš„ç¤ºä¾‹ä»£ç ï¼Œå‘ç°swiper@5.3.6 vue-awesome-swiper@4.1.0ï¼Œè£…åŒ…åå¯ä»¥ä½¿ç”¨ ä½¿ç”¨demo123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475&lt;template&gt; &lt;div class=\"example-3d\"&gt; &lt;swiper class=\"swiper\" :options=\"swiperOption\"&gt; &lt;swiper-slide v-for=\"(item, index) in colorList\" :key=\"index\" :style=\"'background: '+item\"&gt;Slide &#123;&#123;index&#125;&#125;&lt;/swiper-slide&gt; &lt;/swiper&gt; &lt;/div&gt;&lt;/template&gt;&lt;script&gt;import &#123; Swiper, SwiperSlide &#125; from 'vue-awesome-swiper'import 'swiper/css/swiper.css'export default &#123; name: 'swiper-example-3d-coverflow', title: '3D Coverflow effect', components: &#123; Swiper, SwiperSlide, &#125;, data() &#123; return &#123; colorList:['#c82829','#f5871f','#eab700','#718c00','#3e999f'], swiperOption: &#123; initialSlide: 1, virtualTranslate: true, effect: 'coverflow', grabCursor: false, centeredSlides: true, slidesPerView: 'auto', coverflowEffect: &#123; rotate: 10, stretch: 0, depth: 10, modifier: 1, slideShadows: false, &#125;, on: &#123; click: function (swiper, event) &#123; &#125;, &#125;, slideToClickedSlide: true, slidesPerView: 5, &#125;, &#125; &#125;,&#125;&lt;/script&gt;&lt;style lang=\"scss\" scoped&gt;.example-3d &#123; width: 100%; height: 400px; padding-top: 50px; padding-bottom: 50px;&#125;.swiper &#123; height: 100%; width: 100%; .swiper-slide &#123; display: flex; justify-content: center; align-items: center; width: 300px; height: 300px; text-align: center; font-weight: bold; background-color: #2c8dfb; background-position: center; background-size: cover; &#125;&#125;&lt;/style&gt;","categories":[{"name":"vue","slug":"vue","permalink":"https://feidom-up.github.io/categories/vue/"}],"tags":[{"name":"css","slug":"css","permalink":"https://feidom-up.github.io/tags/css/"},{"name":"vue","slug":"vue","permalink":"https://feidom-up.github.io/tags/vue/"},{"name":"åŠ¨ç”»","slug":"åŠ¨ç”»","permalink":"https://feidom-up.github.io/tags/%E5%8A%A8%E7%94%BB/"}]},{"title":"vueä½¿ç”¨flowé™æ€æ£€æŸ¥","slug":"vueä½¿ç”¨flowé™æ€æ£€æŸ¥","date":"2020-08-18T03:21:27.000Z","updated":"2024-08-22T02:26:03.661Z","comments":true,"path":"2020/08/18/vueä½¿ç”¨flowé™æ€æ£€æŸ¥/","link":"","permalink":"https://feidom-up.github.io/2020/08/18/vue%E4%BD%BF%E7%94%A8flow%E9%9D%99%E6%80%81%E6%A3%80%E6%9F%A5/","excerpt":"","text":"äº†è§£ä¸‹flowjsæ˜¯ä¸€é—¨å¼±è¯­è¨€ï¼Œçµæ´»æ€§å¼ºã€‚è¿™æœ¬æ¥æ˜¯å®ƒçš„ä¼˜åŠ¿ã€‚ä½†æ˜¯åœ¨ç¨‹åºè¿è¡Œä¸­ï¼Œæ•°æ®ç±»å‹å˜å¹»å¾€å¾€é€ æˆç¨‹åºçš„ä¸ç¨³å®šã€‚flow.jsæ˜¯ç”¨æ¥ä¸ºjsåšé™æ€ç±»å‹æ£€æŸ¥çš„ã€‚åœ¨ä½¿ç”¨tså‰ï¼Œflow.jsæ˜¯ä¸€ä¸ªä¸é”™çš„ç±»å‹æ£€æŸ¥å™¨ã€‚ä»–å’Œtsä¸æ˜¯ä¸€å›äº‹ã€‚tsæ˜¯jsçš„è¶…é›†ï¼Œè€Œflowåªæ˜¯ä¸€ä¸ªå·¥å…· åœ¨vueé¡¹ç›®ä¸­ä½¿ç”¨flow å®‰è£…flowç›¸å…³ä¾èµ–åŒ…12345678910111213# yarn$ yarn add babel-plugin-syntax-flow # æ·»åŠ å¯¹Babelä¸­çš„æµè¯­æ³•çš„æ”¯æŒã€‚ babel-plugin-transform-class-properties # æ·»åŠ å¯¹ç±»å±æ€§å’Œé™æ€æ–¹æ³•çš„æ”¯æŒ babel-plugin-transform-flow-strip-types # åœ¨ä½¿ç”¨Babelè½¬æ¢å‰ä»æºæ–‡ä»¶ä¸­åˆ é™¤ç±»å‹æ³¨é‡Šã€‚ eslint # Eslintã€‚å®ƒå®é™…ä¸Šæ˜¯JSçš„linterï¼Œé›†æˆäº†å„ç§ç¼–è¾‘å™¨å’Œideã€‚ babel-eslint # å¯¹Eslintè¿›è¡Œè¡¥ä¸ï¼Œä»¥ä½¿ç”¨Babelçš„è§£æå™¨è§£ææºæ–‡ä»¶ã€‚ eslint-plugin-html # å…è®¸Eslintå¤„ç†HTMLæ–‡ä»¶ (ie. Only lints stuff inside script tags.) eslint-plugin-flowtype-errors # é€šè¿‡Eslintä¼ é€’æµé”™è¯¯ï¼Œå¹¶ä¼ é€’åˆ°ç¼–è¾‘å™¨çš„Eslintæ’ä»¶(å¦‚æœæœ‰çš„è¯)ã€‚ eslint-plugin-vue # ç”¨äºä½¿ç”¨Vueçš„Eslintçš„æ’ä»¶ã€‚ eslint-config-vue # ç”¨äºä½¿ç”¨Vueçš„Eslintçš„é…ç½®. flow-bin # flow ç±»å‹æ£€æŸ¥-D é…ç½®.babelrc12345678&#123; ... \"plugins\": [ \"babel-plugin-transform-class-properties\", \"babel-plugin-syntax-flow\", \"babel-plugin-transform-flow-strip-types\" ]&#125; é…ç½®.eslintrc12345678910111213141516&#123; \"parser\": \"babel-eslint\", \"plugins\": [ \"html\", \"flowtype-errors\" ], \"extends\": [ \"vue\" ], \"rules\": &#123; \"flowtype-errors/show-errors\": 2 &#125;&#125; é…ç½®.flowconfig åœ¨package.jsonçš„scriptsæ ‡ç­¾ä¸­ã€‚æ·»åŠ &quot;flow&quot;: &quot;flow&quot;123\"scripts\":&#123; \"flow\": \"flow\"&#125; åœ¨é¡¹ç›®çš„æ ¹ç›®å½•ï¼Œæ‰§è¡Œflow init ç”Ÿæˆ.flowconfigæ–‡ä»¶123456789101112[ignore].*&#x2F;node_modules&#x2F;.*.*&#x2F;test&#x2F;.*.*&#x2F;build&#x2F;.*.*&#x2F;config&#x2F;.*[include][libs][options]module.file_ext&#x3D;.vuemodule.file_ext&#x3D;.js åœ¨jsæ–‡ä»¶å’Œ.vueæ–‡ä»¶ä¸­åŠ å…¥/* @flow */,flowå¼€å§‹å·¥ä½œtest.js123456/* @flow */const doSomethingStupid(stringArg) &#123; // Flow should show an error here, \"The operand of an arithmetic operation must be a number.\" return stringArg * 3109;&#125;console.log(doSomethingStupid(`I'm stringy`)) test.vue123456789101112131415&lt;template&gt; &lt;p&gt;I'm made with Flow!&lt;/p&gt;&lt;/template&gt;&lt;script&gt;/* @flow */const randomThing: string = 'Boop!'export default &#123; created() &#123; console.log(randomThing) &#125;&#125;&lt;/script&gt; åœ¨webpack ä¸­ä½¿ç”¨ flow æ£€æŸ¥ å®‰è£…ä¸€ä¸ª flow çš„ webpack æ’ä»¶ flow-webpack-next-plugin1yarn add flow-webpack-next-plugin -D é…ç½®webpack 1234var FlowWebpackPlugin = require('flow-webpack-next-plugin');plugins: [ new FlowWebpackPlugin()] è®°å½•ä¸€ä¸ªflowæŠ¥é”™ required module not foundåŸå› ï¼š å› ä¸ºwebpacké…ç½®äº†åˆ«å(alias)ï¼Œæ‰€ä»¥åœ¨ js æ–‡ä»¶å†…ç›´æ¥ import åˆ«åä¼šå¯¼è‡´ flow æ— æ³•æ­£ç¡®æ‰¾åˆ°å¯¹åº”çš„ moduleè§£å†³ï¼š åœ¨ .flowconfig ä½¿ç”¨ name_mapper å°†å¯¹åº”çš„åˆ«ååšä¸€ä¸ªæ˜ å°„ï¼Œé—®é¢˜è§£å†³ 1234[options]module.file_ext&#x3D;.vuemodule.file_ext&#x3D;.jsmodule.name_mapper&#x3D;&#39;\\(@\\)&#39; -&gt; &#39;&lt;PROJECT_ROOT&gt;&#x2F;src&#x2F;&#39; ç«™åœ¨å·¨äººçš„è‚©è†€ä¸Šhttps://www.jianshu.com/p/95854085ec40https://www.digitalocean.com/community/tutorials/vuejs-components-flow","categories":[{"name":"vue","slug":"vue","permalink":"https://feidom-up.github.io/categories/vue/"}],"tags":[{"name":"vue","slug":"vue","permalink":"https://feidom-up.github.io/tags/vue/"},{"name":"flow","slug":"flow","permalink":"https://feidom-up.github.io/tags/flow/"}]},{"title":"node-sassè£…åŒ…æŠ¥é”™","slug":"node-sassè£…åŒ…æŠ¥é”™","date":"2020-08-17T08:27:58.000Z","updated":"2024-08-22T02:26:03.659Z","comments":true,"path":"2020/08/17/node-sassè£…åŒ…æŠ¥é”™/","link":"","permalink":"https://feidom-up.github.io/2020/08/17/node-sass%E8%A3%85%E5%8C%85%E6%8A%A5%E9%94%99/","excerpt":"","text":"node-sasså®‰è£…ä¾èµ–error: node-sass: Command failedæŠ¥é”™è§£å†³å¥½å¥½çš„yarn installã€‚ æŠ¥ä¸€ä¸ªä¸‹å›¾çš„é”™ã€‚ é—®é¢˜åŸå› ï¼šæŸ¥çœ‹æŠ¥é”™ä¿¡æ¯ï¼Œå†æŸ¥æ‰¾èµ„æ–™ã€‚å¯èƒ½æ˜¯è¢«å¢™äº†ã€‚è§£å†³åŠæ³•ï¼šå°† sass-binary-site æ·»åŠ è‡³ yarn/npm config ä¸­,æŒ‡å®šnode-sassåœ¨æ·˜å®æºä¸­ä¸‹è½½ 12yarn config set sass-binary-site https:&#x2F;&#x2F;npm.taobao.org&#x2F;mirrors&#x2F;node-sassnpm config set sass-binary-site https:&#x2F;&#x2F;npm.taobao.org&#x2F;mirrors&#x2F;node-sass çˆ¬å‘è®°å½•ä¸€ä¸‹","categories":[],"tags":[{"name":"é—®é¢˜è§£å†³","slug":"é—®é¢˜è§£å†³","permalink":"https://feidom-up.github.io/tags/%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3/"},{"name":"å®‰è£…ä¾èµ–é—®é¢˜","slug":"å®‰è£…ä¾èµ–é—®é¢˜","permalink":"https://feidom-up.github.io/tags/%E5%AE%89%E8%A3%85%E4%BE%9D%E8%B5%96%E9%97%AE%E9%A2%98/"}]},{"title":"vueæºç è§£è¯»ä¹‹htmlä¸vNodeé—´çš„è½¬æ¢","slug":"vueæºç è§£è¯»ä¹‹htmlä¸vNodeé—´çš„è½¬æ¢","date":"2020-08-13T08:27:24.000Z","updated":"2024-08-22T02:26:03.662Z","comments":true,"path":"2020/08/13/vueæºç è§£è¯»ä¹‹htmlä¸vNodeé—´çš„è½¬æ¢/","link":"","permalink":"https://feidom-up.github.io/2020/08/13/vue%E6%BA%90%E7%A0%81%E8%A7%A3%E8%AF%BB%E4%B9%8Bhtml%E4%B8%8EvNode%E9%97%B4%E7%9A%84%E8%BD%AC%E6%8D%A2/","excerpt":"","text":"&lt;template&gt;è¢«compilerå¤„ç†ã€‚compilerä½¿ç”¨generate(ast, options)æ–¹æ³•ï¼Œå°†templateè½¬æ¢ä¸ºæŒ‡å®šç»“æ„çš„å¯¹è±¡ã€‚ compilerç¼–è¯‘é˜…è¯»æºç é€»è¾‘å¯å¾—ï¼Œåœ¨å®é™…ä¸Šcompilerçš„ä¸»è¦å¤„ç†ç‚¹æ˜¯ï¼š 1var compiled = baseCompile(template.trim(), finalOptions); å³è°ƒç”¨baseCompileå‡½æ•°ï¼Œè€ŒbaseCompileåˆ™æ˜¯æ ¸å¿ƒï¼Œè¿™è¾¹ä¸»è¦ä»£ç å¦‚ä¸‹ï¼š 12345678910const ast = parse(template.trim(), options)if (options.optimize !== false) &#123; optimize(ast, options)&#125;const code = generate(ast, options)return &#123; ast, render: code.render, staticRenderFns: code.staticRenderFns&#125; ä¸Šé¢çš„ä»£ç  å°†templateå¤„ç†ä¸ºast(æŠ½è±¡è¯­æ³•æ ‘)ï¼Œä¸” æ ¹æ®astæ ‘ç»“æ„æ„å»ºrenderå‡½æ•°ä¸»ä½“éƒ¨åˆ†ã€‚ compilerä¸­è°ƒç”¨parse()è§£ææ ¸å¿ƒä¸­ç”¨åˆ°çš„parse()æ–¹æ³•çš„å¤„ç†è¿‡ç¨‹ä¸ºï¼š åœ¨new Vueå®ä¾‹åŒ–æ—¶ï¼ŒparseHTMLè§£æhtmlæ ‡ç­¾ç­‰htmlå†…å®¹ã€‚parseHTMLå¤„ç†å®é™…ä¸Šä¼šè°ƒç”¨parseStartTagå’ŒhandleStartTagæ¥è§£æå‡ºå¼€å§‹æ ‡ç­¾ï¼Œè§£ææ—¶ï¼Œç”¨åˆ°çš„æ–¹æ³•æ˜¯æ­£åˆ™åŒ¹é…ã€‚ parseTextå¤„ç†ç±»ä¼¼æ–‡æœ¬èŠ‚ç‚¹ã€‚å®é™…ä¸Šä¼šå°†ä½¿ç”¨åˆ°å“åº”å¼æ•°æ®çš„æ–‡æœ¬å˜æˆï¼š_s(text)ï¼Œå¹¶ä¸”è®¾ç½®äº†@bindingå±æ€§è¡¨ç¤ºå¼•ç”¨äº†å“ªä¸ªå“åº”å¼å˜é‡ã€‚è¿˜æœ‰ä¸€ç‚¹å°±æ˜¯å¯¹äºæ¢è¡Œçš„å¤„ç†ä¹Ÿä¼šä¿ç•™ï¼Œå³æ–‡æœ¬åŒºåŸŸåŸæ ·ï¼Œè¯¥æœ‰æ¢è¡Œå°±æœ‰æ¢è¡Œåªæ˜¯å“åº”å¼å˜é‡çš„ç‰¹æ®Šå¤„ç†è€Œå·²ã€‚ ç¤ºä¾‹æ€»ç»“ï¼šå°†&lt;div id=&quot;app&quot;&gt; &lt;/div&gt;,ç»è¿‡parseHTML + parseTextçš„è§£æï¼Œå¾—åˆ°å¦‚ä¸‹çš„ä¸»è¦astç»“æ„ï¼š 1234567891011type: 1,tag: 'div',attrs: [&#123; name: 'id', value: 'app'&#125;],attrList: [&#123;name: 'id', value: 'app'&#125;],attrMap: &#123;id: 'app'&#125;children: [ expression: \"\"\\n \"+_s(text)+\"\\n \"\" text: \"â†µ &#123;&#123; text &#125;&#125;â†µ \" tokens: (3) [\"â†µ \", &#123;â€¦&#125;, \"â†µ \"] type: 2] generateé€šè¿‡è§£æå‡ºæ¥çš„astæ„å»ºrenderåœ¨æ„å»ºrenderçš„è¿‡ç¨‹ä¸­ï¼Œç”¨åˆ°äº†ç½ªæ¶çš„with()å…ˆçœ‹ä¸€ä¸‹generateçš„éƒ¨åˆ†æºç ï¼š 123456const state = new CodegenState(options)const code = ast ? genElement(ast, state) : '_c(\"div\")'return &#123; render: `with(this)&#123;return $&#123;code&#125;&#125;`, staticRenderFns: state.staticRenderFns&#125; å®ä¾‹çš„astç»“æ„å®é™…ä¸Šæ„å»ºæˆäº†: 12345678910with(this) &#123; return _c('div', &#123; attrs:&#123;\"id\":\"app\"&#125; &#125;, [ _v(\"\\n \"+_s(text)+\"\\n \") ] )&#125; ä¸Šé¢ä½¿ç”¨å‡½æ•°å½¢å¼è¡¨ç¤ºçš„ï¼Œå®é™…ä¸ŠVueæºç æ­¤å¤„æ˜¯å­—ç¬¦ä¸²ï¼Œå³ï¼š 1\"with(this)&#123;return _c(\"div\",&#123;attrs:&#123;\"id\":\"app\"&#125;&#125;,[_v(\"\\n \"+_s(text)+\"\\n \")])&#125;\" å…¶ä¸­ç”¨åˆ°çš„_c(),_v(),_sçš„æ„æ€åˆ†åˆ«ä¸ºï¼š 1234567891011121314151617// _c()å°±æ˜¯$createElementï¼Œå³hå‡½æ•°ã€‚è¯¥æ–¹æ³•æ˜¯vnodeåˆ›å»ºçš„å®é™…å‡ºå‘ç‚¹ï¼ŒVueæ ¸å¿ƒæ–¹æ³•ä¹‹ä¸€ã€‚å…·ä½“æºç å¦‚ä¸‹ï¼švm._c = function(a, b, c, d) &#123; return createElement(vm, a, b, c, d, false);&#125;;// -v()å®é™…ä¸Šæ˜¯createTextVNodeï¼Œå³åˆ›å»ºè™šæ‹Ÿæ–‡æœ¬èŠ‚ç‚¹ï¼ˆæ–‡æœ¬ç±»å‹çš„è™šæ‹ŸDOMï¼‰ï¼Œå®ä¾‹æ–¹æ³•å¦‚ä¸‹function createTextVNode(val) &#123; return new VNode(undefined, undefined, undefined, String(val));&#125;// -s()å®é™…ä¸Šæ˜¯toStringï¼Œå¤„ç†å¯¹è±¡å’Œå…¶ä»–å½¢å¼æ–‡æœ¬è¾“å‡ºã€‚å¤„ç†nullã€å¯¹è±¡ä»¥åŠæ•°ç»„å½¢å¼çš„æ•°æ®ç­‰å°†å…¶è½¬æ¢ä¸ºå­—ç¬¦ä¸²ã€‚å®ä¾‹æ–¹æ³•å¦‚ä¸‹function toString(val) &#123; return val === null ? ' ' : typeof val === 'object' // æ ¼å¼åŒ–å¯¹è±¡ï¼Œå¹¶æŒ‡å®šç¼©è¿›ä¸º2ä¸ªç©ºæ ¼ ? JSON.stringify(val, null, 2) : String(val);&#125; è¿™é‡Œéœ€è¦è¯´æ˜ä¸‹_cä¸­createElementä¸­aã€bã€cã€då‚æ•°è¡¨ç¤ºçš„å«ä¹‰ï¼š 1234// aï¼štagï¼Œè¡¨ç¤ºæ ‡ç­¾å// bï¼šdataï¼Œè¡¨ç¤ºå±æ€§ã€äº‹ä»¶ã€classã€propsç­‰çš„é…ç½®å¯¹è±¡// c: childrenï¼Œè¡¨ç¤ºå­èŠ‚ç‚¹// dï¼šnormalizationTypeï¼Œè¡¨ç¤ºç±»å‹ï¼Œå³è¦å¦‚ä½•å¤„ç†childrenä¸­çš„æ•°æ® è‡³æ­¤ï¼Œæˆ‘ä»¬å¾—åˆ°äº†renderå‡½æ•°ï¼š 1render: `with(this)&#123;return $&#123;code&#125;&#125;`, VNodeçš„åˆ›å»ºæ˜¯åœ¨renderæ‰§è¡Œè¿‡ç¨‹ä¸­è§¦å‘çš„renderä¸­ç”¨with()æ‰§è¡Œäº†_c(),_v()ç­‰æ–¹æ³•ã€‚_c()å°±æ˜¯$createElement,åœ¨createElementçš„å¤„ç†é€»è¾‘ä¸­ï¼Œæœ€ä¸ºæ ¸å¿ƒçš„å°±æ˜¯è°ƒç”¨VNodeæ„é€ å‡½æ•°åˆ›å»ºè™šæ‹ŸDOM: 1new VNode(tag, data, children, undefined, undefined, context) ç„¶åå†è¯´ä¸€ä¸‹VNodeæ„é€ å‡½æ•°VNodeæ„é€ å‡½æ•°å®é™…ä¸Šå°±æ˜¯å®šä¹‰ç›¸å…³å±æ€§ï¼ŒVNodeä¸­é‡è¦çš„å±æ€§æœ‰ï¼š 12345678910// tagï¼šå½“å‰æ ‡ç­¾å// dataï¼šæ ‡ç­¾å±æ€§ã€propsã€äº‹ä»¶ç­‰å¯¹è±¡é›†åˆ// textï¼šå½“å‰æ ‡ç­¾æ–‡æœ¬å†…å®¹// contextï¼šä¸Šä¸‹æ–‡å¯¹è±¡ï¼Œå³Vueå®ä¾‹å¯¹è±¡var VNode = function(tag, data, children, text, elm, context, componentOptions, asyncFactory) &#123; this.tag = tag; this.data = data; this.children = children; ...&#125; renderä¸­åˆ›å»ºäº†VNodeï¼Œé‚£ä»€ä¹ˆæ—¶å€™è°ƒç”¨renderå‘¢??è¿™é‡Œè¯´æ˜ä¸‹ä¹‹å‰renderç”Ÿæˆæ—¶çš„è¿‡ç¨‹åŠæ—¶é—´ç‚¹ åˆå§‹åŒ–æ—¶renderMixinè¿™éƒ¨åˆ†æ˜¯åŠ è½½Vue.jsæ–‡ä»¶è¿‡ç¨‹ä¸­çš„å¤„ç†ï¼Œæ¶‰åŠåˆ°renderçš„æ˜¯renderMixinå‡½æ•°ï¼Œå®é™…ä¸Šè¯¥å‡½æ•°ä¸»è¦å®šä¹‰VueåŸå‹æ–¹æ³•ï¼š12// Vue.prototype.$nextTickæ–¹æ³•å®šä¹‰// Vue.prototype._renderæ–¹æ³•å®šä¹‰ new Vueæ—¶initRenderåˆ›å»ºVueå®ä¾‹æ—¶ä¼šè°ƒç”¨initRenderè¿›è¡Œåˆå§‹åŒ–ï¼Œå®é™…ä¸Šå°±æ˜¯ç›¸å…³å±æ€§çš„å®šä¹‰ $mountæŒ‚è½½renderå¤„ç†åœ¨è¿™ä¸ªæ—¶å€™å°†templateå¤„ç†æˆrenderå‡½æ•°ã€‚ $mountä¸­æ„å»ºå‡ºäº†renderå‡½æ•°ï¼Œé‚£å†æ¥çœ‹çœ‹renderå‡½æ•°çš„è°ƒç”¨ä¸Šå›¾æ˜¯mountComponentä¸»è¦çš„å¤„ç†é€»è¾‘ï¼Œå®é™…ä¸Šrenderå‡½æ•°çš„æ‰§è¡Œæ˜¯åœ¨_renderä¸­å¤„ç†çš„ã€‚_renderå‡½æ•°çš„ç»“æœä½œä¸ºvm._updateå‡½æ•°çš„å‚æ•°ã€‚è¿™é‡Œæœ‰ä¸€ä¸ªéå¸¸éœ€è¦æ³¨æ„çš„ç‚¹ï¼Œå®é™…ä¸Šæ˜¯åœ¨æ„å»ºWatcherå®ä¾‹è§¦å‘çš„ï¼š1234var updateComponent = function() &#123; vm._update(vm._render());&#125;;new Watcher(vm, updateComponent, noop) updateComponentä¼šä½œä¸ºgetterå‡½æ•°ï¼Œå¹¶ä¸”ä¼šåœ¨Watcher.prototype.getä¸­è¢«è°ƒç”¨ï¼Œè€Œè¿™ä¸ªæ­¥éª¤å°±æ˜¯é‡æ–°ç”Ÿæˆhtmlçš„è¿‡ç¨‹ã€‚ å†è¯´ä¸‹_renderæ–¹æ³•å®é™…ä¸Š_renderä¸­ä¸»è¦çš„å¤„ç†ä¹Ÿå°±æ˜¯renderå‡½æ•°çš„è°ƒç”¨ï¼Œæ ¸å¿ƒä»£ç å¦‚ä¸‹ï¼š12var vnode = render.call(vm._renderProxy, vm.$createElement);return vnode; å†è¯´ä¸‹_updateå®ä¾‹æ–¹æ³•_updateä¸­å¤„ç†å®é™…ä¸Šæœ‰ä¸¤ä¸ªä¸»è¦ç‚¹ï¼š12* vm._vnodeç›¸å…³å¤„ç†ï¼Œä¸¤ç‚¹ï¼šprevNode &#x3D; vm._vnodeï¼Œvm._vnode &#x3D; vnode* vm.__patch__çš„è°ƒç”¨ prevNodeè®°å½•æ›´æ–°å‰çš„vnodeï¼Œå¦‚æœæ˜¯åˆå§‹åŒ–ï¼Œé‚£ä¹ˆprevNodeå°±æ˜¯ç©ºï¼Œè°ƒç”¨patchå®ç°vnode -&gt; htmlçš„è¿‡ç¨‹ï¼Œä¹Ÿæ˜¯diffç®—æ³•çš„å®ç°è¿‡ç¨‹ï¼Œæ˜¯æ•´ä¸ªVueä¸­æ ¸å¿ƒç‚¹ä¹‹ä¸€ã€‚_updateæ ¸å¿ƒæºç å¦‚ä¸‹ï¼š123456789var prevNode = vm._vnode;vm._vnode = vnode;if (!prevNode) &#123; // åˆå§‹åŒ– vm.$el = vm.__patch__(vm.$elï¼Œvnode, hydrating, false);&#125; else &#123; // æ›´æ–° vm.$el = vm.__patch__(prevNode, vnode);&#125; _updateè´Ÿè´£æ¯”è¾ƒdomèŠ‚ç‚¹å¹¶æ›¿æ¢ã€‚æ€»ç»“é€šè¿‡ä¸Šé¢ä¸»è¦åˆ†æäº†å¤„ç†htmlã€å¤„ç†æ–‡æœ¬æƒ…å†µï¼Œå¯¹äºæŒ‡ä»¤ç›¸å…³ç­‰éƒ¨åˆ†ç›´æ¥ç•¥è¿‡ï¼Œæ»¡è¶³äº†åˆ†æè¿™è¾¹çš„ç›®çš„ï¼šæ¢å¯»ä¸‹Vueæ˜¯å¦‚ä½•è§£ætemplateçš„ã€‚æ•´ä¸ªå¤„ç†æµç¨‹å¦‚ä¸‹ï¼šæ„å»ºcodeï¼š123$mount -&gt; compileToFunctions -&gt; compile -&gt; baseCompile -&gt; parse -&gt; generate -&gt; renderå…¶ä¸­parseä¸­ä¸»è¦çš„å¤„ç†ï¼šparse -&gt; parseHTMLã€parseTextï¼ˆå¾ªç¯å¤„ç†startTagã€textç­‰ï¼‰ è€Œvnodeçš„åˆ›å»ºå®é™…ä¸Šæ˜¯åœ¨renderè°ƒç”¨é˜¶æ®µå‘ç”Ÿçš„ï¼Œå³æ‰§è¡Œrenderå‡½æ•°ï¼Œå‡½æ•°ä½“ä¸­_cã€_vç­‰å‡½æ•°è§¦å‘çš„VNodeåˆ›å»ºã€‚renderå‡½æ•°è°ƒç”¨:1ç”Ÿæˆrenderå‡½æ•° -&gt; mountComponent -&gt; new Watcher -&gt; Vue.prototype._renderè°ƒç”¨ åœ¨æŸ¥çœ‹æºç çš„è¿‡ç¨‹ä¸­ï¼Œæœç´¢äº†å„ç§èµ„æ–™å¸®åŠ©è‡ªå·±ç†è§£ï¼Œå…¶ä¸­æ¥è‡ªç‰æ¡ˆè½©çª—è€å“¥çš„Vueç³»åˆ—æ¡ç†æ¸…æ™°ï¼Œå¯¹è‡ªå·±å¸®åŠ©å¾ˆå¤§ã€‚ä»¥ä¸Šç¬”è®°ä¹Ÿå€Ÿé‰´äº†ä»–çš„å†…å®¹ï¼Œæ–¹ä¾¿ä¹‹åå­¦ä¹ ç†è§£ã€‚","categories":[{"name":"vue","slug":"vue","permalink":"https://feidom-up.github.io/categories/vue/"}],"tags":[{"name":"vue","slug":"vue","permalink":"https://feidom-up.github.io/tags/vue/"},{"name":"vueæºç è§£è¯»","slug":"vueæºç è§£è¯»","permalink":"https://feidom-up.github.io/tags/vue%E6%BA%90%E7%A0%81%E8%A7%A3%E8%AF%BB/"}]},{"title":"vueæºç è§£è¯»","slug":"vueæºç è§£è¯»","date":"2020-08-13T06:45:50.000Z","updated":"2024-08-22T02:26:03.661Z","comments":true,"path":"2020/08/13/vueæºç è§£è¯»/","link":"","permalink":"https://feidom-up.github.io/2020/08/13/vue%E6%BA%90%E7%A0%81%E8%A7%A3%E8%AF%BB/","excerpt":"","text":"çœ‹å®Œè¿™å¼ å›¾ å„é˜¶æ®µé—´è¯¦ç»†è§£è¯» html ã€Š==è½¬æ¢==ã€‹ vNode Observeré‡å†™arrayç›‘å¬ keep-aliveçš„å®ç°","categories":[{"name":"vue","slug":"vue","permalink":"https://feidom-up.github.io/categories/vue/"}],"tags":[{"name":"vue","slug":"vue","permalink":"https://feidom-up.github.io/tags/vue/"},{"name":"vueæºç è§£è¯»","slug":"vueæºç è§£è¯»","permalink":"https://feidom-up.github.io/tags/vue%E6%BA%90%E7%A0%81%E8%A7%A3%E8%AF%BB/"}]},{"title":"vue2.xæºç è§£è¯»ä¹‹observeré‡å†™arrayç›‘å¬","slug":"vueæºç è§£æä¹‹observeré‡å†™arrayç›‘å¬","date":"2020-08-12T06:37:36.000Z","updated":"2024-08-22T02:26:03.661Z","comments":true,"path":"2020/08/12/vueæºç è§£æä¹‹observeré‡å†™arrayç›‘å¬/","link":"","permalink":"https://feidom-up.github.io/2020/08/12/vue%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90%E4%B9%8Bobserver%E9%87%8D%E5%86%99array%E7%9B%91%E5%90%AC/","excerpt":"","text":"Observervueçš„æ ¸å¿ƒåŠŸèƒ½ä¹‹ä¸€å°±æ˜¯åŒå‘ç»‘å®šï¼Œåœ¨vue2.xä¸­ï¼ŒåŒå‘ç»‘å®šçš„åŸç†ï¼Œæ˜¯ä¾èµ–Object.definePropertyè¿™ä¸ªæ–¹æ³•ã€‚ç”±äºè¿™ä¸ªæ–¹æ³•çš„ä¸€äº›å¼Šç«¯ï¼Œå¯¼è‡´Observerçš„å®ç°ï¼Œéœ€è¦å…¼å®¹è¿™äº›å¼Šç«¯ã€‚ä»¥ä¸‹å†…å®¹è¯¦ç»†è¯´æ˜äº†æ¥é¾™å»è„‰ å…ˆè‡ªå·±å®ç°ä¸€ä¸ªObserver123456789101112131415161718192021function defineReactive(data, key, value)&#123; Object.defineProperty(data, key, &#123; enumerable: true, configurable: true, get: function defineGet()&#123; console.log(`get key: $&#123;key&#125; vaule:$&#123;value&#125;`); return value &#125;, set: function defineSet(newVal)&#123; console.log(`set key: $&#123;key&#125; vaule: vaule:$&#123;newVal&#125;`); value = newVal &#125; &#125;)&#125;function observe(data)&#123; Object.keys(data).forEach(function(key)&#123; defineReactive(data,key,data[key]) &#125;)&#125;// let arr = [1, 2, 3]// observe(arr) é¦–å…ˆå¯¹æ•°ç»„(arr)çš„ç›‘å¬12let arr = [1, 2, 3]observe(arr) ä»£ç è¿è¡Œåï¼Œåœ¨æ§åˆ¶å°ç›´æ¥ç»™arrå¢åŠ ä¸€ä¸ªå…ƒç´ ã€‚ä»£ç åŠè¾“å‡ºå¦‚ä¸‹ï¼š1234// é”®å…¥arr[3] = 4;// è¾“å‡º// 4 ===&gt; æ–°å¢çš„æ•°ç»„å…ƒç´ æ— æ³•ç›‘å¬åŸå› ï¼š åœ¨ç›‘å¬æ•°ç»„arræ—¶ï¼Œç›‘å¬äº†å®ƒçš„key:0,1,2(æ•°ç»„ä¸‹æ ‡)ã€‚å¹¶æ²¡æœ‰ç›‘å¬ä¸‹æ ‡3ï¼Œæ‰€ä»¥ç›‘å¬å¤±è´¥ã€‚ ä»£ç è¿è¡Œåï¼Œåœ¨æ§åˆ¶å°ç›´æ¥ç»™arræœ€å‰é¢unshiftä¸€ä¸ªå…ƒç´ ã€‚ä»£ç åŠè¾“å‡ºå¦‚ä¸‹ï¼š12345678910// é”®å…¥arr.unshift(1);// è¾“å‡º// get key: 2 vaule:3// get key: 1 vaule:2// set key: 2 vaule: vaule:2// get key: 0 vaule:1// set key: 1 vaule: vaule:1// set key: 0 vaule: vaule:4// 4 ===&gt; åœ¨è¿›è¡Œéƒ¨åˆ†æ•°ç»„æ“ä½œæ—¶ï¼Œä¼šé€ æˆç›‘å¬å¤šæ¬¡ï¼ˆæ•°ç»„ç§»ä½ï¼‰åŸå› ï¼š åœ¨ç›‘å¬æ•°ç»„arræ—¶ï¼Œç›‘å¬äº†å®ƒçš„key:0,1,2(æ•°ç»„ä¸‹æ ‡)ã€‚å½“åœ¨æ•°ç»„arrçš„å‰é¢æ’å…¥ä¸€ä¸ªæ•°æ®ï¼Œé€ æˆæ•°ç»„ç§»ä½ï¼ˆspliceä¹Ÿä¼šè¿™æ ·ï¼‰ï¼Œæ‰€æœ‰çš„å…ƒç´ å‘åç§»åŠ¨ä¸€ä¸ªä½ç½®ã€‚é€ æˆå¤šæ¬¡get/setã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š å¯¹å¯¹è±¡(obj)çš„ç›‘å¬12let obj = &#123;\"key1\":\"vaule1\"&#125;observe(obj) ä»£ç è¿è¡Œåï¼Œåœ¨æ§åˆ¶å°ç›´æ¥ç»™objå¢åŠ ä¸€ä¸ªå…ƒç´ obj[&quot;key2&quot;] = &quot;value2&quot;ã€‚ä»£ç åŠè¾“å‡ºå¦‚ä¸‹ï¼š1234// é”®å…¥obj[\"key2\"] = \"value2\";// è¾“å‡º// \"value2\" ===&gt; æ–°å¢çš„å¯¹è±¡å…ƒç´ æ— æ³•ç›‘å¬åŸå› ç±»åŒç›‘å¬æ•°ç»„æ—¶çš„æƒ…å†µ1 Observerçš„Object.definePropertyè¿™äº›é—®é¢˜ï¼Œvueå¦‚ä½•è§£å†³åœ¨vueçš„coreä¸­ï¼Œobserveä¸‹ä¸“é—¨å¯¹arrayçš„ç›‘å¬è¿›è¡Œäº†é‡å†™ï¼Œä»¥ä¸‹å†…å®¹ä¸ºæºç ä¸­çš„ä»£ç ç‰‡æ®µï¼Œæ¥è¯´æ˜å¦‚ä½•é‡å†™å®ç°ã€‚ 12345678910111213141516171819202122232425262728293031323334353637383940414243import &#123; def &#125; from '../util/index'const arrayProto = Array.prototype // è·å–ArrayåŸå‹export const arrayMethods = Object.create(arrayProto) // ç”¨æ–°çš„åŸå‹å¯¹è±¡åˆ›å»ºä¸€ä¸ªarrayMethods// å®šä¹‰ä¸€ä¸ªè¦é‡å†™çš„æ–¹æ³•çš„æ•°ç»„ï¼Œå…¶ä¸­çš„æ–¹æ³•ï¼Œéƒ½æ˜¯ä¼šå‘ç”Ÿæ•°ç»„ç§»ä½çš„const methodsToPatch = [ 'push', 'pop', 'shift', 'unshift', 'splice', 'sort', 'reverse']/** * æ‹¦æˆªå˜åŒ–æ–¹æ³•å¹¶å‘å‡ºäº‹ä»¶,éå†é‡å†™çš„æ–¹æ³•çš„æ•°ç»„methodsToPatch */methodsToPatch.forEach(function (method) &#123; // cache original method const original = arrayProto[method] // defæ˜¯ä¸€ä¸ªObject.defineProperty def(arrayMethods, method, function mutator (...args) &#123; const result = original.apply(this, args) const ob = this.__ob__ let inserted switch (method) &#123; case 'push': case 'unshift': inserted = args break case 'splice': inserted = args.slice(2) break &#125; if (inserted) ob.observeArray(inserted) // notify change // æ‰‹åŠ¨å‘å¸ƒå˜æ›´ä¿¡æ¯ ob.dep.notify() return result &#125;)&#125;)","categories":[{"name":"vue","slug":"vue","permalink":"https://feidom-up.github.io/categories/vue/"}],"tags":[{"name":"vue","slug":"vue","permalink":"https://feidom-up.github.io/tags/vue/"},{"name":"vueæºç è§£è¯»","slug":"vueæºç è§£è¯»","permalink":"https://feidom-up.github.io/tags/vue%E6%BA%90%E7%A0%81%E8%A7%A3%E8%AF%BB/"}]},{"title":"è®¾è®¡æ¨¡å¼-è§‚å¯Ÿè€…æ¨¡å¼","slug":"è§‚å¯Ÿè€…æ¨¡å¼","date":"2020-08-12T01:24:58.000Z","updated":"2024-08-22T02:26:03.664Z","comments":true,"path":"2020/08/12/è§‚å¯Ÿè€…æ¨¡å¼/","link":"","permalink":"https://feidom-up.github.io/2020/08/12/%E8%A7%82%E5%AF%9F%E8%80%85%E6%A8%A1%E5%BC%8F/","excerpt":"","text":"ç®€å•ä»‹ç»ä¸€ä¸‹è§‚å¯Ÿè€…æ¨¡å¼ï¼Œåˆç§°å‘å¸ƒ/è®¢é˜…æ¨¡å¼ï¼Œå®ƒå®šä¹‰äº†ä¸€ç§ä¸€å¯¹å¤šçš„å…³ç³»ï¼Œè®©å¤šä¸ªè§‚å¯Ÿè€…å¯¹è±¡åŒæ—¶ç›‘å¬æŸä¸€ä¸ªä¸»é¢˜å¯¹è±¡ï¼Œè¿™ä¸ªä¸»é¢˜å¯¹è±¡çš„çŠ¶æ€å‘ç”Ÿå˜åŒ–æ—¶å°±ä¼šé€šçŸ¥æ‰€æœ‰çš„è§‚å¯Ÿè€…å¯¹è±¡ï¼Œä½¿å¾—å®ƒä»¬èƒ½å¤Ÿè‡ªåŠ¨æ›´æ–°è‡ªå·±ã€‚ ä½¿ç”¨è§‚å¯Ÿè€…æ¨¡å¼çš„å¥½å¤„ï¼š æ”¯æŒç®€å•çš„å¹¿æ’­é€šä¿¡ï¼Œè‡ªåŠ¨é€šçŸ¥æ‰€æœ‰å·²ç»è®¢é˜…è¿‡çš„å¯¹è±¡ã€‚ é¡µé¢è½½å…¥åç›®æ ‡å¯¹è±¡å¾ˆå®¹æ˜“ä¸è§‚å¯Ÿè€…å­˜åœ¨ä¸€ç§åŠ¨æ€å…³è”ï¼Œå¢åŠ äº†çµæ´»æ€§ã€‚ ç›®æ ‡å¯¹è±¡ä¸è§‚å¯Ÿè€…ä¹‹é—´çš„æŠ½è±¡è€¦åˆå…³ç³»èƒ½å¤Ÿå•ç‹¬æ‰©å±•ä»¥åŠé‡ç”¨ã€‚ ç”¨javaScriptå®ç°ä¸€èˆ¬ç®€å•çš„è§‚å¯Ÿè€…æ¨¡å¼pub(Publish) å‘å¸ƒsub(Subscribe) è®¢é˜…dep å‘å¸ƒè®¢é˜…ä¸­å¿ƒ-ç”µè¯æœ¬ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354var dep = &#123;&#125;; // depç›¸å½“äºç”µè¯æœ¬ï¼Œæ‰€æœ‰è®¢é˜…è€…éƒ½æ³¨å†Œåœ¨è¿™é‡Œ(function (q) &#123; var topics = &#123;&#125;, // å›è°ƒå‡½æ•°å­˜æ”¾çš„æ•°ç»„ subUid = -1; // å‘å¸ƒæ–¹æ³• q.publish = function (topic, args) &#123; if (!topics[topic]) &#123; return false; &#125; setTimeout(function () &#123; var subscribers = topics[topic], len = subscribers ? subscribers.length : 0; while (len--) &#123; // éå†æ‰€æœ‰è®¢é˜…çš„æ–¹æ³•ï¼Œå…¨éƒ¨æ‰§è¡Œ subscribers[len].func(topic, args); &#125; &#125;, 0); return true; &#125;; // è®¢é˜…æ–¹æ³• // @param topic è®¢é˜…è€…åç§° // @param func è®¢é˜…æ–¹æ³•ï¼Œé€šçŸ¥æ—¶ï¼Œè°ƒç”¨è¿™ä¸ªæ–¹æ³•å®ç°é€šçŸ¥ q.subscribe = function (topic, func) &#123; if (!topics[topic]) &#123; // æ³¨å†Œè§‚å¯Ÿå¯¹è±¡ topics[topic] = []; &#125; var token = (++subUid).toString(); // æ–¹æ³•çš„å”¯ä¸€å£ä»¤æ ‡è¯†ï¼Œé€€è®¢æ—¶å¯ç”¨ // æ³¨å†Œè§‚å¯Ÿæ–¹æ³• topics[topic].push(&#123; token: token, func: func &#125;); return token; &#125;; //é€€è®¢æ–¹æ³• q.unsubscribe = function (token) &#123; for (var m in topics) &#123; if (topics[m]) &#123; for (var i = 0, j = topics[m].length; i &lt; j; i++) &#123; if (topics[m][i].token === token) &#123; // æ ¹æ®å”¯ä¸€å£ä»¤æ ‡è¯† ç§»é™¤è§‚å¯Ÿæ–¹æ³•ï¼Œå®ç°é€€è®¢ topics[m].splice(i, 1); return token; &#125; &#125; &#125; &#125; return false; &#125;;&#125; (dep)); ä½¿ç”¨ä¸Šé¢è¿™ä¸ªè§‚å¯Ÿè€…æ¨¡å¼ 12345678910111213141516// æ¥ï¼Œè®¢é˜…ä¸€ä¸ªpubsub.subscribe('example1', function (topics, data) &#123; // é€šçŸ¥æ—¶ï¼Œè¿™ä¸ªæ–¹æ³•æ”¶åˆ°é€šçŸ¥æ‰§è¡Œ console.log(topics + \": \" + data);&#125;)// å†åŠ ä¸€ä¸ªè®¢é˜…æ–¹æ³•pubsub.subscribe('example1', function (topics, data) &#123; // è¿™ä¸ªæ–¹æ³•ä¹Ÿæ”¶åˆ°é€šçŸ¥æ‰§è¡Œ if(!Array.isArray(data))&#123; console.log('æ¥åˆ°é€šçŸ¥2',topics, data) &#125;&#125;)//å‘å¸ƒé€šçŸ¥pubsub.publish('example1', 'hello world!');pubsub.publish('example1', ['test', 'a', 'b', 'c']);pubsub.publish('example1', [&#123; 'color': 'blue' &#125;, &#123; 'text': 'hello'&#125;]); ä¸€å¼ å›¾è¯´æ¸…æ¥šè§‚å¯Ÿè€…æ¨¡å¼ ç‰¹åˆ«é¸£è°¢æ­¤ç¯‡ç¬”è®°æ˜¯çœ‹äº†æ±¤å§†å¤§å”çš„åšå®¢-æ·±å…¥ç†è§£JavaScriptç³»åˆ—ï¼ˆ32ï¼‰ï¼šè®¾è®¡æ¨¡å¼ä¹‹è§‚å¯Ÿè€…æ¨¡å¼,ç¬”è®°å†…å®¹å¤§å¤šæ¥è‡ªè¯¥ç¯‡åšå®¢ã€‚å¤§å”çš„åšå®¢ä¸­è¿˜æœ‰å…¶ä»–è§‚å¯Ÿè€…æ¨¡å¼çš„å®ç°æ–¹å¼ï¼Œå¦‚éœ€æ›´æ·±çš„ç†è§£ï¼Œè¯·ç§»æ­¥ã€‚","categories":[{"name":"è®¾è®¡æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼","permalink":"https://feidom-up.github.io/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"}],"tags":[{"name":"è®¾è®¡æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼","permalink":"https://feidom-up.github.io/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"}]},{"title":"vueä¸­ä½¿ç”¨gsapçš„åŠ¨ç”»æ’ä»¶","slug":"vueä¸­ä½¿ç”¨tweenmaxåŠ¨ç”»æ’ä»¶","date":"2020-08-07T03:01:26.000Z","updated":"2024-08-22T02:26:03.661Z","comments":true,"path":"2020/08/07/vueä¸­ä½¿ç”¨tweenmaxåŠ¨ç”»æ’ä»¶/","link":"","permalink":"https://feidom-up.github.io/2020/08/07/vue%E4%B8%AD%E4%BD%BF%E7%94%A8tweenmax%E5%8A%A8%E7%94%BB%E6%8F%92%E4%BB%B6/","excerpt":"","text":"gsap åŠ¨ç”»TweenMaxåŸºç¡€æ¡ˆä¾‹ npm install / yarn add äºŒé€‰ä¸€ 12npm install gsap --saveyarn add gsap component.vueå±€éƒ¨å¼•å…¥ï¼Œå“ªé‡Œéœ€è¦å“ªé‡Œæ¬ 12345678910111213141516171819202122232425262728&lt;template&gt; &lt;div&gt; &lt;div id=\"demo\"&gt; &lt;p&gt;ä»¥ä¸‹ä¾‹å­æ¯ä¸ªåŠ¨ç”»çš„å¼€å§‹æ—¶é—´æŒ‰0.5s é”™å¼€ã€‚TweenLiteæ²¡æœ‰staggerã€‚&lt;/p&gt; &lt;div class=\"box green\"&gt;&lt;/div&gt; &lt;div class=\"box grey\"&gt;&lt;/div&gt; &lt;div class=\"box orange\"&gt;&lt;/div&gt; &lt;div class=\"box green\"&gt;&lt;/div&gt; &lt;div class=\"box grey\"&gt;&lt;/div&gt; &lt;div class=\"box orange\"&gt;&lt;/div&gt; &lt;div class=\"box green\"&gt;&lt;/div&gt; &lt;div class=\"box grey\"&gt;&lt;/div&gt; &lt;div class=\"box orange\"&gt;&lt;/div&gt; &lt;/div&gt; &lt;el-button @click=\"showTest()\"&gt;å¼€å§‹&lt;/el-button&gt; &lt;/div&gt; &lt;template&gt;&lt;script&gt; import &#123; TweenLite, TweenMax &#125; from 'gsap' export default &#123; methods: &#123; showTest: function()&#123; //TweenMaxã€TimelineLiteã€TimelineMaxå¯ä»¥ä½¿ç”¨staggerï¼ˆé”™å¼€åŠ¨ç”»ï¼‰ï¼ŒTweenLiteåˆ™æ²¡æœ‰ã€‚ TweenMax.staggerTo(\".box\", 1, &#123;rotation:360, y:100&#125;, 0.5); &#125; &#125; &#125;;&lt;/script&gt;","categories":[{"name":"vue","slug":"vue","permalink":"https://feidom-up.github.io/categories/vue/"}],"tags":[{"name":"vue","slug":"vue","permalink":"https://feidom-up.github.io/tags/vue/"},{"name":"åŠ¨ç”»","slug":"åŠ¨ç”»","permalink":"https://feidom-up.github.io/tags/%E5%8A%A8%E7%94%BB/"},{"name":"tweenmax","slug":"tweenmax","permalink":"https://feidom-up.github.io/tags/tweenmax/"},{"name":"gsap","slug":"gsap","permalink":"https://feidom-up.github.io/tags/gsap/"}]},{"title":"vueä¸­ä½¿ç”¨animate.css","slug":"vueä¸­ä½¿ç”¨animateCss","date":"2020-08-07T02:51:11.000Z","updated":"2024-08-22T02:26:03.661Z","comments":true,"path":"2020/08/07/vueä¸­ä½¿ç”¨animateCss/","link":"","permalink":"https://feidom-up.github.io/2020/08/07/vue%E4%B8%AD%E4%BD%BF%E7%94%A8animateCss/","excerpt":"","text":"åœ¨vueé¡¹ç›®ä¸­ä½¿ç”¨animate.cssé…åˆvueä¸­çš„transitionæ ‡ç­¾æ¥ç»“åˆanimate.cssä¸­çš„æ•ˆæœ npm install / yarn add äºŒé€‰ä¸€ 12yarn add animate.css@3.5.1# åœ¨è¿™è¦è£…3.5.1çš„ç‰ˆæœ¬ï¼Œè£…äº†4.0ä¹‹åçš„ç‰ˆæœ¬ï¼Œä¼šä¸ç”Ÿæ•ˆã€‚æ˜¯ç‰ˆæœ¬å…¼å®¹é—®é¢˜ main.js 12import animate from 'animate.css'Vue.use(animate); component.vue 1234567891011&lt;template&gt; &lt;div&gt; &lt;transition enter-active-class=\"animated bounceIn\" leave-active-class=\"animated bounceOut\" :duration=\"1000\"&gt; &lt;h3 v-show=\"show\"&gt;è¿™ä¸ªå…ƒç´ å­˜åœ¨åŠ¨ç”»æ•ˆæœ&lt;/h3&gt; &lt;/transition&gt; &lt;el-button @click=\"show=!show\"&gt;å¼€å§‹è¡¨æ¼”&lt;/el-button&gt; &lt;/div&gt; &lt;template&gt;","categories":[{"name":"vue","slug":"vue","permalink":"https://feidom-up.github.io/categories/vue/"}],"tags":[{"name":"css","slug":"css","permalink":"https://feidom-up.github.io/tags/css/"},{"name":"vue","slug":"vue","permalink":"https://feidom-up.github.io/tags/vue/"},{"name":"åŠ¨ç”»","slug":"åŠ¨ç”»","permalink":"https://feidom-up.github.io/tags/%E5%8A%A8%E7%94%BB/"}]},{"title":"Cssä»è¾¹è§’èµ°å‘ä¸­å¿ƒ","slug":"postcss","date":"2020-08-04T07:25:26.000Z","updated":"2024-08-22T02:26:03.659Z","comments":true,"path":"2020/08/04/postcss/","link":"","permalink":"https://feidom-up.github.io/2020/08/04/postcss/","excerpt":"","text":"è¢«è½»è§†çš„CSSCSSæ˜¯Cascading Style Sheetsï¼ˆå±‚å æ ·å¼è¡¨å•ï¼‰çš„ç®€ç§°ã€‚è¿™ç§æ ·å¼è„šæœ¬ä¸€ç›´å’Œå…¶ä»–ç¼–ç¨‹è¯­è¨€æœ‰å·®è·ã€‚å¯¼è‡´äº†cssè¢«è½»è§†ã€‚è¿‘å‡ å¹´æ‰€æœ‰çš„å‰ç«¯æŠ€æœ¯éƒ½åœ¨ç–¯ç‹‚çš„è¿­ä»£æ›´æ–°ï¼Œcssä¹Ÿä¸ä¾‹å¤–ã€‚ä»sassï¼Œlessï¼Œstylusè¿™äº›é¢„å¤„ç†å™¨ä¹‹åï¼Œåˆ°CSS Moduleï¼ŒCSS-in-JSï¼ˆå…¸å‹çš„ä»£è¡¨ï¼Œreactçš„styled-componentsï¼‰ã€‚å†èŠèŠPostCssè¿™ç§æ’ä»¶ç³»ç»Ÿã€‚ é¢„å¤„ç†å™¨åœ¨csså‘å±•çš„è¿‡ç¨‹ä¸­ï¼Œå‡ºç°äº†ä¸€äº›ç—›ç‚¹ï¼š è¯­æ³•ä¸å¤Ÿå¼ºå¤§ï¼Œä¸èƒ½å¤ŸåµŒå¥—ä¹¦å†™ï¼Œä¸åˆ©äºæ¨¡å—å¼€å‘ æ²¡æœ‰å˜é‡å’Œé€»è¾‘ä¸Šçš„å¤ç”¨æœºåˆ¶ï¼Œå¯¼è‡´åœ¨cssçš„å±æ€§å€¼ä¸­åªèƒ½ä½¿ç”¨å­—é¢é‡å½¢å¼ï¼Œä»¥åŠä¸æ–­é‡å¤çš„æ ·å¼ï¼Œå¯¼è‡´éš¾ä»¥ç»´æŠ¤ã€‚ ç„¶åcssé¢„å¤„ç†å™¨çš„å‡ºç°ï¼Œå¼¥è¡¥äº†è¿™äº›é—æ†¾ï¼š å˜é‡ï¼šå¯¹å˜é‡è¿›è¡Œå£°æ˜ï¼Œåœ¨éœ€è¦çš„åœ°æ–¹å¼•ç”¨ã€‚ ä½œç”¨åŸŸï¼šå¯¹å˜é‡è¿›è¡Œç®¡ç†ï¼Œåƒjsä¸€æ ·ï¼Œä»å±€éƒ¨ä½œç”¨åŸŸå¼€å§‹å‘ä¸ŠæŸ¥æ‰¾å˜é‡ã€‚ åµŒå¥—ï¼šç”±äºdomçš„æ ‘çŠ¶ç»“æ„ï¼Œcssæœ‰åµŒå¥—çš„å†™æ³•ï¼Œæ›´ç›´æ¥çš„è¡¨ç°äº†çˆ¶å­å±‚çº§ä¹‹é—´çš„æ˜ç¡®å…³ç³»ã€‚ æ··åˆ(Mixin) Extendï¼š è¿ç®—ï¼š å‡½æ•°ï¼š Namespaces&amp;Accessorsï¼š scopeï¼š æ³¨é‡Šï¼š cssé¢„å¤„ç†å™¨æä¾›çš„è¿™äº›æ–¹æ¡ˆï¼Œæ˜¯æˆ‘ä»¬å¼€å‘äººå‘˜åœ¨å†™cssæ—¶æ›´åŠ çµæ´»ï¼Œç»´æŠ¤æ€§å¼ºã€‚ä½†æ˜¯ï¼Œé¡¹ç›®è¶Šæ¥è¶Šå¤§ï¼Œç¼ºä¹æ¨¡å—çš„æ¦‚å¿µï¼Œå…¨å±€å˜é‡çš„é—®é¢˜å›°æ‰°ç€ä½ ã€‚æ¯æ¬¡å®šä¹‰é€‰æ‹©å™¨æ—¶ï¼Œæ€»è¦é¡¾åŠåˆ°å…¶ä»–æ–‡ä»¶ä¸­æ˜¯å¦ä½¿ç”¨äº†åŒæ ·çš„å‘½åã€‚ æœ‰é—®é¢˜å°±æœ‰è§£å†³ï¼Œå„ç§æ–¹æ¡ˆå‡ºç°ï¼ˆcssåˆ†å±‚ï¼‰Qï¼šä¸ºä»€ä¹ˆè¦åˆ†å±‚ï¼ŸA:åŸå› ï¼š CSSæœ‰è¯­ä¹‰åŒ–çš„å‘½åçº¦å®šå’ŒCSSå±‚çš„åˆ†ç¦»ï¼Œå°†æœ‰åŠ©äºå®ƒçš„å¯æ‰©å±•æ€§ï¼Œæ€§èƒ½çš„æâ¾¼å’Œä»£ç çš„ç»„ç»‡ç®¡ç†ã€‚ â¼¤é‡çš„æ ·å¼ï¼Œè¦†ç›–ã€æƒé‡å’Œå¾ˆå¤š!importantï¼Œåˆ†å¥½å±‚å¯ä»¥è®©å›¢é˜Ÿå‘½åç»Ÿâ¼€è§„èŒƒï¼Œâ½…ä¾¿ç»´æŠ¤ã€‚ æœ‰è´£ä»»æ„Ÿåœ°å»å‘½åä½ çš„é€‰æ‹©å™¨ã€‚ åˆ†å±‚çš„è®¾è®¡è§„èŒƒæœ‰å¾ˆå¤šï¼Œä»¥ä¸‹å…·ä½“ä»‹ç»BEMè§„èŒƒ BEMè§„èŒƒå’ŒSMACCSâ¾®å¸¸ç±»ä¼¼ï¼Œä¸»è¦â½¤æ¥å¦‚ä½•ç»™é¡¹â½¬å‘½åã€‚â¼€ä¸ªç®€å•å‘½åæ›´å®¹æ˜“è®©åˆ«â¼ˆâ¼€èµ·â¼¯ä½œã€‚â½å¦‚é€‰é¡¹å¡å¯¼èˆªæ˜¯â¼€ä¸ªå—(Block)ï¼Œè¿™ä¸ªå—â¾¥çš„å…ƒç´ çš„æ˜¯å…¶ä¸­æ ‡ç­¾ä¹‹â¼€(Element)ï¼Œâ½½å½“å‰é€‰é¡¹å¡æ˜¯â¼€ä¸ªä¿®é¥°çŠ¶æ€(Modifier)ï¼š1234567891011121314// bookListæ¨¡å— &lt;form class=\"list-from\"&gt; &lt;input class=\"list-from__input\"&gt;&lt;/input&gt; &lt;button class=\"list-from__button\"&gt;&lt;/button&gt;&lt;/form&gt;// å…¶ä¸­å½’ç±»ä¸ºä»¥ä¸‹çº¦å®š// BEMï¼šå—ï¼ˆblockï¼‰ã€å…ƒç´ ï¼ˆelementï¼‰ã€ä¿®é¥°ç¬¦ï¼ˆmodifierï¼‰.block&#123;&#125; // ä»£è¡¨äº†æ›´â¾¼çº§åˆ«çš„æŠ½è±¡æˆ–ç»„ä»¶.block__element&#123;&#125; // ä»£è¡¨.blockçš„åä»£ï¼Œâ½¤äºå½¢æˆâ¼€ä¸ªå®Œæ•´çš„.blockçš„æ•´ä½“.block--modifier&#123;&#125; // ä»£è¡¨.blockçš„ä¸åŒçŠ¶æ€æˆ–ä¸åŒç‰ˆæœ¬// å…¶ä¸­å—å¯ä»¥ç”¨å•ä¸ªè¿å­—ç¬¦æ¥ç•Œå®šï¼šå¦‚.site-search&#123;&#125; //å—.site-search__field&#123;&#125; //å…ƒç´ .site-search--full&#123;&#125; //ä¿®é¥°ç¬¦ â€¦â€¦å¥½éº»çƒ¦ã€‚ è¿˜æœ‰SMACSS(Scalable and Modular Architecture for CSS å¯æ‰©å±•çš„æ¨¡å—åŒ–æ¶æ„çš„CSS)ã€SUITï¼šè¡ç”Ÿè‡ªBEMã€ACSSï¼šåŸå­cssè§„èŒƒã€ITCSS åå¤„ç†å™¨ CSSå‹ç¼© ClEAN_CSS è‡ªåŠ¨æ·»åŠ æµè§ˆå™¨å‰ç¼€ Autoprefixer CSSæ›´åŠ ç¾è§‚æ’åº CSScomb Reworkå–ä»£stylesï¼Œåå¤„ç†å™¨å‘çƒ­ è¿‘å‡ å¹´ç«çˆ†çš„CSS Moduleï¼ŒCSS-in-JSï¼ˆå…¸å‹çš„ä»£è¡¨ï¼Œreactçš„styled-componentsï¼‰ã€‚å¯ä»¥å‚è€ƒé˜®ä¸€å³°å†™çš„CSS Moduleçœ‹8æœˆ3è€è¢çš„è¯¾ï¼Œå†™ä¸€ä¸‹ã€‚ PostCSSæ˜¯ä»€ä¹ˆï¼ŸPostCSSæ˜¯ä¸€ä¸ªç”¨ JavaScript å·¥å…·å’Œæ’ä»¶è½¬æ¢ CSS ä»£ç çš„å·¥å…·ã€‚â€”-å®˜æ–¹ç®€ä»‹ PostCSSåŒæ—¶æ”¯æŒé¢„å¤„ç†å’Œåå¤„ç†ï¼Œä¹Ÿå¯ä»¥åœ¨åŸç”Ÿçš„cssä¸­ä½¿ç”¨å®ƒã€‚é€šä¿—æ¥è¯´ï¼ŒPostCSSæ˜¯ä¸€ä¸ªâ€œå£³å£³â€ï¼Œå¯ä»¥åŠ è½½å„ç§ç”Ÿæ€ä¸­çš„æ’ä»¶æ¥å®ç°å¯¹cssçš„å¤„ç†ï¼Œå¯ä»¥ç»“åˆå…¼å®¹sassï¼Œlessç­‰ ä¸‹é¢ä»‹ç»å‡ ç§æ’ä»¶ï¼ˆpluginsï¼‰ï¼š postcss-cssnext plugin â€” ä½¿ç”¨ä¸‹ä¸ªç‰ˆæœ¬çš„cssè¯­æ³•ï¼Œè¯­æ³•è§cssnext (css4)è¯­æ³• postcss-custom-properties â€” è¿è¡Œæ—¶å˜é‡ postcss-simple-vars â€” ä¸SCSSä¸€è‡´çš„å˜é‡å®ç° postcss-mixins â€” å®ç°ç±»ä¼¼sassçš„@mixinçš„åŠŸèƒ½ postcss-extend â€” å®ç°ç±»ä¼¼sassçš„ç»§æ‰¿åŠŸèƒ½ postcss-import â€” å®ç°ç±»ä¼¼sassçš„importä½¿ç”¨gulpå’Œwebpackå¤„ç†postcssä»£ç ï¼š// gulpfile.js1234567891011121314151617181920212223var gulp = require('gulp'); var postcss = require('gulp-postcss'); var autoprefixer = require('autoprefixer'); var cssgrace = require('cssgrace'); var cssnext = require('cssnext'); gulp.task('css', function () &#123; var processors = [ autoprefixer(&#123;browsers: ['last 3 version'], cascade: false, remove: false &#125;), cssnext(), cssgrace ]; return gulp.src('./src/css/*.css') .pipe(postcss(processors)) .pipe(gulp.dest('./dist')); &#125;); gulp.task('watch', function()&#123; gulp.watch('./src/css/*.css', ['css']); &#125;); gulp.task('default', ['watch', 'css']); // webpack.conf.js1234567891011121314var config = &#123; output:&#123;publicPath: '../dist/'&#125;, module:&#123; // loaders... &#125;, postcss: function()&#123; return [ ima4dpr(dpr: 3,q: 'q50',s: 's150'&#125;), px2rem(&#123;remUnit: remUnit, baseDpr: baseDpr &#125;), autoprefixer(&#123;browers: [\"ios_saf &gt;= 7\",\"android &gt;= 4\"]&#125;) ] &#125;, devtool: 'source-map'&#125; æ‰“åŒ…å¤„ç†é€»è¾‘å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š ä»¥ä¸Šå†…å®¹å€Ÿé‰´zimoçš„ã€Šè°ˆè°ˆPostCSSã€‹","categories":[{"name":"css","slug":"css","permalink":"https://feidom-up.github.io/categories/css/"}],"tags":[{"name":"css","slug":"css","permalink":"https://feidom-up.github.io/tags/css/"},{"name":"postcss","slug":"postcss","permalink":"https://feidom-up.github.io/tags/postcss/"}]},{"title":"npm/yarnåŠå…¶ä»–åŒ…ç®¡ç†å·¥å…·å¸¸ç”¨æ€»ç»“","slug":"npmå¸¸ç”¨åŒ…","date":"2020-08-02T01:32:06.000Z","updated":"2024-08-22T02:26:03.659Z","comments":true,"path":"2020/08/02/npmå¸¸ç”¨åŒ…/","link":"","permalink":"https://feidom-up.github.io/2020/08/02/npm%E5%B8%B8%E7%94%A8%E5%8C%85/","excerpt":"","text":"å®‰è£… npmè£…äº†nodeJsä¼šè£…å¥½npm yarnå®‰è£…yarn npm install -g yarn ä¿®æ”¹æº npm (æ·˜å®æº ï½œ æœ¬æº)npm config set registry http://registry.npm.taobao.org/ npm config set registry https://registry.npmjs.org/ yarn (æ·˜å®æº ï½œ æœ¬æº)yarn config set registry http://registry.npm.taobao.org/ yarn config set registry https://registry.npmjs.org/ è®¾ç½®ä»£ç† npmnpm config set proxy http://127.0.0.1:8080 npm config set https-proxy http://127.0.0.1:8080 yarnyarn config set proxy http://127.0.0.1:8080 yarn config set https-proxy http://127.0.0.1:8080 åˆ é™¤ä»£ç† npmnpm config delete proxy npm config delete https-proxy yarnyarn config delete proxy yarn config delete https-proxy æŸ¥çœ‹å®‰è£…åŒ… npmnpm list -g --depth 0 yarnyarn global list --depth=0 npx npx æ˜¯ npm 5.2+ ç‰ˆæœ¬ä¹‹åè‡ªå¸¦çš„å·¥å…·ï¼Œèƒ½å¤Ÿå¸®åŠ©æˆ‘ä»¬æ›´é«˜æ•ˆçš„æ‰§è¡Œ npm è½¯ä»¶ä»“åº“é‡Œçš„å®‰è£…åŒ…ã€‚å¯¹äºé‚£äº›ä¸å¸¸ä½¿ç”¨ã€æˆ–è€…åªæƒ³ä¸€æ¬¡æ€§å°è¯•çš„å·¥å…·ï¼Œæ¨èä½¿ç”¨ npx çš„æ–¹å¼ä»£æ›¿ npm install -gã€yarn global å…¨å±€å®‰è£… $ npx create-react-app my-app # æ‰§è¡Œä»¥ä¸Šè¿™æ¡å‘½ä»¤ npx ä¼šæŒ‰ä»¥ä¸‹é¡ºåºå·¥ä½œï¼š # 1. å…ˆæŸ¥çœ‹å½“å‰é¡¹ç›®æœ‰æ²¡ create-react-app # 2. å¦‚æœå½“å‰é¡¹ç›®æ‰¾ä¸åˆ°ï¼Œä¼šå»å…¨å±€æŸ¥æ‰¾ create-react-app # 3. å¦‚æœå…¨å±€è¿˜æ‰¾ä¸åˆ°ï¼Œä¼šå¸®æˆ‘ä»¬ä¸´æ—¶ä» npm åŒ…ä»“åº“å®‰è£… create-react-appï¼Œä¸ä¼šæ±¡æŸ“åˆ°å½“å‰é¡¹ç›®ï¼Œä¹Ÿä¸ä¼šè£…åˆ°å…¨å±€","categories":[{"name":"npm","slug":"npm","permalink":"https://feidom-up.github.io/categories/npm/"}],"tags":[{"name":"yarn","slug":"yarn","permalink":"https://feidom-up.github.io/tags/yarn/"},{"name":"npm","slug":"npm","permalink":"https://feidom-up.github.io/tags/npm/"}]},{"title":"package.jsonäº†è§£å¤šå°‘","slug":"packageåŒ…","date":"2020-08-02T01:17:51.000Z","updated":"2024-08-22T02:26:03.659Z","comments":true,"path":"2020/08/02/packageåŒ…/","link":"","permalink":"https://feidom-up.github.io/2020/08/02/package%E5%8C%85/","excerpt":"","text":"scriptså±æ€§ç”Ÿå‘½å‘¨æœŸ preé’©å­1234\"scripts\": &#123; \"predev\": \"echo 111\", \"dev\": \"echo 222\"&#125;, ä¸Šè¿°ä»£ç æ‰§è¡Œyarn run dev,ä¼šå…ˆæ‰§è¡Œpreé’©å­ï¼Œç»“æœå¦‚ä¸‹ï¼š1234$ yarn run dev// ä»¥ä¸‹ä¸ºç»“æœ111222 &amp;(åŒæ­¥ä¸²è¡Œ) å’Œ &amp;&amp;(å¼‚æ­¥å¹¶è¡Œ)12345\"scripts\": &#123; \"dev\": \"echo 111\", \"server\": \"echo 222\", \"start\": \"npm run dev &amp; npm run server\"&#125;, ä¸Šè¿°ä»£ç æ‰§è¡Œyarn start,ä¼šå…ˆæ‰§è¡Œdev,å†æ‰§è¡Œserverï¼Œdevæœ‰æŠ¥é”™ï¼Œserverä¸ä¼šè¢«æ‰§è¡Œã€‚12345\"scripts\": &#123; \"dev\": \"echo 111\", \"server\": \"echo 222\", \"start\": \"npm run dev &amp;&amp; npm run server\"&#125;, ä¸Šè¿°ä»£ç æ‰§è¡Œyarn start,ä¼šåŒæ­¥è¡Œdevå’Œserverï¼Œdevæœ‰æŠ¥é”™ï¼Œserverä»ä¼šè¢«æ‰§è¡Œã€‚","categories":[{"name":"nodejs","slug":"nodejs","permalink":"https://feidom-up.github.io/categories/nodejs/"}],"tags":[{"name":"nodejs","slug":"nodejs","permalink":"https://feidom-up.github.io/tags/nodejs/"}]},{"title":"Nginx 403 Forbidden","slug":"nginx403","date":"2020-07-31T08:05:22.000Z","updated":"2024-08-22T02:26:03.659Z","comments":true,"path":"2020/07/31/nginx403/","link":"","permalink":"https://feidom-up.github.io/2020/07/31/nginx403/","excerpt":"","text":"æ£€æŸ¥ç›®å½•æƒé™ã€‚æƒé™ä¸è¶³çš„å°±åŠ ä¸ªæƒé™ã€‚ 1chmod -R 755 /root/feidom_blog/ nginx.confä¸­çš„useré—®é¢˜ 1234$ vi /usr/local/nginx/conf/nginx.conf# user nobody;# æŠŠ user ç”¨æˆ·å æ”¹ä¸º user root æˆ– å…¶å®ƒæœ‰é«˜æƒé™çš„ç”¨æˆ·åç§°å³å¯user root; centosä¸­çš„selinuxæ˜¯å¦ä¸ºå…³é—­çŠ¶æ€æŸ¥çœ‹SELinuxçŠ¶æ€ï¼š 123$ &#x2F;usr&#x2F;sbin&#x2F;sestatus -vSELinux status: disabled## disabled&#x2F;enabled (å…³é—­&#x2F;å¼€å¯) å…³é—­SELinuxï¼š ä¸´æ—¶å…³é—­ï¼Œä¸ç”¨é‡å¯æœºå™¨ã€‚$ setenforce 0 #è®¾ç½®SELinux æˆä¸ºpermissiveæ¨¡å¼;$ setenforce 1 #è®¾ç½®SELinux æˆä¸ºenforcingæ¨¡å¼ ä¿®æ”¹/etc/selinux/config æ–‡ä»¶åï¼Œé‡å¯æœºå™¨ä½¿å…¶ç”Ÿæ•ˆã€‚SELINUX=enforcing æ”¹ä¸º SELINUX=disabled","categories":[{"name":"å‰ç«¯å·¥ç¨‹åŒ–","slug":"å‰ç«¯å·¥ç¨‹åŒ–","permalink":"https://feidom-up.github.io/categories/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96/"}],"tags":[{"name":"é—®é¢˜è§£å†³","slug":"é—®é¢˜è§£å†³","permalink":"https://feidom-up.github.io/tags/%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3/"},{"name":"Nginx","slug":"Nginx","permalink":"https://feidom-up.github.io/tags/Nginx/"}]},{"title":"DNSåŸŸåè§£æ","slug":"DNSåŸŸåè§£æ","date":"2020-07-28T00:52:35.000Z","updated":"2024-08-22T02:26:03.657Z","comments":true,"path":"2020/07/28/DNSåŸŸåè§£æ/","link":"","permalink":"https://feidom-up.github.io/2020/07/28/DNS%E5%9F%9F%E5%90%8D%E8%A7%A3%E6%9E%90/","excerpt":"","text":"DNS: domain name system ä½œç”¨ï¼šå°†åŸŸåè§£æåˆ°å¯¹åº”çš„ipåœ°å€è§£æåŸç†ï¼šåˆ†çº§è§£æ åŸŸååˆ†çº§(ä¸€çº§ï¼ŒäºŒçº§ï¼Œä¸‰çº§) www.baidu.com comæ˜¯æ ¹åŸŸåï¼Œbaidu.comæ˜¯ä¸€çº§åŸŸåï¼ˆé¡¶çº§åŸŸåï¼‰ï¼Œwww.baidu.comæ˜¯äºŒçº§åŸŸå ip åˆ†ä¸ºipv4ï¼Œipv6 è§£æè¯¦è§£ www.baidu.com? com = 1.1.1.1 ï¼ˆTLDæœåŠ¡å™¨åœ°å€ï¼‰ www.baidu.com? baidu.com = 2.2.2.2 ï¼ˆåç§°æœåŠ¡å™¨åœ°å€ name serverï¼‰ www.baidu.com? www.baidu.com = 3.3.3.3 ï¼ˆç›®æ ‡ipåœ°å€ï¼‰ dnsç¼“å­˜å¯ä»¥ä½¿è§£ææ›´å¿«å“åº”ã€‚","categories":[{"name":"å‰ç«¯æ€§èƒ½ä¼˜åŒ–","slug":"å‰ç«¯æ€§èƒ½ä¼˜åŒ–","permalink":"https://feidom-up.github.io/categories/%E5%89%8D%E7%AB%AF%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/"}],"tags":[{"name":"å‰ç«¯æ€§èƒ½ä¼˜åŒ–","slug":"å‰ç«¯æ€§èƒ½ä¼˜åŒ–","permalink":"https://feidom-up.github.io/tags/%E5%89%8D%E7%AB%AF%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/"}]},{"title":"Navigation Timing & Navigation Timing API","slug":"navigationTiming","date":"2020-07-24T02:35:22.000Z","updated":"2024-08-22T02:26:03.659Z","comments":true,"path":"2020/07/24/navigationTiming/","link":"","permalink":"https://feidom-up.github.io/2020/07/24/navigationTiming/","excerpt":"","text":"Navigation Timing å›¾è§£ï¼š Prompt for unload // æ¿€èµ·å¸è½½ navigationStart // å¯¼èˆªå¼€å§‹ redirect // æœ¬åœ°é‡å®šå‘ redirectStart redirectEnd unload // æœ¬åœ°é‡å®šå‘çš„åŒæ—¶ å¸è½½ unloadStart unloadEnd App cache // æœ‰ç¼“å­˜æ‹¿ç¼“å­˜ fetchStart DNS // DNSåŸŸåè§£æ domainLookipStart domainLookupEnd TCP // å»ºç«‹tcpè¿æ¥ connectStart // å¼€å§‹ä¸‰æ¬¡æ¡æ‰‹ï¼Œå››æ¬¡æŒ¥æ‰‹ (secureConnectionStart) // å»ºç«‹httpså®‰å…¨åè®®çš„åŠ å¯†é“¾æ¥ connectEnd Request // è¯·æ±‚ requestStart Response // å“åº” responseStart responseEnd Processing // å‰ç«¯HTMLå¤„ç† domLoading domInteractive domContentLoaded domComplate onload // onload loadEventStart loadEventEnd","categories":[{"name":"å‰ç«¯æ€§èƒ½ä¼˜åŒ–","slug":"å‰ç«¯æ€§èƒ½ä¼˜åŒ–","permalink":"https://feidom-up.github.io/categories/%E5%89%8D%E7%AB%AF%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/"}],"tags":[{"name":"å‰ç«¯æ€§èƒ½ä¼˜åŒ–","slug":"å‰ç«¯æ€§èƒ½ä¼˜åŒ–","permalink":"https://feidom-up.github.io/tags/%E5%89%8D%E7%AB%AF%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/"}]},{"title":"HTMLã€CSSã€JSäº’ç›¸é˜»å¡ï¼Ÿå’‹å›äº‹","slug":"HTMLCSSJSæ¸²æŸ“æ‰§è¡Œ","date":"2020-07-23T09:08:37.000Z","updated":"2024-08-22T02:26:03.657Z","comments":true,"path":"2020/07/23/HTMLCSSJSæ¸²æŸ“æ‰§è¡Œ/","link":"","permalink":"https://feidom-up.github.io/2020/07/23/HTMLCSSJS%E6%B8%B2%E6%9F%93%E6%89%A7%E8%A1%8C/","excerpt":"","text":"jsæ˜¯åŒæ­¥çš„ï¼Œä¸ºäº†æ“ä½œdomã€‚åœ¨htmlæ‰§è¡Œä¸­ï¼Œä¹Ÿç”±äºè¿™ä¸ªåŸå› ï¼Œæœ‰åŒæ­¥é˜»å¡çš„æƒ…å†µã€‚ jsçš„æ‰§è¡Œä¼šå½±å“Domæ¸²æŸ“å—?12345678910111213&lt;head&gt; &lt;script&gt; // è¿™ä¸ªscriptæ”¾åœ¨domä¸Šè¾¹ï¼Œå½±å“domè§£æï¼Œä¹Ÿå½±å“domæ¸²æŸ“ã€‚ alert('1') &lt;/script&gt;&lt;/head&gt;&lt;body&gt; &lt;h1&gt;Hello world&lt;/h1&gt; &lt;script&gt; // è¿™ä¸ªscriptæ”¾åœ¨domä¸‹è¾¹ï¼Œå½±å“domæ¸²æŸ“ï¼Œä¸å½±å“domè§£æ alert('1') &lt;/script&gt;&lt;/body&gt;cssçš„æ‰§è¡Œä¼šå½±å“Domæ¸²æŸ“å—?123456789101112131415161718&lt;head&gt; &lt;style&gt; h1&#123; color: red !important; &#125; &lt;/style&gt; &lt;script&gt; setTimeout(()=&gt;&#123; console.log(document.querySelectorAll('h1')) &#125;,0) &lt;/script&gt; &lt;link rel=\"stylesheet\" href=\"https://cdn.staticfile.org/animate.css/4.1.0/animate.compat.css\" &gt; &lt;!-- animate.cssæ²¡å›æ¥ä¹‹å‰ï¼Œscriptä¸­æ‰“å°äº†h1ï¼Œä½†æ˜¯h1å¹¶æ²¡æœ‰åœ¨é¡µé¢ä¸­å±•ç¤ºã€‚ --&gt; &lt;!-- cssä¸å½±å“domè§£æï¼Œå½±å“domæ¸²æŸ“ --&gt;&lt;/head&gt;&lt;body&gt; &lt;h1&gt;Hello world&lt;/h1&gt;&lt;/body&gt;cssçš„æ‰§è¡Œä¼šå½±å“jsæ‰§è¡Œå—?12345678910111213141516&lt;head&gt; &lt;style&gt; h1&#123; color: red !important; &#125; &lt;/style&gt; &lt;link rel=\"stylesheet\" href=\"https://cdn.staticfile.org/animate.css/4.1.0/animate.compat.css\" &gt; &lt;!-- animate.cssæ²¡å›æ¥ä¹‹å‰ï¼Œscriptä¸­æ²¡æœ‰æ‰“å°h1ã€‚h1å¹¶æ²¡æœ‰åœ¨é¡µé¢ä¸­å±•ç¤ºã€‚ --&gt; &lt;!-- cssåŠ è½½é˜»å¡jsæ‰§è¡Œã€‚åŸå› ï¼šjsä¸­å¯èƒ½å­˜åœ¨å¯¹domå…ƒç´ çš„æ“ä½œæˆ–è€…å–å€¼ï¼ŒåŒæ­¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚æ‰€ä»¥é˜»å¡ã€‚ --&gt;&lt;/head&gt;&lt;body&gt; &lt;h1&gt;Hello world&lt;/h1&gt; &lt;script&gt; console.log('1') &lt;/script&gt;&lt;/body&gt;cssçš„æ‰§è¡Œä¼šå½±å“domReadyå—?domReadyæ—¶ï¼Œjså¯ä»¥æ“ä½œdomã€‚ 1234567891011121314151617&lt;head&gt; &lt;script&gt; document.addEventListener('DOMContentLoaded', function()&#123; console.log('DOMContentLoaded') &#125;) &lt;/script&gt; &lt;link rel=\"stylesheet\" href=\"https://cdn.staticfile.org/animate.css/4.1.0/animate.compat.css\" &gt; &lt;!-- åœ¨animate.cssæ²¡å›æ¥ä¹‹å‰ï¼Œæ‰“å°äº†DOMContentLoadedã€‚è¯´æ˜cssä¸å½±å“domReady --&gt; &lt;script&gt; console.log('111') &lt;/script&gt; &lt;!-- åŠ äº†ä¸Šé¢è¿™ä¸ªscriptè„šæœ¬æ—¶ï¼Œåœ¨animate.cssæ²¡å›æ¥ä¹‹å‰ï¼Œä¸æ‰“å°111ï¼Œä¹Ÿä¸æ‰“å°DOMContentLoadedã€‚ ä¹Ÿæ˜¯å› ä¸ºjsä¸­å¯èƒ½å­˜åœ¨å¯¹domå…ƒç´ çš„æ“ä½œæˆ–è€…å–å€¼ --&gt;&lt;/head&gt;&lt;body&gt; &lt;h1&gt;Hello world&lt;/h1&gt;&lt;/body&gt;","categories":[{"name":"å‰ç«¯æ€§èƒ½ä¼˜åŒ–","slug":"å‰ç«¯æ€§èƒ½ä¼˜åŒ–","permalink":"https://feidom-up.github.io/categories/%E5%89%8D%E7%AB%AF%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/"}],"tags":[{"name":"å‰ç«¯æ€§èƒ½ä¼˜åŒ–","slug":"å‰ç«¯æ€§èƒ½ä¼˜åŒ–","permalink":"https://feidom-up.github.io/tags/%E5%89%8D%E7%AB%AF%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/"}]},{"title":"æµè§ˆå™¨æ¸²æŸ“è¿‡ç¨‹åŠä¼˜åŒ–","slug":"æµè§ˆå™¨æ¸²æŸ“è¿‡ç¨‹","date":"2020-07-22T06:32:38.000Z","updated":"2024-08-22T02:26:03.664Z","comments":true,"path":"2020/07/22/æµè§ˆå™¨æ¸²æŸ“è¿‡ç¨‹/","link":"","permalink":"https://feidom-up.github.io/2020/07/22/%E6%B5%8F%E8%A7%88%E5%99%A8%E6%B8%B2%E6%9F%93%E8%BF%87%E7%A8%8B/","excerpt":"","text":"ç†Ÿç»ƒä½¿ç”¨Chromeå¼€å‘å·¥å…· æµè§ˆå™¨æ¸²æŸ“åŸºç¡€cpuä¸»è¦è´Ÿè´£æ“ä½œç³»ç»Ÿå’Œç¨‹åº gpuè´Ÿè´£æ˜¾å¼ æ•°æ®å¤„ç†æ•ˆç‡æ›´é«˜ gpu.js Domæ˜¯åˆ†å±‚çš„ firefoxçš„3dæ’ä»¶ï¼ˆå·²åºŸå¼ƒï¼‰å¾ˆå¥½çš„å±•ç°äº†è¿™ä¸ªç‚¹ã€‚ Q:ä»€ä¹ˆå…ƒç´ ä¼šåˆ†å±‚ï¼Ÿ A:æ ¹å…ƒç´ ï¼Œpositionå±‚ï¼Œtransformã€åŠé€æ˜ã€cssæ»¤é•œã€canvasã€videoã€overflowç­‰ å¯¹DOMå…ƒç´ èŠ‚ç‚¹è®¡ç®—æ ·å¼ç»“æœã€‚ï¼ˆRecalculate Styleï¼‰ ä¸ºæ¯ä¸ªèŠ‚ç‚¹ç”Ÿæˆå›¾å½¢ä½ç½®ã€‚ï¼ˆLayout å›æµ/é‡æ’ï¼‰ å°†æ¯ä¸ªèŠ‚ç‚¹ç»˜åˆ¶å¡«å……åˆ°å›¾å±‚ä½å›¾ä¸­ã€‚ï¼ˆPaintï¼‰ æŠŠå›¾å±‚ä½œä¸ºçº¹ç†ï¼Œä¸Šä¼ åˆ°GPU æŠŠç¬¦åˆçš„å›¾å±‚ç”Ÿæˆåˆ°é¡µé¢ä¸Šã€‚ï¼ˆComposite Layers åˆæˆå±‚ï¼‰ Q:Composite Layersåšäº†å•¥ï¼Ÿ A:å›¾å±‚çš„ç»˜åˆ¶åˆ—è¡¨ï¼Œå‡†å¤‡å¥½ï¼Œcommitç»™ï¼ˆåˆæˆçº¿ç¨‹ï¼‰ä¸»çº¿ç¨‹ åˆæˆçº¿ç¨‹ viewport åˆ’åˆ†å›¾å— ç”Ÿæˆä½å›¾çš„è¿‡ç¨‹ å…‰æ …åŒ– Raster æ‰€æœ‰å›¾å— åˆæˆDarwQuadæäº¤ç»™æµè§ˆå™¨æ¸²æŸ“è¿›ç¨‹ vizç»„ä»¶æ¥æ”¶åˆ°DarwQuad åï¼Œç»˜åˆ¶åˆ°å±å¹•ä¸Š æ€»ç»“ä¸Šé¢è¿‡ç¨‹çš„ä¸»è¦è¿‡ç¨‹Layout ==&gt; Paint ==&gt; Composite Layers æ¸²æŸ“å¼•æ“ç»“æ„ä¸å·¥ä½œæµç¨‹ä»¥HTMLã€JSã€CSSç­‰æ–‡ä»¶ä½œä¸ºè¾“å…¥ï¼Œä»¥å¯è§†åŒ–å†…å®¹ä½œä¸ºè¾“å‡ºç»è¿‡ä¸‹é¢æ­¥éª¤ï¼š Parsing HTML to construct DOM tree æ ¹æ®htmlæ–‡ä»¶ç”Ÿæˆdomæ ‘ï¼Œæ¡†æ¶ Render Tree Construction æ ¹æ®cssï¼Œjsæ–‡ä»¶ï¼Œåœ¨domæ ‘çš„åŸºç¡€ä¸Šç”Ÿæˆæ¸²æŸ“æ ‘ Layout of Render Tree æ¸²æŸ“æ ‘å¸ƒå±€æ’ç‰ˆï¼ˆé‡æ’ï¼‰ Painting Render Tree æ’ç‰ˆä¹‹åã€‚ç»˜åˆ¶ï¼ˆé‡ç»˜ï¼‰ Display ï¼ˆComposite Layers åˆæˆå±‚ï¼Œå¸ƒå±€æ ‘ï¼‰åï¼ŒæŠŠç¬¦åˆçš„å›¾å±‚ä¸Šä¼ åˆ°GPUç”Ÿæˆåˆ°é¡µé¢ä¸Šå±•ç¤ºã€‚ æŠŠæ–‡æ¡£çš„ç»“æ„ã€å…ƒç´ çš„æ ·å¼ã€å‡ ä½•å½¢çŠ¶å’Œç»˜åˆ¶é¡ºåºè½¬æ¢åœ¨å±å¹•ä¸Šçš„åƒç´ ã€‚è¿™ä¸ªè¿‡ç¨‹ç§°ä¸ºå…‰æ …åŒ– åˆæˆæ˜¯ä¸€ç§å°†é¡µé¢çš„å„ä¸ªéƒ¨åˆ†åˆ†å±‚ï¼Œåˆ†åˆ«æ …æ ¼åŒ–ï¼Œå¹¶åœ¨ä¸€ä¸ªè¢«ç§°ä¸ºåˆæˆå™¨çº¿ç¨‹çš„ç‹¬ç«‹çº¿ç¨‹ä¸­åˆæˆé¡µé¢çš„æŠ€æœ¯ ä¸Šä¼ åˆ°GPUç”Ÿæˆåˆ°é¡µé¢ä¸Šå±•ç¤ºã€‚ æµè§ˆå™¨æ¸²æŸ“ä¼˜åŒ– è·³è¿‡é‡æ’é‡ç»˜ ç›´æ¥è§¦å‘äº†GPUæ‰§è¡Œ è¿™å°±æ˜¯ç¡¬ä»¶åŠ é€Ÿ Q:ä»€ä¹ˆä¼šè§¦å‘ç¡¬ä»¶åŠ é€Ÿï¼Œè®©GPUåŠ å…¥è¿›æ¥ï¼Ÿ A:CSS3Dã€videoã€webglã€transformã€cssæ»¤é•œã€will-change:transform 12345678910111213141516171819202122@keyframes ball-running &#123; 0% &#123; top:0; left: 0; /* transform: translate(0,0); */ &#125; 25% &#123; top:0; left: 200px; /* transform: translate(200px,0); */ &#125; 50% &#123; top:200px; left: 200px; /* transform: translate(200px,200px); */ &#125; 75% &#123; top:200px; left: 0; /* transform: translate(0,200px); */ &#125;&#125; ä¸Šé¢çš„åŠ¨ç”»ä»£ç ä¼šä¸€ç›´è§¦å‘é‡æ’é‡ç»˜ï¼Œæ€§èƒ½å·® ä¸‹é¢çš„åŠ¨ç”»ä»£ç å°†å¤„ç†äº¤ç»™GPUæ”¾åœ¨ä¸€ä¸ªlayerå±‚ä¸­å»å¤„ç†ï¼Œè·³è¿‡é‡æ’é‡ç»˜,æ€§èƒ½å¤§å¤§æå‡ 1234567891011121314@keyframes ball-running &#123; 0% &#123; transform: translate(0,0); &#125; 25% &#123; transform: translate(200px,0); &#125; 50% &#123; transform: translate(200px,200px); &#125; 75% &#123; transform: translate(0,200px); &#125;&#125; Q:ä»€ä¹ˆå±æ€§ä¼šé€ æˆé‡æ’é‡ç»˜ï¼Œå¯¼è‡´æ€§èƒ½ä¸‹é™ï¼Ÿ A: å¯ä»¥å‚è€ƒè¿™ä¸ªç½‘ç«™ï¼š[csstriggers](https://csstriggers.com/) ç›’å­æ¨¡å‹çš„ç›’å­å˜äº† è¯»å±æ€§æ—¶ï¼šoffsetã€scrollã€clientã€widthä¼šé€ æˆé‡æ’ï¼ˆä¸‹é¢ä¸ºè§£å†³æ–¹æ¡ˆ:requestAnimationFrameï¼‰ 123456&#x2F;&#x2F; è§£å†³æ–¹å¼: è¯»å†™åˆ†ç¦»ï¼ˆè¯»å†™è¯»å†™è¯»å†™&#x3D;&#x3D;&#x3D;&gt;è¯»è¯»è¯»å†™å†™å†™ï¼‰const width &#x3D; document.getElementById(&quot;xx&quot;).width;requestAnimationFrame(function()&#123; &#x2F;&#x2F; å†™é€»è¾‘ &#x2F;&#x2F; React Fiberï¼Ÿ&#125;) å¤§é‡Domå¦‚ä½•ä¼˜åŒ–ä»¥ä¸‹å†…å®¹æ¥è‡ªäº¬åŸä¸€ç¯å°ç¨‹åºDay102é¢˜ ç¼“å­˜Domå¯¹è±¡ æ“ä½œDomæ—¶ï¼Œå¦‚æœæœ‰è®¿é—®Domçš„æ“ä½œã€‚å°¤å…¶åƒå¾ªç¯éå†è¿™ç§æ—¶é—´å¤æ‚åº¦è¾ƒé«˜çš„æ“ä½œã€‚ åœ¨å¾ªç¯å‰å°†çˆ¶ï¼ˆä¸»ï¼‰èŠ‚ç‚¹å…ˆè·å–åˆ°ï¼Œåœ¨å¾ªç¯ä¸­å°±å¯ä»¥ç›´æ¥é¥®ç”¨ï¼Œä¸å¿…è¦å¾ªç¯æŸ¥è¯¢ 12345let rootElem = document.querySelector('#app');let childList = rootElem.child; for(let i=0;i&lt;childList.length;j++)&#123; //å¯¹åº”æ“ä½œ&#125; æ–‡æ¡£ç‰‡æ®µ åˆ©ç”¨document.createDocumentFragment()æ–¹æ³•åˆ›å»ºæ–‡æ¡£ç¢ç‰‡èŠ‚ç‚¹ï¼Œåˆ›å»ºçš„æ˜¯ä¸€ä¸ªè™šæ‹ŸDomå¯¹è±¡ã€‚å‘è¿™ä¸ªèŠ‚ç‚¹æ·»åŠ DomèŠ‚ç‚¹ï¼Œä¿®æ”¹DomèŠ‚ç‚¹å¹¶ä¸ä¼šå½±å“åˆ°çœŸæ˜¯çš„Domç»“æ„ã€‚ æˆ‘ä»¬å¯ä»¥åˆ©ç”¨è¿™ä¸€ç‚¹å…ˆå°†éœ€è¦ä¿®æ”¹çš„Domä¸€å¹¶ä¿®æ”¹å®Œï¼Œä¿å­˜è‡³æ–‡æ¡£ç¢ç‰‡ä¸­ï¼Œç„¶åç”¨æ–‡æ¡£ç¢ç‰‡ä¸€æ¬¡æ€§çš„æ›¿æ¢çœŸå®çš„DomèŠ‚ç‚¹ã€‚ä¸è™šæ‹ŸDomç±»ä¼¼ï¼Œä¹Ÿè¾¾åˆ°äº†ä¸é¢‘ç¹ä¿®æ”¹Domè€Œå¯¼è‡´çš„é‡æ’å’Œé‡ç»˜çš„è¿‡ç¨‹ 123456let fragment = document.createDocumentFragment();const operationDomHandler = (fragment)=&gt;&#123; // æ“ä½œ&#125;operationDomHandler(fragment);rootElem.replaceChild(fragment, oldDom) è¿™æ ·åªè§¦å‘ä¸€æ¬¡å›æµï¼ˆé‡æ’ï¼‰ï¼Œæ•ˆç‡ä¼šæ‰“æ‰“æå‡ã€‚å¦‚æœéœ€è¦å¯¹å…ƒç´ è¿›è¡Œå¤æ‚çš„æ“ä½œï¼ˆåˆ å‡ï¼Œæ·»åŠ åŠ ç‚¹ï¼‰ï¼Œé‚£ä¹ˆæˆ‘ä»¬åº”å½“å…ˆå°†å…ƒç´ ä»é¡µé¢ä¸­ç§»é™¤ï¼Œç„¶åå†å¯¹å…¶è¿›è¡Œæ“ä½œã€‚æˆ–è€…å°†å…¶å¤åˆ¶ä¸€ä¸ªï¼ˆcloneNode()ï¼‰,åœ¨å†…å­˜ä¸­è¿›è¡Œæ“ä½œåå†æ›¿æ¢åŸæ¥çš„èŠ‚ç‚¹ 123let cloneNode = old.cloneNode(true);operationDomHandler(cloneNode); rootElem.replaceChild(cloneNode, oldDom); ç”¨innerHtmlä»£æ›¿é«˜é¢‘çš„appendChild æœ€ä¼˜çš„layoutæ–¹æ¡ˆ æ‰¹é‡è¯»ï¼Œä¸€æ¬¡æ€§å†™ã€‚ å…ˆå¯¹ä¸€ä¸ªä¸åœ¨render treeä¸Šçš„èŠ‚ç‚¹è¿›è¡Œæ“ä½œï¼Œåœ¨æŠŠè¿™ä¸ªèŠ‚ç‚¹æ·»åŠ å›render treeã€‚è¿™æ ·åªå¤„ç½šä¸€æ¬¡Domæ“ä½œã€‚ä½¿ç”¨requestAnimationFrame()ï¼ŒæŠŠä»»ä½•å¯¼è‡´é‡ç»˜çš„æ“ä½œæ”¾å…¥requestAnimationFrame 12345const width = document.getElementById(\"xx\").width;requestAnimationFrame(function()&#123; // å†™é€»è¾‘ // React Fiberï¼Ÿ&#125;) è™šæ‹ŸDom jsæ¨¡æ‹ŸDomæ ‘å¹¶å¯¹Domæ ‘æ“ä½œçš„ä¸€ç§æŠ€æœ¯ã€‚Virtual Domæ˜¯ä¸€ä¸ªçº¯jså¯¹è±¡ï¼ˆå­—ç¬¦ä¸²å¯¹è±¡ï¼‰ï¼Œæ‰€ä»¥å¯¹å®ƒæ“ä½œæ˜¯é«˜æ•ˆçš„ã€‚ åˆ©ç”¨Virtual Domï¼Œå°†domæŠ½è±¡ä¸ºè™šæ‹ŸDomï¼Œåœ¨Domå‘ç”Ÿæ”¹å˜çš„æ—¶å€™å…ˆå°†è™šæ‹ŸDomè¿›è¡Œæ“ä½œï¼Œé€šè¿‡Dom diffç®—æ³•å°†è™šæ‹ŸDomå’ŒåŸè™šæ‹ŸDomçš„ç»“æ„å¯¹æ¯”ï¼Œæœ€ç»ˆæ‰¹é‡çš„å»ä¿®æ”¹çœŸæ˜¯çš„Domç»“æ„ï¼Œå°½å¯èƒ½çš„é¿å…äº†é¢‘ç¹ä¿®æ”¹Domè€Œå¯¼è‡´çš„é¢‘ç¹çš„é‡æ’å’Œé‡ç»˜ã€‚ fastdomï¼Œå¤„ç†domçš„æ’ä»¶","categories":[{"name":"å‰ç«¯æ€§èƒ½ä¼˜åŒ–","slug":"å‰ç«¯æ€§èƒ½ä¼˜åŒ–","permalink":"https://feidom-up.github.io/categories/%E5%89%8D%E7%AB%AF%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/"}],"tags":[{"name":"å‰ç«¯æ€§èƒ½ä¼˜åŒ–","slug":"å‰ç«¯æ€§èƒ½ä¼˜åŒ–","permalink":"https://feidom-up.github.io/tags/%E5%89%8D%E7%AB%AF%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/"}]},{"title":"å‰ç«¯æ€§èƒ½ä¼˜åŒ–","slug":"å‰ç«¯æ€§èƒ½ä¼˜åŒ–","date":"2020-07-21T01:29:03.000Z","updated":"2024-08-22T02:26:03.663Z","comments":true,"path":"2020/07/21/å‰ç«¯æ€§èƒ½ä¼˜åŒ–/","link":"","permalink":"https://feidom-up.github.io/2020/07/21/%E5%89%8D%E7%AB%AF%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/","excerpt":"","text":"Httpè¯·æ±‚çš„ä»£ä»·æ˜¯æ˜‚è´µçš„Navigation Timingä»è¾“å…¥ç½‘å€æ•²å‡»å›è½¦å¼€å§‹åˆ°é¡µé¢å®Œå…¨åŠ è½½å®Œæˆå±•ç¤ºã€‚å…¶ä¸­çš„è¿‡ç¨‹æ˜¯ä¼˜åŒ–çš„è¦ç‚¹ã€‚ æ€§èƒ½ä¼˜åŒ–æ–¹å‘å‰ç«¯æ€§èƒ½ä¼˜åŒ–ï¼ˆä¸€ï¼‰é›…è™å†›è§„å‰ç«¯æ€§èƒ½ä¼˜åŒ–ï¼ˆäºŒï¼‰ç¼“å­˜ä¸ºç‹å‰ç«¯æ€§èƒ½ä¼˜åŒ–ï¼ˆä¸‰ï¼‰åè®®å¤„ç†å‰ç«¯æ€§èƒ½ä¼˜åŒ–ï¼ˆå››ï¼‰æ¸²æŸ“ä¼˜åŒ–å‰ç«¯æ€§èƒ½ä¼˜åŒ–ï¼ˆäº”ï¼‰HTMLä¸­css,jsæ ‡ç­¾ä½ç½®çš„å½±å“ æ¸è¿›å¼ Web åº”ç”¨ï¼ˆPWAï¼‰ ç«™ç‚¹æµ‹é€Ÿæ ¹æ®ç”¨æˆ·çš„ç½‘é€Ÿè¿›è¡Œé€‚é…çš„èµ„æºåŠ è½½ navigator.connection Navigator.connection æ˜¯åªè¯»çš„ï¼Œæä¾›ä¸€ä¸ªNetworkInformation å¯¹è±¡æ¥è·å–è®¾å¤‡çš„ç½‘ç»œè¿æ¥ä¿¡æ¯ã€‚ä¾‹å¦‚ç”¨æˆ·è®¾å¤‡çš„å½“å‰å¸¦å®½æˆ–è¿æ¥æ˜¯å¦è¢«è®¡é‡ï¼Œ è¿™å¯ä»¥ç”¨äºåŸºäºç”¨æˆ·çš„è¿æ¥æ¥é€‰æ‹©é«˜æ¸…æ™°åº¦å†…å®¹æˆ–ä½æ¸…æ™°åº¦å†…å®¹ã€‚(ä¸å¤ªå‡†ç¡®) connectionInfo = navigator.connection çº¯å›¾ç‰‡è¯·æ±‚ï¼Œé€Ÿåº¦ = æ–‡ä»¶å¤§å° / æ—¶é—´ ç®—å‡ºçš„é€Ÿåº¦åŒ…å«dnsè§£æç­‰æ—¶é—´ï¼Œä¸çº¯ç²¹ä¸å‡† speed = size/time å¤šæ™®å‹’æµ‹é€Ÿ speed = (40k-10k)/(t5-t4)","categories":[{"name":"å‰ç«¯æ€§èƒ½ä¼˜åŒ–","slug":"å‰ç«¯æ€§èƒ½ä¼˜åŒ–","permalink":"https://feidom-up.github.io/categories/%E5%89%8D%E7%AB%AF%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/"}],"tags":[{"name":"å‰ç«¯æ€§èƒ½ä¼˜åŒ–","slug":"å‰ç«¯æ€§èƒ½ä¼˜åŒ–","permalink":"https://feidom-up.github.io/tags/%E5%89%8D%E7%AB%AF%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/"}]},{"title":"å‰ç«¯æ€§èƒ½ä¼˜åŒ–ï¼ˆä¸‰ï¼‰åè®®å¤„ç†","slug":"å‰ç«¯æ€§èƒ½ä¼˜åŒ–ï¼ˆä¸‰ï¼‰åè®®å¤„ç†","date":"2020-07-21T01:28:22.000Z","updated":"2024-08-22T02:26:03.663Z","comments":true,"path":"2020/07/21/å‰ç«¯æ€§èƒ½ä¼˜åŒ–ï¼ˆä¸‰ï¼‰åè®®å¤„ç†/","link":"","permalink":"https://feidom-up.github.io/2020/07/21/%E5%89%8D%E7%AB%AF%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96%EF%BC%88%E4%B8%89%EF%BC%89%E5%8D%8F%E8%AE%AE%E5%A4%84%E7%90%86/","excerpt":"","text":"httpè¯·æ±‚çš„ä»£ä»·æ˜¯æ˜‚è´µçš„HTTP ç¼“å­˜ï¼Œå¯¹äºå‰ç«¯çš„æ€§èƒ½ä¼˜åŒ–æ–¹é¢æ¥è®²ï¼Œæ˜¯éå¸¸å…³é”®çš„ï¼Œä»ç¼“å­˜ä¸­è¯»å–æ•°æ®å’Œç›´æ¥å‘æœåŠ¡å™¨è¯·æ±‚æ•°æ®ã€‚ åè®®ç¼“å­˜è§„åˆ™æµè§ˆå™¨å‘èµ·è¯·æ±‚ï¼ŒæœåŠ¡å™¨å“åº”è¯·æ±‚ã€‚åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼ŒåŒæ–¹åå•†äº†ä¸¤ç§æ–¹å¼æ¥è§„å®šç¼“å­˜è§„åˆ™ã€‚ å¼ºç¼“å­˜ï¼š æµè§ˆå™¨åœ¨åŠ è½½èµ„æºæ—¶ï¼Œæ ¹æ®è¯·æ±‚å¤´çš„ Expires å’Œ Cache-control åˆ¤æ–­ï¼Œæ˜¯åˆ™ç›´æ¥ä»ç¼“å­˜è¯»å–èµ„æºï¼Œä¸ä¼šå‘è¯·æ±‚åˆ°æœåŠ¡å™¨ã€‚ ä¼˜å…ˆçº§é«˜äºåå•†ç¼“å­˜ åå•†ç¼“å­˜ å¦‚æœæ²¡æœ‰å‘½ä¸­å¼ºç¼“å­˜ï¼ŒåŠ è½½èµ„æºçš„è¯·æ±‚ä¼šå‘é€åˆ°æœåŠ¡å™¨ï¼Œé€šè¿‡ Last-Modified å’Œ Etag éªŒè¯èµ„æºæ˜¯å¦å‘½ä¸­åå•†ç¼“å­˜ï¼Œå¦‚æœå‘½ä¸­ï¼ŒæœåŠ¡å™¨ä¼šå°†è¿™ä¸ªè¯·æ±‚è¿”å›304ï¼ˆNot Modifiedï¼‰ï¼Œä½†æ˜¯ä¸ä¼šè¿”å›è¿™ä¸ªèµ„æºçš„æ•°æ®ï¼Œä¾ç„¶æ˜¯ä»ç¼“å­˜ä¸­è¯»å–èµ„æºã€‚ å¦‚æœå‰é¢ä¸¤è€…éƒ½æ²¡æœ‰å‘½ä¸­ï¼Œç›´æ¥ä»æœåŠ¡å™¨åŠ è½½èµ„æºã€‚","categories":[{"name":"å‰ç«¯æ€§èƒ½ä¼˜åŒ–","slug":"å‰ç«¯æ€§èƒ½ä¼˜åŒ–","permalink":"https://feidom-up.github.io/categories/%E5%89%8D%E7%AB%AF%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/"}],"tags":[{"name":"å‰ç«¯æ€§èƒ½ä¼˜åŒ–","slug":"å‰ç«¯æ€§èƒ½ä¼˜åŒ–","permalink":"https://feidom-up.github.io/tags/%E5%89%8D%E7%AB%AF%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/"}]},{"title":"å‰ç«¯æ€§èƒ½ä¼˜åŒ–ï¼ˆäºŒï¼‰ç¼“å­˜ä¸ºç‹","slug":"å‰ç«¯æ€§èƒ½ä¼˜åŒ–ï¼ˆäºŒï¼‰ç¼“å­˜ä¸ºç‹","date":"2020-07-21T01:27:45.000Z","updated":"2024-08-22T02:26:03.663Z","comments":true,"path":"2020/07/21/å‰ç«¯æ€§èƒ½ä¼˜åŒ–ï¼ˆäºŒï¼‰ç¼“å­˜ä¸ºç‹/","link":"","permalink":"https://feidom-up.github.io/2020/07/21/%E5%89%8D%E7%AB%AF%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96%EF%BC%88%E4%BA%8C%EF%BC%89%E7%BC%93%E5%AD%98%E4%B8%BA%E7%8E%8B/","excerpt":"","text":"HTTPç¼“å­˜å¸¸ç”¨çš„åº“(jqueryç­‰)ï¼Œä¸ç»å¸¸å˜å¾—è¿™äº›åº“ï¼Œç‰ˆæœ¬è¦æ±‚ä¸æ˜¯å¾ˆä¸¥æ ¼ï¼Œç”¨HTTPå¼ºç¼“å­˜ã€‚å‰ç«¯æ€§èƒ½ä¼˜åŒ–ï¼ˆä¸‰ï¼‰åè®®å¤„ç† å‰ç«¯ç¦»çº¿ç¼“å­˜ä¸šåŠ¡ä»£ç ï¼Œmd5å˜åŒ–é¢‘ç¹ï¼Œä½¿ç”¨æœ¬åœ°ç¼“å­˜ã€‚ cookie å­˜å‚¨æœ€å¤§æ•°æ®é‡ä¸º4K åŒä¸€ä¸ªåŸŸåä¸‹å­˜æ”¾ Cookie çš„ä¸ªæ•°æ˜¯æœ‰é™åˆ¶çš„ï¼Œä¸åŒæµè§ˆå™¨çš„ä¸ªæ•°ä¸ä¸€æ ·ï¼Œä¸€èˆ¬ä¸º 20 ä¸ªï¼› Cookie æ”¯æŒè®¾ç½®è¿‡æœŸæ—¶é—´ï¼Œå½“è¿‡æœŸæ—¶è‡ªåŠ¨é”€æ¯ï¼› æ¯æ¬¡å‘èµ·åŒåŸŸä¸‹çš„è¯·æ±‚éƒ½ä¼šå‘é€å›æœåŠ¡å™¨ Local Storage ç”¨äºé•¿ä¹…ä¿å­˜æ•´ä¸ªç½‘ç«™çš„æ•°æ®ï¼Œä¿å­˜çš„æ•°æ®æ²¡æœ‰è¿‡æœŸæ—¶é—´ï¼Œç›´åˆ°æ‰‹åŠ¨å»åˆ é™¤ã€‚ï¼ˆå’ŒSession Storageçš„åŒºåˆ«ï¼‰ ç›¸å½“äºä¸€ä¸ª 5Må·¦å³çš„é’ˆå¯¹äºå‰ç«¯é¡µé¢çš„æ•°æ®åº“ é”®å€¼å¯¹å­˜å‚¨ï¼Œå­˜å‚¨çš„Valueé™å®šä¸ºstringç±»å‹ åœ¨æµè§ˆå™¨çš„éšç§æ¨¡å¼ä¸‹ä¸å¯è¯»å– æœ¬è´¨ä¸Šæ˜¯å¯¹å­—ç¬¦ä¸²çš„è¯»å–,ä¸”æ“ä½œæ˜¯åŒæ­¥çš„ï¼Œå»ºè®®å­˜å‚¨é‡åœ¨2.5Mä»¥ä¸‹ï¼Œå¦åˆ™ä¼šå˜å¡ ä¸èƒ½è¢«çˆ¬è™«æŠ“å–åˆ° å—åˆ°åŒæºé™åˆ¶ï¼Œä¸èƒ½è·¨åŸŸã€‚ä½†æ˜¯,å¯ä»¥å€ŸåŠ©postMessageå’Œiframeæ¥å®ç°è·¨åŸŸçš„æ•°æ®è¯»å– åœ¨åŒæºçš„æ‰€æœ‰æ ‡ç­¾é¡µå’Œçª—å£ä¹‹é—´å…±äº«æ•°æ® Session Storage ä¸ localStorage æ‹¥æœ‰ç»Ÿä¸€çš„ API æ¥å£ï¼› ç”¨äºä¸´æ—¶ä¿å­˜åŒä¸€çª—å£(æˆ–æ ‡ç­¾é¡µ)çš„æ•°æ®ï¼Œåœ¨å…³é—­çª—å£æˆ–æ ‡ç­¾é¡µä¹‹åå°†ä¼šåˆ é™¤è¿™äº›æ•°æ®ã€‚ï¼ˆå’ŒLocal Storageçš„åŒºåˆ«ï¼‰ æ•°æ®åœ¨é¡µé¢åˆ·æ–°åä¾ç„¶å­˜åœ¨ï¼Œä½†åœ¨å…³é—­æµè§ˆå™¨æ ‡ç­¾é¡µä¹‹åæ•°æ®å°±ä¼šè¢«æ¸…é™¤ï¼› IndexedDBï¼ˆNoSQL æ•°æ®åº“ï¼‰ å…è®¸å‚¨å­˜å¤§é‡æ•°æ®ï¼ˆä¸€èˆ¬æ¥è¯´ä¸å°‘äº 250Mï¼Œç”šè‡³æ²¡æœ‰ä¸Šé™ï¼‰ï¼Œæä¾›æŸ¥æ‰¾æ¥å£ï¼Œè¿˜èƒ½å»ºç«‹ç´¢å¼•ã€‚ é”®å€¼å¯¹å‚¨å­˜ã€‚æ‰€æœ‰ç±»å‹çš„æ•°æ®éƒ½å¯ä»¥ç›´æ¥å­˜å…¥ï¼ŒåŒ…æ‹¬ JavaScript å¯¹è±¡ã€‚åŒæ—¶æ”¯æŒäºŒè¿›åˆ¶å‚¨å­˜ï¼ˆArrayBuffer å¯¹è±¡å’Œ Blob å¯¹è±¡ï¼‰ã€‚ æ“ä½œæ˜¯å¼‚æ­¥çš„ æ”¯æŒäº‹åŠ¡ã€‚ å—åˆ°åŒæºé™åˆ¶ï¼Œæ¯ä¸€ä¸ªæ•°æ®åº“å¯¹åº”åˆ›å»ºå®ƒçš„åŸŸåã€‚è®¿é—®ä¸èƒ½è·¨åŸŸã€‚ æ¥è‡ª é˜®ä¸€å³°çš„ç½‘ç»œæ—¥å¿— Web SQl Web SQL èƒ½æ–¹ä¾¿è¿›è¡Œå¯¹è±¡å­˜å‚¨ Web SQL æ”¯æŒäº‹åŠ¡ï¼Œèƒ½æ–¹ä¾¿åœ°è¿›è¡Œæ•°æ®æŸ¥è¯¢å’Œæ•°æ®å¤„ç†æ“ä½œ HTML5æ”¾å¼ƒäº†Web SQL Databaseæ”¾å¼ƒçš„åŸå› æ˜¯ï¼šThis document was on the W3C Recommendation track but specification work has stopped. The specification reached an impasse: all interested implementors have used the same SQL backend (Sqlite), but we need multiple independent implementations to proceed along a standardisation path.å¤§æ¦‚æ„æ€æ˜¯ï¼šè¿™ä¸ªæ–‡æ¡£æ˜¯W3Cæ¨èçš„ï¼Œä½†æ˜¯è§„èŒƒå·¥ä½œå·²ç»åœæ­¢äº†ã€‚è§„èŒƒé™·å…¥äº†åƒµå±€:æ‰€æœ‰æ„Ÿå…´è¶£çš„å®ç°è€…éƒ½ä½¿ç”¨ç›¸åŒçš„SQLåç«¯(Sqlite)ï¼Œä½†æ˜¯æˆ‘ä»¬éœ€è¦å¤šä¸ªç‹¬ç«‹çš„å®ç°æ¥æ²¿ç€æ ‡å‡†åŒ–çš„é“è·¯å‰è¿›ã€‚ æœ¬åœ°ç¼“å­˜æ–¹æ¡ˆ ä¸»æµçš„æ•°æ® å¼€æºåº“ localForagelocalForage æ˜¯ä¸€ä¸ªå¿«é€Ÿç®€å•çš„ JavaScript å­˜å‚¨åº“ã€‚å®ƒé€šè¿‡ä½¿ç”¨ç±»ä¼¼äº localStorage çš„ç®€å• API æ¥ä½¿ç”¨å¼‚æ­¥å­˜å‚¨ï¼ˆIndexedDB æˆ– WebSQL)ï¼‰ï¼Œè¿›è€Œæ”¹å–„ä½ çš„ Web åº”ç”¨ç¨‹åºçš„ç¦»çº¿ä½“éªŒã€‚ Dexie.jsDexie.js æ˜¯ IndexedDB çš„åŒ…è£…åº“ï¼Œå®ƒæä¾›äº†ä¸€å¥—ç»è¿‡ç²¾å¿ƒè®¾è®¡çš„ APIï¼Œå¼ºå¤§çš„é”™è¯¯å¤„ç†ï¼Œè¾ƒå¼ºçš„å¯æ‰©å±•æ€§ï¼Œæ­¤å¤–å®ƒèƒ½å¤Ÿè·Ÿè¸ªæ•°æ®å˜åŒ–ï¼Œæ”¯æŒ KeyRange (æœç´¢ä¸åŒºåˆ†å¤§å°å†™ï¼Œå¯è®¾ç½®åŒ¹æ–¹å¼å’Œ OR æ“ä½œ)ã€‚Dexie.js ä¸»è¦ä¸ºäº†è§£å†³åŸç”Ÿ IndexedDB API ä¸­å­˜åœ¨çš„ä¸‰ä¸ªä¸»è¦é—®é¢˜ï¼šå¼‚å¸¸é”™è¯¯å¤„ç†ã€‚è¾ƒå¼±çš„æŸ¥è¯¢åŠŸèƒ½ã€‚ä»£ç å¤æ‚æ€§ã€‚ local Storageç¼“å­˜jsæ–¹æ¡ˆç®¡ç†ç‰ˆæœ¬ å­˜å‚¨æ–‡ä»¶çš„jså®Œæ•´è·¯å¾„åŠåç§°ï¼Œåç§°ä¸­åŒ…å«æ–‡ä»¶ç‰ˆæœ¬ä¿¡æ¯ï¼ˆmd5ç­‰ï¼‰ã€‚localStorage.setItem(&quot;common:widget/a.js&quot;, &quot;/static/common/widget/a_[md5æ—§].js&quot;) æ ¹æ®jså®Œæ•´è·¯å¾„åŠåç§°ï¼Œå­˜å‚¨jsä»£ç localStorage.setItem(&quot;/static/common/widget/a_[md5æ—§].js&quot;, &quot;ä»£ç code...&quot;) initæ—¶ï¼Œå¯åŠ¨çš„jsè„šæœ¬åŠ è½½manifestè¿™ç§æ¸…å•123const manifest = &#123; \"common:widget/a.js\":\"/static/common/widget/a_[md5æ–°].js\"&#125; é€»è¾‘åˆ¤æ–­ï¼ŒåŠ è½½js12345678910111213141516171819202122232425262728const aJs = localStorage.getItem(\"common:widget/a.js\") // \"/static/common/widget/a_[md5æ—§].js\"const md5 = \"md5æ–°\" // æ–‡ä»¶ç‰ˆæœ¬&lt;!-- ç„¶ååˆ¤æ–­è¿™ä¸ªæ–‡ä»¶æ˜¯å¦å­˜åœ¨ --&gt;if(aJs)&#123; // å­˜åœ¨ï¼Œæœ‰ç¼“å­˜ if(md5 === \"md5æ—§\")&#123; // ç¼“å­˜æ²¡è¿‡æœŸï¼Œç›´æ¥å»ç¼“å­˜é‡Œçš„ const aJsCode = localStorage.getItem(aJs) // æ‰§è¡Œç¼“å­˜çš„jsä»£ç ,evelåªæ˜¯ä¾‹å­ï¼Œä¸å»ºè®®ä½¿ç”¨.å¯ä»¥addScript evel(aJsCode) &#125;else&#123; // ç¼“å­˜è¿‡æœŸ localStorage.removeItem(aJs) // æ‹‰å–æ–°çš„ const aJsCodeNew = fetch(\"/static/common/widget/a_[md5æ–°].js\") // å­˜ç¼“å­˜ localStorage.setItem(\"common:widget/a.js\", \"/static/common/widget/a_[md5æ–°].js\") localStorage.setItem( \"/static/common/widget/a_[md5æ–°].js\", aJsNew) // æ‰§è¡Œæ–°çš„jsä»£ç  evel(aJsCodeNew) &#125;&#125;else&#123; // ä¸å­˜åœ¨ï¼Œæ²¡æœ‰ç¼“å­˜ã€‚æ‹‰å–æ–°çš„æ–‡ä»¶ï¼Œæ‰§è¡Œ fetch(\"/static/common/widget/a_[md5æ–°].js\") // åšç¼“å­˜ localStorage.setItem(\"common:widget/a.js\", \"/static/common/widget/a_[md5æ–°].js\") localStorage.setItem(\"/static/common/widget/a_[md5æ–°].js\", \"ä»£ç code...\")&#125;","categories":[{"name":"å‰ç«¯æ€§èƒ½ä¼˜åŒ–","slug":"å‰ç«¯æ€§èƒ½ä¼˜åŒ–","permalink":"https://feidom-up.github.io/categories/%E5%89%8D%E7%AB%AF%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/"}],"tags":[{"name":"å‰ç«¯æ€§èƒ½ä¼˜åŒ–","slug":"å‰ç«¯æ€§èƒ½ä¼˜åŒ–","permalink":"https://feidom-up.github.io/tags/%E5%89%8D%E7%AB%AF%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/"}]},{"title":"å‰ç«¯æ€§èƒ½ä¼˜åŒ–ï¼ˆä¸€ï¼‰é›…è™å†›è§„","slug":"å‰ç«¯æ€§èƒ½ä¼˜åŒ–ï¼ˆä¸€ï¼‰é›…è™å†›è§„","date":"2020-07-21T00:40:57.000Z","updated":"2024-08-22T02:26:03.663Z","comments":true,"path":"2020/07/21/å‰ç«¯æ€§èƒ½ä¼˜åŒ–ï¼ˆä¸€ï¼‰é›…è™å†›è§„/","link":"","permalink":"https://feidom-up.github.io/2020/07/21/%E5%89%8D%E7%AB%AF%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96%EF%BC%88%E4%B8%80%EF%BC%89%E9%9B%85%E8%99%8E%E5%86%9B%E8%A7%84/","excerpt":"","text":"é›…è™å†›è§„ å†…å®¹ä¸»ä½“ï¼š å°½é‡å‡å°‘HTTPè¯·æ±‚æ•° å‡å°‘DNSæŸ¥æ‰¾ é¿å…é‡å®šå‘ è®©Ajaxå¯ç¼“å­˜ å»¶è¿ŸåŠ è½½ç»„ä»¶ é¢„åŠ è½½ç»„ä»¶ å‡å°‘DOMå…ƒç´ çš„æ•°é‡ å–„ç”¨cssä¼ªç±» æŒ‰éœ€åŠ è½½ï¼Œå‡å°‘ä¸å¿…è¦çš„æ¸²æŸ“ ç»“æ„åˆç†ï¼Œè¯­ä¹‰åŒ–æ ‡ç­¾ è·¨åŸŸåˆ†ç¦»ç»„ä»¶ åˆ†ç¦»ç»„ä»¶å¯ä»¥æœ€å¤§åŒ–å¹¶è¡Œä¸‹è½½ï¼Œä½†è¦ç¡®ä¿åªç”¨ä¸è¶…è¿‡2-4ä¸ªåŸŸï¼Œå› ä¸ºå­˜åœ¨DNSæŸ¥æ‰¾çš„ä»£ä»·ã€‚ å°½é‡å°‘ç”¨iframe æœç»404 csséƒ¨åˆ†ï¼š æŠŠæ ·å¼è¡¨æ”¾åœ¨é¡¶éƒ¨ é¿å…ä½¿ç”¨CSSè¡¨è¾¾å¼ é€‰æ‹©&lt;link&gt;èˆå¼ƒ@import é¿å…ä½¿ç”¨æ»¤é•œ jséƒ¨åˆ†ï¼š å»é™¤é‡å¤è„šæœ¬ å°½é‡å‡å°‘DOMè®¿é—® ç”¨æ™ºèƒ½çš„äº‹ä»¶å¤„ç†å™¨ äº‹ä»¶å§”æ‰˜ æŠŠè„šæœ¬æ”¾åœ¨åº•éƒ¨ 5-6ä¸ªscriptè¯·æ±‚ï¼Œæ¯ä¸ªæ–‡ä»¶å¤§å°gzipå30kbå·¦å³ javascript, csséƒ¨åˆ†: æŠŠJavaScriptå’ŒCSSæ”¾åˆ°å¤–é¢ å‹ç¼©JavaScriptå’ŒCSS å›¾ç‰‡ ä¼˜åŒ–å›¾ç‰‡ ä¼˜åŒ–CSS Sprite ä¸è¦ç”¨HTMLç¼©æ”¾å›¾ç‰‡ ç”¨å°çš„å¯ç¼“å­˜çš„favicon.icoï¼ˆP.S. æ”¶è—å¤¹å›¾æ ‡ï¼‰ svgå›¾ç‰‡çš„ä½¿ç”¨ï¼›CSS Spritesï¼ˆé›ªç¢§å›¾/ç²¾çµå›¾ï¼‰ï¼›tinypngjsï¼ˆå›¾ç‰‡å‹ç¼©å·¥å…·ï¼‰ cookie ç»™cookieå‡è‚¥ æŠŠç»„ä»¶æ”¾åœ¨ä¸å«cookieçš„åŸŸä¸‹ ç§»åŠ¨ç«¯ ä¿è¯æ‰€æœ‰ç»„ä»¶éƒ½å°äº25K è¿™ä¸ªé™åˆ¶æ˜¯å› ä¸ºiPhoneä¸èƒ½ç¼“å­˜å¤§äº25Kçš„ç»„ä»¶ æŠŠç»„ä»¶æ‰“åŒ…åˆ°ä¸€ä¸ªå¤åˆæ–‡æ¡£é‡Œ æœåŠ¡å™¨ Gzipç»„ä»¶ é¿å…å›¾ç‰‡srcå±æ€§ä¸ºç©º é…ç½®ETags å¯¹Ajaxç”¨GETè¯·æ±‚ å°½æ—©æ¸…ç©ºç¼“å†²åŒº ä½¿ç”¨CDNï¼ˆå†…å®¹åˆ†å‘ç½‘ç»œï¼‰ æ·»ä¸ŠExpiresæˆ–è€…Cache-Control HTTPå¤´","categories":[{"name":"å‰ç«¯æ€§èƒ½ä¼˜åŒ–","slug":"å‰ç«¯æ€§èƒ½ä¼˜åŒ–","permalink":"https://feidom-up.github.io/categories/%E5%89%8D%E7%AB%AF%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/"}],"tags":[{"name":"å‰ç«¯æ€§èƒ½ä¼˜åŒ–","slug":"å‰ç«¯æ€§èƒ½ä¼˜åŒ–","permalink":"https://feidom-up.github.io/tags/%E5%89%8D%E7%AB%AF%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/"}]},{"title":"nodeçš„websocketsç›‘å¬unix_domain_socket","slug":"nodeçš„websocketsç›‘å¬unix-domain-socket","date":"2020-07-20T09:45:57.000Z","updated":"2024-08-22T02:26:03.659Z","comments":true,"path":"2020/07/20/nodeçš„websocketsç›‘å¬unix-domain-socket/","link":"","permalink":"https://feidom-up.github.io/2020/07/20/node%E7%9A%84websockets%E7%9B%91%E5%90%ACunix-domain-socket/","excerpt":"","text":"WebSockets listening on UNIX domain socket? Server side: 12345var http = require('http');var WebSocketServer = require('ws').Server;var server = http.createServer()var wss = new WebSocketServer(&#123; server : server&#125;);server.listen('/tmp/server.sock') Client side: 123var ws = require('ws');var client = new ws(\"ws+unix:///tmp/server.sock\")client.send('hello') åŸæ–‡åœ°å€","categories":[{"name":"nodejs","slug":"nodejs","permalink":"https://feidom-up.github.io/categories/nodejs/"}],"tags":[{"name":"nodejs","slug":"nodejs","permalink":"https://feidom-up.github.io/tags/nodejs/"}]},{"title":"linuxä¸‹å¸¸ç”¨å‘½ä»¤æŸ¥çœ‹ç«¯å£å ç”¨","slug":"linuxä¸‹å¸¸ç”¨å‘½ä»¤æŸ¥çœ‹ç«¯å£å ç”¨","date":"2020-07-11T07:07:02.000Z","updated":"2024-08-22T02:26:03.659Z","comments":true,"path":"2020/07/11/linuxä¸‹å¸¸ç”¨å‘½ä»¤æŸ¥çœ‹ç«¯å£å ç”¨/","link":"","permalink":"https://feidom-up.github.io/2020/07/11/linux%E4%B8%8B%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4%E6%9F%A5%E7%9C%8B%E7%AB%AF%E5%8F%A3%E5%8D%A0%E7%94%A8/","excerpt":"","text":"æŸ¥çœ‹å½“å‰æ‰€æœ‰tcpç«¯å£$ netstat -ntlp æŸ¥çœ‹æ‰€æœ‰9000ç«¯å£ä½¿ç”¨æƒ…å†µnetstat -ntulp | grep 3306","categories":[{"name":"å‰ç«¯å·¥ç¨‹åŒ–","slug":"å‰ç«¯å·¥ç¨‹åŒ–","permalink":"https://feidom-up.github.io/categories/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96/"}],"tags":[{"name":"Linux","slug":"Linux","permalink":"https://feidom-up.github.io/tags/Linux/"}]},{"title":"sonarqubeé…ç½®åŠä½¿ç”¨","slug":"sonarqubeé…ç½®åŠä½¿ç”¨","date":"2020-07-11T00:47:02.000Z","updated":"2024-08-22T02:26:03.660Z","comments":true,"path":"2020/07/11/sonarqubeé…ç½®åŠä½¿ç”¨/","link":"","permalink":"https://feidom-up.github.io/2020/07/11/sonarqube%E9%85%8D%E7%BD%AE%E5%8F%8A%E4%BD%BF%E7%94%A8/","excerpt":"","text":"sonarqubeå®˜ç½‘æ–‡æ¡£ï¼šä»£ç è´¨é‡çš„æ£€æµ‹åŠç®¡ç† å®‰è£…javaç¯å¢ƒ å®‰è£…javaç¯å¢ƒï¼ˆæœ¬åœ°å’ŒæœåŠ¡å™¨éƒ½éœ€è¦ï¼‰sonarqubeä¾èµ–é«˜ç‰ˆæœ¬çš„javaç¯å¢ƒï¼Œä»¥ä¸‹å†…å®¹ä½¿ç”¨jdk14åœ¨oracleå®˜ç½‘ä¸‹è½½javamacç‰ˆï¼ˆmacOS Installerï¼‰å’ŒæœåŠ¡å™¨Linuxç‰ˆï¼ˆLinux RPM Packageï¼‰ã€‚è¿™ç§çš„ä¸éœ€è¦é…ç¯å¢ƒå˜é‡ï¼Œè‡ªåŠ¨é…å¥½ã€‚ æ³¨æ„ï¼šä¸è¦è£…openjdk å°†æœåŠ¡å™¨Linuxç‰ˆçš„jdkä¸Šä¼ åˆ°æœåŠ¡å™¨å¹¶å®‰è£…(pwdå‘½ä»¤æŸ¥çœ‹æ–‡ä»¶ç»å¯¹è·¯å¾„)$ scp /Users/yingying/Downloads/jdk-14.0.1_linux-x64_bin.rpm root@8.129.182.113:/opt/rpmå®‰è£…jdk$ rpm -i jdk-14.0.1_linux-x64_bin.rpmrpmæŸ¥è¯¢åŒ…ä¿¡æ¯$ rpm -qa æ‰¾åˆ°=&gt; jdk-14.0.1-14.0.1-ga.x86_64rpmå¸è½½jsk$ rpm -e jdk-14.0.1-14.0.1-ga.x86_64 å®‰è£…sonarqube åœ¨æœåŠ¡å™¨ç«¯å®‰è£…Communityç‰ˆæœ¬wget https://binaries.sonarsource.com/Distribution/sonarqube/sonarqube-8.4.0.35506.zip sonarqubeä¸èƒ½ä½¿ç”¨rootèº«ä»½å¯åŠ¨ï¼Œæ‰€ä»¥å»ºä¸€ä¸ªsonarç”¨æˆ·ï¼Œå°†sonarqube-developer-8.4.0.35506.zipæ–‡ä»¶ç»™åˆ°sonarç”¨æˆ·ã€‚123root$ useradd sonarroot$ passwd sonarroot$ chown -R sonar sonarqube-developer-8.4.0.35506.zip åˆ‡æ¢ç”¨æˆ·èº«ä»½åˆ°sonarè¿›è¡Œæ¥ä¸‹æ¥çš„æ“ä½œsu sonar1sonar$ unzip sonarqube-developer-8.4.0.35506.zip æç¤ºæ²¡æœ‰æƒé™ã€‚ æ³¨æ„ï¼šåœ¨optæ–‡ä»¶å¤¹ä¸‹è§£å‹ æ–‡ä»¶.zipã€‚ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„æ–‡ä»¶å¤¹å­˜æ”¾è§£å‹æ–‡ä»¶ã€‚æ­¤æ—¶sonarç”¨æˆ·æ²¡æœ‰optæ–‡ä»¶å¤¹çš„è¯»å†™æ‰§è¡Œæƒé™ã€‚æ‰€ä»¥æŠ¥é”™Permission deniedè§£å†³ï¼šä½¿ç”¨rootèº«ä»½ä¿®æ”¹æ–‡ä»¶æƒé™ã€‚ç»™sonaræƒé™ã€‚ 12root$ chmod 754 optroot$ chmod 777 /opt/sonarqube-developer-8.4.0.35506.zip ç„¶åæ‰§è¡Œunzipï¼Œè§£å‹æˆåŠŸã€‚ä¹‹åè¿›å…¥è§£å‹æ–‡ä»¶å¤¹ä¸‹çš„binç›®å½•çš„linux-x86-64ç›®å½•1sonar$ cd /opt/sonarqube-8.4.0.35506/bin/linux-x86-64/ è¿è¡Œsonarqubeåœ¨è¿™æœ‰sonar.shå¯åŠ¨è„šæœ¬ï¼Œå…ˆä¸ç€æ€¥./sonar.sh startã€‚å…ˆä½¿ç”¨consoleæŸ¥çœ‹å¯åŠ¨æ—¥å¿—,å†start 123sonar$ cd /opt/sonarqube-8.4.0.35506/bin/linux-x86-64/sonar$ ./sonar.sh consolesonar$ ./sonar.sh start æ„å¤–ï¼šåœ¨å¯åŠ¨æˆåŠŸåï¼Œä½¿ç”¨å…¬ç½‘ip:ç«¯å£å· è®¿é—®å¤±è´¥ã€‚å‘ç°æ˜¯é˜¿é‡Œäº‘å®‰å…¨ç»„çš„é—®é¢˜ã€‚é…ç½®å¥½äº†ä»¥åè®¿é—®æˆåŠŸæ„å¤–ï¼šåœ¨è£…äº†æ±‰åŒ–åŒ…ä¹‹åï¼Œé‡å¯sonarqubeï¼Œå¯åŠ¨æˆåŠŸã€‚ä½†æ˜¯è®¿é—®ä¸€ç›´pendingã€‚è¿‡ä¸€ä¼šå°±å¥½äº†ã€‚åº”è¯¥æ˜¯æ±‰åŒ–åŒ…å¤ªå¤§ï¼Œåœ¨åŠ è½½çš„åŸå›  åˆå§‹åŒ–ä¸€ä¸ªé¡¹ç›®ï¼ˆtestï¼‰ä»¥ä¸‹æ“ä½œéƒ½å¯ä»¥åœ¨å…¬ç½‘ip:9000é¡¹ç›®ä¸­å¯è§†åŒ–æ“ä½œ ä½¿ç”¨å…¬ç½‘ip:9000è®¿é—®åˆ°sonarqube ä½¿ç”¨é»˜è®¤è´¦å·/å¯†ç ï¼šadmin/adminç™»é™† æ‰‹å·¥è®¾ç½®ä¸€ä¸ªé¡¹ç›®ï¼štest è®¾ç½®ä¸€ä¸ªtokenï¼ˆå®¢æˆ·ç«¯ä¼šç”¨åˆ°çš„å£ä»¤ï¼‰ å¼€å§‹åˆ†æé¡¹ç›® é€‰æ‹©é¡¹ç›®çš„ä¸»è¦è¯­è¨€ï¼šå…¶ä»–ï¼ˆjsï¼‰ é€‰æ‹©å®¢æˆ·ç«¯çš„æ“ä½œç³»ç»Ÿï¼ˆmacOSï¼‰ ä¸‹è½½å¹¶è§£å‹macOSå¹³å°çš„è§£æå™¨SonarScannerï¼Œæ˜¯ä¸€ä¸ªzipæ–‡ä»¶ ä¸ºSonarScanneré…ç½®ç¯å¢ƒå˜é‡é…ç½®ï½/.bash_profile123# sonar-scanner ç¯å¢ƒå˜é‡ pwdæ‰¾åˆ°sonar-scannerç›®å½•ä¸‹çš„binæ–‡ä»¶å¤¹è·¯å¾„export SCANNER_HOME=\"/Users/yingying/Documents/qwf/libs/sonar-scanner-4.4.0.2170-macosx\"export PATH=$PATH:$SCANNER_HOME/bin ä½¿ç¯å¢ƒå˜é‡ç”Ÿæ•ˆ$ source .bash_profileå¯ä»¥æ‰§è¡Œ$ sonar-scanner -væ¥æŸ¥çœ‹æ˜¯å¦é…ç½®å®‰è£…æˆåŠŸ åœ¨é¡¹ç›®ï¼ˆä¾‹ï¼šnodejs-demoï¼‰ä¸­é…ç½®SonarScanneråœ¨é¡¹ç›®æ ¹ç›®å½•æ–°å»ºsonar-project.propertiesæ–‡ä»¶ã€‚123456789sonar-scanner \\ # é¡¹ç›®å -Dsonar.projectKey=test \\ # è¦æ‰«æçš„ä»£ç ç›®å½• -Dsonar.sources=. \\ # è¦ä¸ŠæŠ¥æŠ¥å‘Šçš„æœåŠ¡å™¨é“¾æ¥ -Dsonar.host.url=http://8.129.182.113:9000 \\ # token -Dsonar.login=a258647adea0e982df705ac3512cbbe47154cfd3 åœ¨ç»ˆç«¯ shell æ‰§è¡Œä½ çš„è¿™ä¸ª sonar-project.properties æ–‡ä»¶bash sonar-project.propertiesã€‚é™é™ç­‰å¾…10åˆ†é’Ÿå·¦å³â€¦ ç»“æœæŠ¥è¡¨ä¼šåœ¨å…¬ç½‘ip:9000ä¸­å¯è§†åŒ–å±•ç¤º æ•°æ®åº“é…ç½® è‡ªå¸¦çš„å†…åµŒæ•°æ®åº“æ¯”è¾ƒå°ã€‚å¤„ç†å¤§é¡¹ç›®éœ€è¦é…ä¸€ä¸‹ sonarQubeé»˜è®¤ä¸æ”¯æŒmysqlã€‚éœ€è¦å®‰è£…mysql Connector(é©±åŠ¨)åæ‰èƒ½ä½¿ç”¨å®‰è£…æ–¹å¼ï¼šå°†é©±åŠ¨æ”¾åœ¨extensions/jdbc-driver/mysql/ï¼ˆè¿™ä¸ªè·¯å¾„ä¸ç¡®å®šï¼‰ä¸‹ é…ç½®æ–‡ä»¶ï¼š/opt/sonarqube-8.4.0.35506/conf/sonar.properties1sonar.jdbc.url&#x3D;jdbc:mysql:&#x2F;&#x2F;192.168.1.222:3306&#x2F;sonar?useUnicode&#x3D;true&amp;characterEncoding&#x3D;utf8&amp;rewriteBatchedStatements&#x3D;true åœ¨ä½¿ç”¨åº“ä½¿ï¼Œè¦æå‰å»ºç«‹å¥½sonaråº“ï¼Œå‘½ä»¤å‚ç…§å¦‚ä¸‹ï¼š1234567891011DROP DATABASE sonar;CREATE DATABASE sonar CHARACTER SET utf8 COLLATE utf8_general_ci;CREATE USER &#39;sonar&#39; IDENTIFIED BY &#39;sonar&#39;;GRANT ALL ON sonar.* TO &#39;sonar&#39;@&#39;%&#39; IDENTIFIED BY &#39;sonar&#39;;GRANT ALL ON sonar.* TO &#39;sonar&#39;@&#39;localhost&#39; IDENTIFIED BY &#39;sonar&#39;;FLUSH PRIVILEGES; ç»“æŸè¯¦ç»†æ“ä½œé“¾æ¥","categories":[{"name":"å‰ç«¯å·¥ç¨‹åŒ–","slug":"å‰ç«¯å·¥ç¨‹åŒ–","permalink":"https://feidom-up.github.io/categories/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96/"}],"tags":[{"name":"å‰ç«¯å·¥ç¨‹åŒ–","slug":"å‰ç«¯å·¥ç¨‹åŒ–","permalink":"https://feidom-up.github.io/tags/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96/"},{"name":"sonarqube","slug":"sonarqube","permalink":"https://feidom-up.github.io/tags/sonarqube/"}]},{"title":"è¿›ç¨‹&çº¿ç¨‹&åç¨‹","slug":"è¿›ç¨‹çº¿ç¨‹åç¨‹","date":"2020-07-08T00:24:22.000Z","updated":"2024-08-22T02:26:03.664Z","comments":true,"path":"2020/07/08/è¿›ç¨‹çº¿ç¨‹åç¨‹/","link":"","permalink":"https://feidom-up.github.io/2020/07/08/%E8%BF%9B%E7%A8%8B%E7%BA%BF%E7%A8%8B%E5%8D%8F%E7%A8%8B/","excerpt":"","text":"åŸºæœ¬æ¦‚å¿µ è¿›ç¨‹æ˜¯cpuè°ƒåº¦çš„åŸºæœ¬å•ä½ çº¿ç¨‹æ˜¯cpuè°ƒåº¦çš„æœ€å°å•ä½ï¼Œä¸€ä¸ªè¿›ç¨‹è‡³å°‘æœ‰ä¸€ä¸ªçº¿ç¨‹ï¼ˆä¸»çº¿ç¨‹ï¼‰ åç¨‹ä¸è¢«æ“ä½œç³»ç»Ÿå†…æ ¸æ‰€ç®¡ç†ï¼Œå®Œå…¨ç”±ç¨‹åºæ§åˆ¶ã€‚ å¤šç§è¿›ç¨‹ å•çº¿ç¨‹è¿›ç¨‹çš„forkè¿‡ç¨‹ï¼Œå°†ä¸»çº¿ç¨‹çš„ä»£ç ã€æ•°æ®ã€æ–‡ä»¶ã€å¯„å­˜å™¨çŠ¶æ€ã€æ ˆéƒ½å¤åˆ¶å¤šä»½ã€‚ å¤šçº¿ç¨‹è¿›ç¨‹ä¸­ï¼Œå„ä¸ªçº¿ç¨‹æ‹¥æœ‰è‡ªå·±çš„å¯„å­˜å™¨çŠ¶æ€å’Œæ ˆã€‚å…±äº«è¿›ç¨‹ä¸­çš„ä»£ç ã€æ•°æ®ã€æ–‡ä»¶ã€‚","categories":[{"name":"æ“ä½œç³»ç»Ÿ","slug":"æ“ä½œç³»ç»Ÿ","permalink":"https://feidom-up.github.io/categories/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/"}],"tags":[{"name":"æ“ä½œç³»ç»Ÿ","slug":"æ“ä½œç³»ç»Ÿ","permalink":"https://feidom-up.github.io/tags/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/"}]},{"title":"jså®ç°PM2å¤šè¿›ç¨‹åŸç†ï¼ˆç®€ç‰ˆï¼‰","slug":"jså®ç°PM2å¤šè¿›ç¨‹åŸç†ï¼ˆç®€ç‰ˆï¼‰","date":"2020-07-07T03:43:27.000Z","updated":"2024-08-22T02:26:03.659Z","comments":true,"path":"2020/07/07/jså®ç°PM2å¤šè¿›ç¨‹åŸç†ï¼ˆç®€ç‰ˆï¼‰/","link":"","permalink":"https://feidom-up.github.io/2020/07/07/js%E5%AE%9E%E7%8E%B0PM2%E5%A4%9A%E8%BF%9B%E7%A8%8B%E5%8E%9F%E7%90%86%EF%BC%88%E7%AE%80%E7%89%88%EF%BC%89/","excerpt":"","text":"äº†è§£è¿›ç¨‹&amp;çº¿ç¨‹&amp;åç¨‹ app.js å‰ç«¯å®ç°çš„nodeé¡¹ç›® 123456// workervar http = require('http');http.createServer(function(req, res) &#123; res.writeHead(200); res.end(\"hello world\\n\");&#125;).listen(8000); pm2.js æ¨¡æ‹ŸPM2å¤šè¿›ç¨‹ 12345678910111213// mastervar cluster = require('cluster');var numCPUs = require('os').cpus().length; // å¤šæ ¸cpuçš„æ ¸æ•° // cluster.isMasterä¸ºtrueï¼Œè¡¨ç¤ºæ˜¯ä¸»è¿›ç¨‹if (cluster.isMaster) &#123; console.log(numCPUs); for (var i = 0; i &lt; numCPUs; i++) &#123; var worker = cluster.fork(); &#125;&#125; else &#123; require(\"./app.js\");&#125; pm2.jsè¿è¡Œåï¼Œä¼šåˆ›å»ºä¸€ä¸ªä¸»è¿›ç¨‹ï¼ˆçˆ¶è¿›ç¨‹masterï¼‰ã€‚ ç„¶ååˆ›å»ºnumCPUsä¸ªnodeè¿›ç¨‹ï¼Œè¿™äº›è¿›ç¨‹ç›¸å½“äºå­è¿›ç¨‹ã€‚å—åˆ°ä¸»è¿›ç¨‹masterçš„ç®¡ç†ï¼Œè°ƒåº¦åˆ†é…å…±åˆ›å»ºäº†numCPUs+1ä¸ªè¿›ç¨‹ é‡ç‚¹åœ¨cluster.fork()æ¥forkå­è¿›ç¨‹ã€‚ç„¶åcluster.isMasterä¸ºfalseæ—¶ï¼Œåˆ›å»ºçš„å­è¿›ç¨‹å»require(&quot;./app.js&quot;)ï¼Œå®ç°å¤šè¿›ç¨‹ç®¡ç†ã€‚","categories":[{"name":"nodejs","slug":"nodejs","permalink":"https://feidom-up.github.io/categories/nodejs/"}],"tags":[{"name":"nodejs","slug":"nodejs","permalink":"https://feidom-up.github.io/tags/nodejs/"},{"name":"PM2","slug":"PM2","permalink":"https://feidom-up.github.io/tags/PM2/"},{"name":"è¿›ç¨‹ç®¡ç†","slug":"è¿›ç¨‹ç®¡ç†","permalink":"https://feidom-up.github.io/tags/%E8%BF%9B%E7%A8%8B%E7%AE%A1%E7%90%86/"}]},{"title":"Linuxå…å¯†è¿œç¨‹ç™»å½•","slug":"Linuxå…å¯†è¿œç¨‹ç™»å½•","date":"2020-07-07T02:51:12.000Z","updated":"2024-08-22T02:26:03.658Z","comments":true,"path":"2020/07/07/Linuxå…å¯†è¿œç¨‹ç™»å½•/","link":"","permalink":"https://feidom-up.github.io/2020/07/07/Linux%E5%85%8D%E5%AF%86%E8%BF%9C%E7%A8%8B%E7%99%BB%E5%BD%95/","excerpt":"","text":"å‰ç«¯åœ¨éƒ¨ç½²é¡¹ç›®æ—¶ï¼Œä½¿ç”¨Linuxå…å¯†è¿œç¨‹ç™»å½•å¯ä»¥å®ç°è‡ªåŠ¨åŒ–ä¸­çš„ä¸€ç¯ã€‚ å…å¯†ç™»å½•çš„åŸç†sshï¼Œå¯†ç å­¦ï¼Œå…¬é’¥ï¼Œç§é’¥ å…å¯†ç™»å½•çš„æ­¥éª¤ ä¸‹æ–‡ä¸­ï¼š[ä½ è‡ªå·±çš„åå­—]æ˜¯ç§é’¥ï¼Œ[ä½ è‡ªå·±çš„åå­—_rsa]æ˜¯å…¬é’¥ ç”Ÿæˆå¯†åŒ™å¯¹ $ ssh-keygen -t rsa -C [ä½ è‡ªå·±çš„åå­—] -f [ä½ è‡ªå·±çš„åå­—_rsa] ä¸Šä¼ é…ç½®å…¬é’¥ ä¸Šä¼ å…¬é’¥åˆ°æœåŠ¡å™¨å¯¹åº”è´¦å·çš„homeè·¯å¾„ä¸‹çš„.ssh/ä¸­$ ssh-copy-id -i [ä½ è‡ªå·±çš„åå­—_rsa] [ç”¨æˆ·å@æœåŠ¡å™¨ipæˆ–åŸŸå] é…ç½®å…¬é’¥æ–‡ä»¶è®¿é—®æƒé™ä¸º 600 (è®¾ç½®æ‹¥æœ‰è€…å¯è¯»å†™ï¼Œå…¶ä»–äººä¸å¯è¯»å†™æ‰§è¡Œ -rwâ€”â€”-)$ chmod 600 [ä½ è‡ªå·±çš„åå­—_rsa] é…ç½®æœ¬åœ°ç§é’¥ æŠŠç¬¬ä¸€æ­¥ç”Ÿæˆçš„ç§é’¥å¤åˆ¶åˆ°ä½ çš„homeç›®å½•ä¸‹çš„.ssh/ è·¯å¾„ä¸‹ é…ç½®ä½ çš„ç§é’¥æ–‡ä»¶è®¿é—®æƒé™ä¸º 600 (-rwâ€”â€”-,ä¸æ˜¯600ç³»ç»Ÿä¼šè®¤ä¸ºä¸å®‰å…¨æ‹’ç»è®¿é—®)$ chmod 600 [ä½ è‡ªå·±çš„åå­—] è¿™ä¸€æ­¥ä¹‹åå·²ç»å¯ä»¥å…å¯†ç™»å½•ssh -i [ä½ è‡ªå·±çš„åå­—] root@[ip] å…å¯†ç™»é™†åŠŸèƒ½çš„æœ¬åœ°é…ç½®æ–‡ä»¶(æ›´æ–¹ä¾¿çš„å…å¯†ç™»å½•æ–¹å¼) ç¼–è¾‘è‡ªå·±homeç›®å½•çš„.ssh/ è·¯å¾„ä¸‹çš„configæ–‡ä»¶vi config1234567891011121314151617181920212223242526272829303132333435363738394041# å¤šä¸»æœºé…ç½®Host gateway-produceHostName IPæˆ–ç»‘å®šçš„åŸŸåPort 22Host node-produceHostName IPæˆ–ç»‘å®šçš„åŸŸåPort 22Host java-produceHostName IPæˆ–ç»‘å®šçš„åŸŸåPort 22Host *-produce (å¤šä¸»æœºåˆ«åï¼Œå…å¯†ç™»å½•æ—¶å¯ä»¥ä½¿ç”¨è¿™ä¸ªåˆ«åç™»å½•)User rootIdentityFile ~/.ssh/ä½ è‡ªå·±çš„åå­—_rsaProtocol 2Compression yesServerAliveInterval 60ServerAliveCountMax 20LogLevel INFO#å•ä¸»æœºé…ç½®Host feidom-cloud (åˆ«åï¼Œå…å¯†ç™»å½•æ—¶å¯ä»¥ä½¿ç”¨è¿™ä¸ªåˆ«åç™»å½•)User rootHostName IPæˆ–ç»‘å®šçš„åŸŸåIdentityFile ~/.ssh/ä½ è‡ªå·±çš„åå­—_rsaProtocol 2Compression yesServerAliveInterval 60ServerAliveCountMax 20LogLevel INFO#å•ä¸»æœºé…ç½®Host feidom2-siteUser gitHostName IPæˆ–ç»‘å®šçš„åŸŸåIdentityFile ~/.ssh/ä½ è‡ªå·±çš„åå­—_rsaProtocol 2Compression yesServerAliveInterval 60ServerAliveCountMax 20LogLevel INFO é…ç½®configæ–‡ä»¶çš„è®¿é—®æƒé™ä¸º 644 ä½¿ç”¨ssh [åˆ«å]","categories":[{"name":"å‰ç«¯å·¥ç¨‹åŒ–","slug":"å‰ç«¯å·¥ç¨‹åŒ–","permalink":"https://feidom-up.github.io/categories/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96/"}],"tags":[{"name":"Linux","slug":"Linux","permalink":"https://feidom-up.github.io/tags/Linux/"},{"name":"å‰ç«¯å·¥ç¨‹åŒ–","slug":"å‰ç«¯å·¥ç¨‹åŒ–","permalink":"https://feidom-up.github.io/tags/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96/"}]},{"title":"categorieså’Œtagsé¡µé¢ä¸è‡ªåŠ¨æ”¶å½•çš„é—®é¢˜","slug":"hexoçš„categorieså’Œtagsé¡µé¢ä¸è‡ªåŠ¨æ”¶å½•çš„é—®é¢˜","date":"2020-07-06T01:51:18.000Z","updated":"2024-08-22T02:26:03.659Z","comments":true,"path":"2020/07/06/hexoçš„categorieså’Œtagsé¡µé¢ä¸è‡ªåŠ¨æ”¶å½•çš„é—®é¢˜/","link":"","permalink":"https://feidom-up.github.io/2020/07/06/hexo%E7%9A%84categories%E5%92%8Ctags%E9%A1%B5%E9%9D%A2%E4%B8%8D%E8%87%AA%E5%8A%A8%E6%94%B6%E5%BD%95%E7%9A%84%E9%97%AE%E9%A2%98/","excerpt":"","text":"åœ¨ä½¿ç”¨hexoçš„è¿‡ç¨‹ä¸­ï¼Œå‘ç°åˆ†ç±»(categories)é¡µé¢å’Œæ ‡ç­¾(tags)é¡µé¢ä¸è‡ªåŠ¨æ”¶å½•æ–‡ç« (å…¶å®æ”¶å½•äº†ï¼Œåªæ˜¯æ²¡æ˜¾ç¤º)çš„categorieså’Œtagsã€‚è§£å†³æ–¹æ¡ˆï¼š ç¼–è¾‘categories/index.md123456title: åˆ†ç±»date: 2020-07-01 08:56:35type: categorieså¢åŠ ä¸‹é¢è¿™ä¸€è¡Œlayout: &quot;categories&quot; tags/index.md123456title: æ ‡ç­¾date: 2020-07-01 09:03:55type: &quot;tags&quot;å¢åŠ ä¸‹é¢è¿™ä¸€è¡Œlayout: &quot;tags&quot;","categories":[{"name":"hexo","slug":"hexo","permalink":"https://feidom-up.github.io/categories/hexo/"}],"tags":[{"name":"é—®é¢˜è§£å†³","slug":"é—®é¢˜è§£å†³","permalink":"https://feidom-up.github.io/tags/%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3/"},{"name":"hexo","slug":"hexo","permalink":"https://feidom-up.github.io/tags/hexo/"}]},{"title":"gitå¸¸ç”¨å‘½ä»¤(ä¸ªäººæ€»ç»“)","slug":"gitå¸¸ç”¨å‘½ä»¤","date":"2020-07-04T13:04:13.000Z","updated":"2024-08-22T02:26:03.658Z","comments":true,"path":"2020/07/04/gitå¸¸ç”¨å‘½ä»¤/","link":"","permalink":"https://feidom-up.github.io/2020/07/04/git%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/","excerpt":"","text":"gitæ¦‚å¿µ Workspaceï¼šå·¥ä½œåŒº Index / Stageï¼šæš‚å­˜åŒº Repositoryï¼šæœ¬åœ°ä»“åº“ Remoteï¼šè¿œç¨‹ä»“åº“ å¸¸ç”¨å‘½ä»¤ æŸ¥çœ‹git configé…ç½®git config --list git configå…¨å±€é…ç½® 12git config --global user.name \"feidom\"git config --global user.email \"qiaoxiansen@hotmail.com\" git configé’ˆå¯¹å•ä¸ªé¡¹ç›®é…ç½®ç”¨æˆ· 123# cd é¡¹ç›®ç›®å½•,ä½œç”¨äºå½“å‰é¡¹ç›®ä¸‹çš„.gitç›®å½•ä¸‹çš„configgit config user.name \"feidom\"git config user.email \"qiaoxiansen@hotmail.com\" å…‹éš†ä¸€ä¸ªé¡¹ç›®å’Œå®ƒçš„æ•´ä¸ªä»£ç å†å²$ git clone [url] æŸ¥çœ‹æœ¬åœ°ä»“åº“åˆ†æ”¯$ git branch æŸ¥çœ‹æ‰€æœ‰æœ¬åœ°åˆ†æ”¯å’Œè¿œç¨‹åˆ†æ”¯$ git branch -a æŸ¥çœ‹æ‰€æœ‰æ‰€æœ‰è¿œç¨‹åˆ†æ”¯$ git branch -r æŸ¥çœ‹åˆ†æ”¯å…³è”å…³ç³»$ git branch -vv æŸ¥çœ‹ä¸åŒ$ git diff æ˜¾ç¤ºæœ‰å˜æ›´çš„æ–‡ä»¶$ git status æ·»åŠ å½“å‰ç›®å½•çš„æ‰€æœ‰æ–‡ä»¶åˆ°æš‚å­˜åŒº$ git add . æäº¤æš‚å­˜åŒºåˆ°æœ¬åœ°ä»“åº“$ git commit -m [æäº¤ä¿¡æ¯] æ‹‰å–è¿œç¨‹ä»“åº“å¸¦ä»£ç åˆ°æœ¬åœ°ä»“åº“å¹¶åˆå¹¶$ git pull [remote] [branch]$ git pull(åˆ†æ”¯æœ‰å…³è”å…³ç³»æ—¶) ä¸Šä¼ æœ¬åœ°æŒ‡å®šåˆ†æ”¯åˆ°è¿œç¨‹ä»“åº“$ git push [remote] [branch]$ git push(åˆ†æ”¯æœ‰å…³è”å…³ç³»æ—¶) åˆ›å»ºä¸€ä¸ªæ–°çš„ç©ºåˆ†æ”¯ï¼ˆå†…å®¹æ¥è‡ªäº’è”ç½‘ï¼‰$ git checkout --orphan [æ–°çš„åˆ†æ”¯å] (å»ºä¸€ä¸ªæ²¡æœ‰çˆ¶èŠ‚ç‚¹çš„åˆ†æ”¯ï¼Œä½†æ˜¯ä¼šå¤åˆ¶å½“å‰åˆ†æ”¯çš„å†…å®¹åˆ°æ–°çš„åˆ†æ”¯ä¸Šã€‚) &emsp; è¿™ä¸ªå‘½ä»¤åˆ›å»ºäº†æ–°çš„åˆ†æ”¯å¹¶åˆ‡æ¢åˆ°æ–°çš„åˆ†æ”¯ä¸‹ï¼Œå¹¶ä¸”é‡Œè¾¹æœ‰ä¸Šä¸ªåˆ†æ”¯çš„å†…å®¹&emsp; æ³¨æ„ ï¼šå…¶å®è¿™ä¸ªæ—¶å€™æ–°çš„åˆ†æ”¯è¿˜ä¸èƒ½è¯´æ˜¯ä¸€ä¸ªåˆ†æ”¯ï¼Œä½ æŸ¥çœ‹åˆ†æ”¯çš„è¯ï¼Œæ˜¯æ²¡æœ‰è¿™ä¸ªåˆ†æ”¯çš„ï¼Œä½ å¿…é¡»è¦æäº¤ä¸€æ¬¡ï¼Œè¿™ä¸ªåˆ†æ”¯æ‰ç®—æ˜¯çœŸçš„åˆ›å»ºå‡ºæ¥äº†&emsp; å› ä¸ºè¿™ä¸ªåˆ†æ”¯æ²¡æœ‰çˆ¶èŠ‚ç‚¹ï¼Œæ‰€ä»¥æ²¡æœ‰ä»»ä½•çš„å†å²ï¼Œåªéœ€è¦è°ƒç”¨&emsp; $ git rm -rf .&emsp; åˆ é™¤æ‰€æœ‰çš„æ–‡ä»¶ï¼ˆåªä¼šåˆ é™¤åŠ å…¥ç‰ˆæœ¬ç®¡ç†çš„æ–‡ä»¶ï¼‰ï¼Œç„¶åä½ å¯ä»¥éšä¾¿åˆ›å»ºä¸€ä¸ªæ–‡ä»¶ï¼Œæäº¤ä¹‹åï¼Œè¿™ä¸ªæ–°çš„ç©ºåˆ†æ”¯å°±ç®—æ˜¯åˆ›å»ºå®Œæˆäº†ã€‚ æ–°å»ºä¸€ä¸ªæœ¬åœ°åˆ†æ”¯ï¼Œå¹¶åˆ‡æ¢åˆ°è¯¥åˆ†æ”¯$ git checkout -b [æœ¬åœ°åˆ†æ”¯] [remote](-bä¼šå»ºç«‹æœ¬åœ°åˆ†æ”¯å’Œè¿œç¨‹åˆ†æ”¯çš„å…³è”å…³ç³») ä»æŸä¸ªæäº¤è®°å½•(2b5c3292)æ‹‰ä¸€ä¸ªæ–°åˆ†æ”¯å‡ºæ¥$ git checkout 2b5c3292 -b [branch] æäº¤å½“å‰åˆ†æ”¯åˆ°è¿œç¨‹ä»“åº“çš„å¯¹åº”çš„æ–°åˆ†æ”¯$ git push -u origin [branch](-uä¼šå»ºç«‹æœ¬åœ°åˆ†æ”¯å’Œè¿œç¨‹åˆ†æ”¯çš„å…³è”å…³ç³») æ–°å»ºæœ¬åœ°åˆ†æ”¯ä¸è¿œç¨‹åˆ†æ”¯å…³è”å…³ç³»git branch --set-upstream-to [è¿œç¨‹åˆ†æ”¯] [æœ¬åœ°åˆ†æ”¯] åˆ é™¤æœ¬åœ°åˆ†æ”¯åˆ‡åˆ°å…¶ä»–åˆ†æ”¯ï¼Œç„¶ågit branch -d [æœ¬åœ°åˆ†æ”¯] ä»è¿œç¨‹è·å–å…¶ä»–ç”¨æˆ·pushä¸Šæ¥çš„æ–°åˆ†æ”¯git fetch æŸ¥çœ‹è¿œç¨‹ä»“åº“ä¿¡æ¯git remote -v ç§»é™¤è¿œç¨‹ä»“åº“git remote remove origin æ·»åŠ è¿œç¨‹ä»“åº“git remote add origin [è¿œç¨‹ä»“åº“åœ°å€] æŸ¥çœ‹è¯¥åˆ†æ”¯çš„è¿œç¨‹ä»“åº“git remote showupstreamï¼šè¢«forkçš„ä»“åº“/originï¼šè‡ªå·±forkçš„ä»“åº“ ä»è‡ªå·±æœ¬åœ°åˆ‡ä¸€ä¸ªåˆ†æ”¯å‡ºæ¥git checkout -b [æœ¬åœ°åˆ†æ”¯å] ä»è¿œç¨‹ä»“åº“åœ°å€pullä»£ç git pull origin master --rebase å…ˆæ‹‰è‡ªå·±forkä»“åº“çš„æœ€æ–°ä»£ç git pull upstream master --rebase å†æ‹‰è¢«forkä»“åº“çš„æœ€æ–°ä»£ç  æ¨é€ä»£ç åˆ°è‡ªå·±forkä»“åº“åˆ†æ”¯git push origin [è‡ªå·±è¿œç¨‹ä»“åº“çš„åˆ†æ”¯] åˆå¹¶å¤šä¸ªcommitè®°å½•ä¸ºä¸€ä¸ªgit rebase -i HEAD~ è‡ªå·±çš„è¿œç«¯æpull requeståˆ°upstreamçš„è¿œç«¯ï¼Œgithubä¸Šæ“ä½œ vscodeåˆå¹¶åˆ†æ”¯åœ¨vscodeç•Œé¢ï¼Œè¾“å…¥ï¼šctrl(win)/command(mac)+shift+p,ç„¶åè¾“å…¥git mergeï¼Œç„¶åé€‰ä¸€ä¸ªè¦åˆå¹¶åˆ°å½“å‰åˆ†æ”¯çš„åˆ†æ”¯ï¼Œå›è½¦ç¡®å®šå³å¯ã€‚ gité—®é¢˜è§£å†³ï¼š git clone æ—¶å‡ºé”™ï¼š 12error: RPC failed; result&#x3D;35, HTTP code &#x3D; 0fatal: The remote end hung up unexpectedly è§£å†³ï¼š æŸ¥çœ‹å…¨å±€çš„postBufferé…ç½® git config http.postBuffer æŠŠè¿™ä¸ªé…ç½®æ”¹å¤§ä¸€ç‚¹ï¼š git config http.postBuffer 24288000","categories":[{"name":"git","slug":"git","permalink":"https://feidom-up.github.io/categories/git/"}],"tags":[{"name":"git","slug":"git","permalink":"https://feidom-up.github.io/tags/git/"}]},{"title":"svgå›¾æ ‡çš„ä½¿ç”¨","slug":"svgå›¾æ ‡çš„ä½¿ç”¨","date":"2020-07-04T13:01:58.000Z","updated":"2024-08-22T02:26:03.660Z","comments":true,"path":"2020/07/04/svgå›¾æ ‡çš„ä½¿ç”¨/","link":"","permalink":"https://feidom-up.github.io/2020/07/04/svg%E5%9B%BE%E6%A0%87%E7%9A%84%E4%BD%BF%E7%94%A8/","excerpt":"","text":"svgå›¾æ ‡åœ¨å‰ç«¯åº”ç”¨çš„ä¼˜ç‚¹ å’Œä¼ ç»Ÿçš„å›¾åƒæ¯”èµ·æ¥ï¼Œå°ºå¯¸æ›´å°ï¼Œä¸”å¯å‹ç¼©æ€§æ›´å¼º å¯ä¼¸ç¼© ä»»ä½•åˆ†è¾¨ç‡ä¹‹ä¸‹éƒ½å¯ä»¥è¢«å®Œç¾çš„æ‰“å° svgä¸­å›¾åƒä¸­çš„æ–‡æœ¬æ˜¯å¯é€‰çš„ï¼ŒåŒæ—¶ä¹Ÿæ˜¯å¯æœç´¢çš„ï¼Œå¾ˆé€‚åˆåšåœ°å›¾ã€‚ svgå¿…é¡»çŸ¥é“çš„æ ‡ç­¾çŸ¥è¯† &lt;defs&gt;SVG å…è®¸æˆ‘ä»¬å®šä¹‰ä»¥åéœ€è¦é‡å¤ä½¿ç”¨çš„å›¾å½¢å…ƒç´ ã€‚ å»ºè®®æŠŠæ‰€æœ‰éœ€è¦å†æ¬¡ä½¿ç”¨çš„å¼•ç”¨å…ƒç´ å®šä¹‰åœ¨defså…ƒç´ é‡Œé¢ã€‚è¿™æ ·åšå¯ä»¥å¢åŠ SVGå†…å®¹çš„æ˜“è¯»æ€§å’Œå¯è®¿é—®æ€§ã€‚ åœ¨defså…ƒç´ ä¸­å®šä¹‰çš„å›¾å½¢å…ƒç´ ä¸ä¼šç›´æ¥å‘ˆç°ã€‚ ä½ å¯ä»¥åœ¨ä½ çš„è§†å£çš„ä»»æ„åœ°æ–¹åˆ©ç”¨&lt;use&gt;å…ƒç´ å‘ˆç°è¿™äº›å…ƒç´ ã€‚ &lt;use&gt;å®˜æ–¹è¯´æ³•ï¼šä½¿ç”¨URIå¼•ç”¨ä¸€ä¸ª,æˆ–å…¶ä»–å…·æœ‰ä¸€ä¸ªå”¯ä¸€çš„IDå±æ€§å’Œé‡å¤çš„å›¾å½¢å…ƒç´ ã€‚å¤åˆ¶çš„æ˜¯åŸå§‹çš„å…ƒç´ ï¼Œå› æ­¤æ–‡ä»¶ä¸­çš„åŸå§‹å­˜åœ¨åªæ˜¯ä¸€ä¸ªå‚è€ƒã€‚åŸå§‹å½±å“åˆ°æ‰€æœ‰å‰¯æœ¬çš„ä»»ä½•æ”¹å˜ã€‚ç†è§£ï¼šä½œç”¨æ˜¯èƒ½ä»SVGæ–‡æ¡£å†…éƒ¨å–å‡ºä¸€ä¸ªèŠ‚ç‚¹ï¼Œé€šè¿‡å”¯ä¸€çš„IDå±æ€§å…‹éš†å®ƒï¼Œå¹¶æŠŠå®ƒè¾“å‡ºåˆ°åˆ«å¤„ã€‚è·Ÿâ€˜å¼•ç”¨â€™å¾ˆç›¸ä¼¼ï¼Œä½†å®ƒæ˜¯æ·±åº¦å…‹éš†ã€‚ &lt;path&gt;SVGè·¯å¾„ï¼Œpathå…ƒç´ æ˜¯ç”¨æ¥å®šä¹‰å½¢çŠ¶çš„é€šç”¨å…ƒç´ ã€‚æ‰€æœ‰çš„åŸºæœ¬å½¢çŠ¶éƒ½å¯ä»¥ç”¨pathå…ƒç´ æ¥åˆ›å»ºã€‚ svgå¸¸ç”¨ä¿®æ”¹ ä¿®æ”¹å®½(width)é«˜(height) ä¿®æ”¹svgæ ‡ç­¾å†…çš„widthã€heightæ¥ä¿®æ”¹å›¾æ ‡çš„å¤§å°å®½(width)é«˜(height) ä¿®æ”¹é¢œè‰² åœ¨styleæ ‡ç­¾ä¸­å®šä¹‰ç±»ï¼Œä½¿ç”¨fillå…³é”®å­—å®šä¹‰é¢œè‰²ï¼Œå¦‚.st7ã€‚ åœ¨pathæ ‡ç­¾ä¸­å¢åŠ ç±»åï¼šclass=â€st7â€ï¼Œç”¨ç±»åæ§åˆ¶é¢œè‰²ã€‚ å¦‚ä¸‹ä¾‹ï¼š 1234567891011121314151617181920&lt;?xml version&#x3D;&quot;1.0&quot; encoding&#x3D;&quot;utf-8&quot;?&gt;&lt;!-- ä¿®æ”¹svgæ ‡ç­¾å†…çš„widthã€heightæ¥ä¿®æ”¹å›¾æ ‡çš„å¤§å°å®½(width)é«˜(height) --&gt;&lt;svg version&#x3D;&quot;1.1&quot; id&#x3D;&quot;å›¾å±‚_1&quot; xmlns&#x3D;&quot;http:&#x2F;&#x2F;www.w3.org&#x2F;2000&#x2F;svg&quot; xmlns:xlink&#x3D;&quot;http:&#x2F;&#x2F;www.w3.org&#x2F;1999&#x2F;xlink&quot; x&#x3D;&quot;0px&quot; y&#x3D;&quot;0px&quot; width&#x3D;&quot;17px&quot; height&#x3D;&quot;16px&quot; viewBox&#x3D;&quot;0 0 11 11&quot; style&#x3D;&quot;enable-background:new 0 0 11 11;&quot; xml:space&#x3D;&quot;preserve&quot;&gt;&lt;style type&#x3D;&quot;text&#x2F;css&quot;&gt; .st0&#123;fill:#08A6F1;&#125; .st1&#123;fill:#18C27B;&#125; .st2&#123;fill:#FFA200;&#125; .st3&#123;fill-rule:evenodd;clip-rule:evenodd;fill:#18C27B;&#125; .st4&#123;fill-rule:evenodd;clip-rule:evenodd;fill:#FFA200;&#125; .st5&#123;fill:#F44436;&#125; .st6&#123;clip-path:url(#SVGID_2_);&#125; .st7&#123;fill:#00CDD9;&#125;&lt;&#x2F;style&gt;&lt;!-- 1.åœ¨styleæ ‡ç­¾ä¸­å®šä¹‰ç±»ï¼Œä½¿ç”¨fillå…³é”®å­—å®šä¹‰é¢œè‰²ï¼Œå¦‚.st7ã€‚ --&gt;&lt;!-- 2.åœ¨pathæ ‡ç­¾ä¸­å¢åŠ ç±»åï¼šclass&#x3D;&quot;st7&quot;ï¼Œç”¨ç±»åæ§åˆ¶é¢œè‰²ã€‚ --&gt;&lt;path class&#x3D;&quot;st7&quot; d&#x3D;&quot;M11,10.7c0,0.2-0.2,0.3-0.3,0.3H0.3C0.2,11,0,10.8,0,10.7V10c0-0.2,0.2-0.3,0.3-0.3h10.3c0.2,0,0.3,0.2,0.3,0.3L11,10.7 L11,10.7z M1.9,4.8l3.3,3.4c0.1,0.1,0.4,0.1,0.5,0l0,0l3.3-3.4c0.1-0.1,0.1-0.2,0.1-0.4C9.1,4.3,9,4.2,8.8,4.2h-2V0.3 C6.9,0.2,6.7,0,6.5,0H4.5C4.3,0,4.1,0.2,4.1,0.3v3.9h-2C2,4.2,1.8,4.4,1.8,4.6C1.8,4.7,1.8,4.8,1.9,4.8L1.9,4.8z&quot;&#x2F;&gt;&lt;&#x2F;svg&gt;","categories":[{"name":"css","slug":"css","permalink":"https://feidom-up.github.io/categories/css/"}],"tags":[{"name":"css","slug":"css","permalink":"https://feidom-up.github.io/tags/css/"},{"name":"svg","slug":"svg","permalink":"https://feidom-up.github.io/tags/svg/"}]},{"title":"NodeJså‰ç«¯è¯äº‹äºº","slug":"NodeJså‰ç«¯è¯äº‹äºº","date":"2020-07-01T01:27:39.000Z","updated":"2024-08-22T02:26:03.658Z","comments":true,"path":"2020/07/01/NodeJså‰ç«¯è¯äº‹äºº/","link":"","permalink":"https://feidom-up.github.io/2020/07/01/NodeJs%E5%89%8D%E7%AB%AF%E8%AF%9D%E4%BA%8B%E4%BA%BA/","excerpt":"","text":"NodeJsNode.js æ˜¯ä¸€ä¸ªåŸºäº Chrome V8 å¼•æ“çš„ JavaScript è¿è¡Œæ—¶ã€‚ Node.js ä¸­æ–‡ç½‘ NodeJsåº”ç”¨åœºæ™¯ æˆ‘è¦çš„åªæ˜¯ä¸€ä¸ªé¦™è•‰ï¼Œå¾—åˆ°çš„ç¡®æ˜¯æ•´ä¸ªæ£®æ— SSR(æœåŠ¡å™¨ç«¯æ¸²æŸ“) SEOå‹å¥½ ä¼˜åŒ–å•é¡µåº”ç”¨çš„é¦–å±åŠ è½½æ—¶é—´ NodeJsé—ªäº®ç™»åœºSPA(single page web application) + NodeJsæ–¹æ¡ˆï¼šNodeJsåšProxy(ä»£ç†)å±‚ï¼ŒåŠ è½½webé¡µï¼Œè¿æ¥åå°æœåŠ¡ã€‚ å®ç°äº†: æ¶ˆå‡æ¥å£è¿”å›çš„responseã€‚ç»è¿‡NodeJså±‚å¤„ç†è¿”å›çš„æ•°æ®ï¼Œå‰ç«¯æ‹¿åˆ°çš„åªæœ‰å¥¹è¯¥æ‹¿åˆ°çš„ä¸œè¥¿ï¼Œæ•°æ®å°äº†ï¼Œä¼ è¾“å¿«äº†ï¼Œæ€§èƒ½æ›´å¥½ã€‚ çœŸå‡è·¯ç”±æ··ç”¨ã€‚Nodeå¯ä»¥ç‹¬ç«‹æ§åˆ¶è·¯ç”±ï¼Œå¹¶ä¸å—åç«¯é™åˆ¶ï¼Œå¯ä»¥ç‹¬ç«‹éƒ¨ç½²ä¸Šçº¿ã€‚å‰ç«¯æ‹¥æœ‰æ›´å¼ºçš„ä¸»åŠ¨æ€§ã€‚ Nodeå¯ä»¥ç‹¬ç«‹æ§åˆ¶è·¯ç”±ï¼Œå¯ä»¥åšåŒæ„ã€‚ Q&amp;Aï¼š &emsp;Q:ä¸ºä»€ä¹ˆç”¨NodeJsåšä»£ç†å±‚ï¼Œè€Œä¸ç”¨å…¶ä»–è¯­è¨€ï¼Ÿ &emsp;A:NodeJsæ˜¯åŸºäºJavaScriptè¯­è¨€çš„ï¼Œå‰ç«¯æ¡†æ¶Vueç­‰åªæä¾›Jsçš„API(Nuxt.js)ã€‚","categories":[{"name":"nodejs","slug":"nodejs","permalink":"https://feidom-up.github.io/categories/nodejs/"}],"tags":[{"name":"nodejs","slug":"nodejs","permalink":"https://feidom-up.github.io/tags/nodejs/"}]},{"title":"Hello World","slug":"hello-world","date":"2020-06-27T13:09:27.000Z","updated":"2024-08-22T02:26:03.658Z","comments":true,"path":"2020/06/27/hello-world/","link":"","permalink":"https://feidom-up.github.io/2020/06/27/hello-world/","excerpt":"","text":"Welcome to Hexo! This is your very first post. Check documentation for more info. If you get any problems when using Hexo, you can find the answer in troubleshooting or you can ask me on GitHub. Quick StartCreate a new post1$ hexo new \"My New Post\" More info: Writing Run server1$ hexo server More info: Server Generate static files1$ hexo generate More info: Generating Deploy to remote sites1$ hexo deploy More info: Deployment Clean1$ hexo clean New categories1$ hexo new page categories New tags1$ hexo new page tags","categories":[{"name":"hexo","slug":"hexo","permalink":"https://feidom-up.github.io/categories/hexo/"}],"tags":[]}],"categories":[{"name":"å·¥å…·","slug":"å·¥å…·","permalink":"https://feidom-up.github.io/categories/%E5%B7%A5%E5%85%B7/"},{"name":"jsåŸç†","slug":"jsåŸç†","permalink":"https://feidom-up.github.io/categories/js%E5%8E%9F%E7%90%86/"},{"name":"è®¾è®¡æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼","permalink":"https://feidom-up.github.io/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"},{"name":"react","slug":"react","permalink":"https://feidom-up.github.io/categories/react/"},{"name":"ç§»åŠ¨ç«¯","slug":"ç§»åŠ¨ç«¯","permalink":"https://feidom-up.github.io/categories/%E7%A7%BB%E5%8A%A8%E7%AB%AF/"},{"name":"webpack","slug":"webpack","permalink":"https://feidom-up.github.io/categories/webpack/"},{"name":"vue","slug":"vue","permalink":"https://feidom-up.github.io/categories/vue/"},{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"https://feidom-up.github.io/categories/%E7%AE%97%E6%B3%95/"},{"name":"æ‰‹å†™ä»£ç ç³»åˆ—","slug":"æ‰‹å†™ä»£ç ç³»åˆ—","permalink":"https://feidom-up.github.io/categories/%E6%89%8B%E5%86%99%E4%BB%A3%E7%A0%81%E7%B3%BB%E5%88%97/"},{"name":"vue","slug":"react/vue","permalink":"https://feidom-up.github.io/categories/react/vue/"},{"name":"å‰ç«¯å®‰å…¨","slug":"å‰ç«¯å®‰å…¨","permalink":"https://feidom-up.github.io/categories/%E5%89%8D%E7%AB%AF%E5%AE%89%E5%85%A8/"},{"name":"ç¼–è¯‘åŸç†","slug":"ç¼–è¯‘åŸç†","permalink":"https://feidom-up.github.io/categories/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86/"},{"name":"css","slug":"css","permalink":"https://feidom-up.github.io/categories/css/"},{"name":"npm","slug":"npm","permalink":"https://feidom-up.github.io/categories/npm/"},{"name":"nodejs","slug":"nodejs","permalink":"https://feidom-up.github.io/categories/nodejs/"},{"name":"å‰ç«¯å·¥ç¨‹åŒ–","slug":"å‰ç«¯å·¥ç¨‹åŒ–","permalink":"https://feidom-up.github.io/categories/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96/"},{"name":"å‰ç«¯æ€§èƒ½ä¼˜åŒ–","slug":"å‰ç«¯æ€§èƒ½ä¼˜åŒ–","permalink":"https://feidom-up.github.io/categories/%E5%89%8D%E7%AB%AF%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/"},{"name":"æ“ä½œç³»ç»Ÿ","slug":"æ“ä½œç³»ç»Ÿ","permalink":"https://feidom-up.github.io/categories/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/"},{"name":"hexo","slug":"hexo","permalink":"https://feidom-up.github.io/categories/hexo/"},{"name":"git","slug":"git","permalink":"https://feidom-up.github.io/categories/git/"}],"tags":[{"name":"å·¥å…·","slug":"å·¥å…·","permalink":"https://feidom-up.github.io/tags/%E5%B7%A5%E5%85%B7/"},{"name":"jsåŸç†","slug":"jsåŸç†","permalink":"https://feidom-up.github.io/tags/js%E5%8E%9F%E7%90%86/"},{"name":"è®¾è®¡æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼","permalink":"https://feidom-up.github.io/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"},{"name":"OT","slug":"OT","permalink":"https://feidom-up.github.io/tags/OT/"},{"name":"react","slug":"react","permalink":"https://feidom-up.github.io/tags/react/"},{"name":"ç§»åŠ¨ç«¯","slug":"ç§»åŠ¨ç«¯","permalink":"https://feidom-up.github.io/tags/%E7%A7%BB%E5%8A%A8%E7%AB%AF/"},{"name":"å‰ç«¯å·¥ç¨‹åŒ–","slug":"å‰ç«¯å·¥ç¨‹åŒ–","permalink":"https://feidom-up.github.io/tags/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96/"},{"name":"webpack","slug":"webpack","permalink":"https://feidom-up.github.io/tags/webpack/"},{"name":"vue","slug":"vue","permalink":"https://feidom-up.github.io/tags/vue/"},{"name":"vueæºç è§£è¯»","slug":"vueæºç è§£è¯»","permalink":"https://feidom-up.github.io/tags/vue%E6%BA%90%E7%A0%81%E8%A7%A3%E8%AF%BB/"},{"name":"æ•°æ®ç»“æ„","slug":"æ•°æ®ç»“æ„","permalink":"https://feidom-up.github.io/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/"},{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"https://feidom-up.github.io/tags/%E7%AE%97%E6%B3%95/"},{"name":"é˜Ÿåˆ—","slug":"é˜Ÿåˆ—","permalink":"https://feidom-up.github.io/tags/%E9%98%9F%E5%88%97/"},{"name":"æ ˆ","slug":"æ ˆ","permalink":"https://feidom-up.github.io/tags/%E6%A0%88/"},{"name":"serverless","slug":"serverless","permalink":"https://feidom-up.github.io/tags/serverless/"},{"name":"svg","slug":"svg","permalink":"https://feidom-up.github.io/tags/svg/"},{"name":"å‰ç«¯å®‰å…¨","slug":"å‰ç«¯å®‰å…¨","permalink":"https://feidom-up.github.io/tags/%E5%89%8D%E7%AB%AF%E5%AE%89%E5%85%A8/"},{"name":"é—®é¢˜è§£å†³","slug":"é—®é¢˜è§£å†³","permalink":"https://feidom-up.github.io/tags/%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3/"},{"name":"å•å…ƒæµ‹è¯•","slug":"å•å…ƒæµ‹è¯•","permalink":"https://feidom-up.github.io/tags/%E5%8D%95%E5%85%83%E6%B5%8B%E8%AF%95/"},{"name":"ç¼–è¯‘åŸç†","slug":"ç¼–è¯‘åŸç†","permalink":"https://feidom-up.github.io/tags/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86/"},{"name":"å›¾è¡¨","slug":"å›¾è¡¨","permalink":"https://feidom-up.github.io/tags/%E5%9B%BE%E8%A1%A8/"},{"name":"css","slug":"css","permalink":"https://feidom-up.github.io/tags/css/"},{"name":"åŠ¨ç”»","slug":"åŠ¨ç”»","permalink":"https://feidom-up.github.io/tags/%E5%8A%A8%E7%94%BB/"},{"name":"flow","slug":"flow","permalink":"https://feidom-up.github.io/tags/flow/"},{"name":"å®‰è£…ä¾èµ–é—®é¢˜","slug":"å®‰è£…ä¾èµ–é—®é¢˜","permalink":"https://feidom-up.github.io/tags/%E5%AE%89%E8%A3%85%E4%BE%9D%E8%B5%96%E9%97%AE%E9%A2%98/"},{"name":"tweenmax","slug":"tweenmax","permalink":"https://feidom-up.github.io/tags/tweenmax/"},{"name":"gsap","slug":"gsap","permalink":"https://feidom-up.github.io/tags/gsap/"},{"name":"postcss","slug":"postcss","permalink":"https://feidom-up.github.io/tags/postcss/"},{"name":"yarn","slug":"yarn","permalink":"https://feidom-up.github.io/tags/yarn/"},{"name":"npm","slug":"npm","permalink":"https://feidom-up.github.io/tags/npm/"},{"name":"nodejs","slug":"nodejs","permalink":"https://feidom-up.github.io/tags/nodejs/"},{"name":"Nginx","slug":"Nginx","permalink":"https://feidom-up.github.io/tags/Nginx/"},{"name":"å‰ç«¯æ€§èƒ½ä¼˜åŒ–","slug":"å‰ç«¯æ€§èƒ½ä¼˜åŒ–","permalink":"https://feidom-up.github.io/tags/%E5%89%8D%E7%AB%AF%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/"},{"name":"Linux","slug":"Linux","permalink":"https://feidom-up.github.io/tags/Linux/"},{"name":"sonarqube","slug":"sonarqube","permalink":"https://feidom-up.github.io/tags/sonarqube/"},{"name":"æ“ä½œç³»ç»Ÿ","slug":"æ“ä½œç³»ç»Ÿ","permalink":"https://feidom-up.github.io/tags/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/"},{"name":"PM2","slug":"PM2","permalink":"https://feidom-up.github.io/tags/PM2/"},{"name":"è¿›ç¨‹ç®¡ç†","slug":"è¿›ç¨‹ç®¡ç†","permalink":"https://feidom-up.github.io/tags/%E8%BF%9B%E7%A8%8B%E7%AE%A1%E7%90%86/"},{"name":"hexo","slug":"hexo","permalink":"https://feidom-up.github.io/tags/hexo/"},{"name":"git","slug":"git","permalink":"https://feidom-up.github.io/tags/git/"}]}